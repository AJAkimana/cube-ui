(this.webpackJsonpcube=this.webpackJsonpcube||[]).push([[0],{538:function(e,t,a){},713:function(e,t){},901:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(25),o=a.n(i),r=(a(538),a(539),a(902),a(22)),l=a(35),s=a(53),d=a(94),u=a(965),j=a(223),b=a(100),m=a(486),h=a(483),O=a(484),p=a(3),g=a(14),x=function(e,t){return Object(g.a)({loading:!1,loaded:!1},e,t)},f="USER_SIGNIN",v="USER_SIGNOUT",y="USER_LIST",C="USER_REGISTER",S="SET_PASSWORD",N="USER_UPDATE",w="USER_DELETE",I="UPDATE_PROFILE",k="SEND_LINK",E="RESET_PASSWORD",D="ADD_NEW_PROJECT",T="EDIT_PROJECT",A="GET_PROJECTS",P="GET_PROJECT_HISTORIES",R="GET_PROJECT_DETAILS",L="ADD_NEW_LOG",F="ADD_PROJECT_PROD",U="GET_PROJECT_PROD",_="ADD_NEW_QUOTA",M="UPDATE_QUOTE",W="GET_QUOTES",B="GET_INVOICES",z="UPDATE_INVOICE",Y="GET_SUBSCRIPTIONS",q="GET_DASHBOARD_COUNTS",G="GET_NOTIFICATIONS",V="GET_NOTIFICATIONS_COUNT",H="UPLOAD_PRODUCT_IMAGES",$="ADD_NEW_PRODUCT",J="GET_PRODUCTS",Q="GET_PRODUCT_IMAGES",Z="UPDATE_PRODUCT",K="UPDATE_ATTRIBUTES",X="GET_PRODUCT",ee="UPLOAD_ATTR_IMAGE",te="RESET_UPLOAD_A_IMAGE",ae="DELETE_ATTR_IMAGE",ne="GENERATE_QR",ce="DELETE_PRODUCT",ie="GET_ANALYTICS",oe="ADD_ANALYTIC",re=function(e){return"".concat(e,"_PENDING")},le=function(e){return"".concat(e,"_FULFILLED")},se=function(e){return"".concat(e,"_REJECTED")},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t={string:"",object:{},array:[]};return t[e]},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"state",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"data";return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x(t,de(a)),o=arguments.length>1?arguments[1]:void 0;switch(o.type){case re(e):var r=Object(p.a)(Object(p.a)({},i),{},{loaded:!1,loading:!0});return n&&(r=Object(p.a)(Object(p.a)({},r),{},Object(g.a)({},t,de(a)))),r;case le(e):return Object(p.a)(Object(p.a)({},i),{},Object(g.a)({loading:!1,loaded:!0},t,o.payload.data[c]));case se(e):default:return Object(p.a)(Object(p.a)({},i),{},{loading:!1})}}},je=Object(b.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("userInfo",{user:{}}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(f):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(f):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,userInfo:t.payload.data.data});case v:return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,userInfo:{user:{}}});case se(f):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("userInfo",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(C):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(C):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,userInfo:t.payload.data.data});case se(C):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("users",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(y):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(y):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,users:t.payload.data.data});case se(y):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},passwordSet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(S):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(S):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(S):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(D):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(D):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(D):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectsGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("projects",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(A):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(A):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,projects:t.payload.data.data});case se(A):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(T):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(T):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(T):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},quoteAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(_):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(_):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(_):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},quotesGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("quotes",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(W):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(W):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,quotes:t.payload.data.data});case se(W):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},quoteEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(M):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(M):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(M):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},invoicesGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("invoices",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(B):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(B):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,invoices:t.payload.data.data});case se(B):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},invoiceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(z):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(z):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(z):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},subscriptionsGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("subscriptions",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(Y):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(Y):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,subscriptions:t.payload.data.data});case se(Y):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("counts",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(q):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(q):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,counts:t.payload.data.data});case se(q):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},userEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(N):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(N):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:t.payload.data.message});case se(N):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},userRm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(w):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(w):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:t.payload.data.message});case se(w):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},profileEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("userInfo",{user:{}}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(I):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(I):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,userInfo:t.payload.data.data});case se(I):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},linkSend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(k):return Object(p.a)(Object(p.a)({},e),{},{loading:!0,loaded:!1});case le(k):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(k):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},pwdReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(E):return Object(p.a)(Object(p.a)({},e),{},{loading:!0,loaded:!1});case le(E):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case se(E):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},historiesGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("histories",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(P):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(P):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,histories:t.payload.data.data});case se(P):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},notifsGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("notifs",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(G):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(G):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,notifs:t.payload.data.data});case se(G):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},notifsCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("count",0),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(V):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case le(V):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,count:t.payload.data.data});case se(V):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("project",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(R):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(R):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,project:t.payload.data.data});case se(R):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},logAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("log",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(L):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(L):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,log:t.payload.data.data});case se(L):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},fileUpload:ue(H,"filePath","string"),productAdd:ue($,"product","object"),productsGet:ue(J,"products","array"),productImg:ue(Q,"image","object"),productEdit:ue(Z,"message","string"),attrUpdate:ue(K,"message","string"),productGet:ue(X,"product","object",!0),attrImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("fileName",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re(ee):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case le(ee):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,fileName:t.payload.data.data});case te:return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,fileName:""});case se(ee):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},imgAttrDel:ue(ae,"deletedFile","string"),projectAddProd:ue(F,"message","string",!0),projectProdsGet:ue(U,"projProds","array"),analyticsGet:ue(ie,"analytics","array"),analyticAdd:ue(oe,"analytic","object",!0),qrGenerate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("qr",""),t=arguments.length>1?arguments[1]:void 0;return t.type===ne?Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,qr:t.payload}):Object(p.a)(Object(p.a)({},e),{},{loading:!1})},productRm:ue(ce,"message","string",!0)}),be=a(485),me=a.n(be),he=function(e){return Object(d.b)(e,{type:d.b.TYPE.ERROR,position:d.b.POSITION.BOTTOM_RIGHT,toastId:13})},Oe=function(e){return Object(d.b)(e,{type:d.b.TYPE.DEFAULT,position:d.b.POSITION.BOTTOM_LEFT,toastId:13})},pe=function(){return function(e){return function(t){return me()(t.payload)?t.meta&&t.meta.localError?e(t):e(t).catch((function(e){var t="";if(e.response){var a=e.response.data,n=a.error,c=a.message;t=n||c}else t=e.message;var i=Array.isArray(t)?t[0]:t;he(i)})):e(t)}}},ge={login:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{user:{}}}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=!1,a=[pe,m.a,h.a],n=t?Object(O.composeWithDevTools)(b.applyMiddleware.apply(void 0,a)):b.applyMiddleware.apply(void 0,a),c=[n],i=b.compose.apply(void 0,c),o=Object(b.createStore)(je,e,i);return o}(),fe=a(672),ve=a(547),ye=a(545),Ce=a(546),Se=a(50),Ne=a(904),we=a(548),Ie=a(487),ke=a.n(Ie),Ee=a(128),De=a(1),Te=function(e){var t=e.counts;return Object(De.jsx)(ye.a,{sx:{height:"100%"},children:Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ve.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(De.jsxs)(ve.a,{item:!0,children:[Object(De.jsx)(Se.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"Subscriptions"}),Object(De.jsx)(Se.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(De.jsx)(ve.a,{item:!0,children:Object(De.jsx)(Ne.a,{sx:{backgroundColor:Ee.a[600],height:56,width:56},children:Object(De.jsx)(ke.a,{})})})]}),Object(De.jsx)(we.a,{sx:{pt:2,display:"flex",alignItems:"center"}})]})})},Ae=a(131),Pe=a(221),Re=a.n(Pe),Le=function(e){var t=e.counts;return Object(De.jsx)(ye.a,{children:Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ve.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(De.jsxs)(ve.a,{item:!0,children:[Object(De.jsx)(Se.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TOTAL CUSTOMERS"}),Object(De.jsx)(Se.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(De.jsx)(ve.a,{item:!0,children:Object(De.jsx)(Ne.a,{sx:{backgroundColor:Ae.a[600],height:56,width:56},children:Object(De.jsx)(Re.a,{})})})]}),Object(De.jsx)(we.a,{sx:{alignItems:"center",display:"flex",pt:2}})]})})},Fe=function(e){var t=e.counts;return Object(De.jsx)(ye.a,{children:Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ve.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(De.jsxs)(ve.a,{item:!0,children:[Object(De.jsx)(Se.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TOTAL PROJECTS"}),Object(De.jsx)(Se.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(De.jsx)(ve.a,{item:!0,children:Object(De.jsx)(Ne.a,{sx:{backgroundColor:Ae.a[600],height:56,width:56}})})]}),Object(De.jsx)(we.a,{sx:{alignItems:"center",display:"flex",pt:2}})]})})},Ue=function(e){var t=e.counts;return Object(De.jsx)(ye.a,{children:Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ve.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(De.jsxs)(ve.a,{item:!0,children:[Object(De.jsx)(Se.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TOTAL PROPOSALS"}),Object(De.jsx)(Se.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(De.jsx)(ve.a,{item:!0,children:Object(De.jsx)(Ne.a,{sx:{backgroundColor:Ae.a[600],height:56,width:56},children:Object(De.jsx)(Re.a,{})})})]}),Object(De.jsx)(we.a,{sx:{alignItems:"center",display:"flex",pt:2}})]})})},_e=a(61),Me="userInfo",We="".concat("https://cube.arinnovations.io/","api/v1/invoice"),Be="".concat("https://cube.arinnovations.io/","api/v1/files"),ze="".concat("https://cube.arinnovations.io/","api/v1/images/"),Ye="https://cube.arinnovations.io",qe=a(8),Ge=a(302),Ve=a.n(Ge),He=JSON.parse(localStorage.getItem(Me)),$e="";He&&($e=He.token);var Je=Ve.a.create({baseURL:"".concat("https://cube.arinnovations.io/","api/v1"),headers:{Authorization:"Bearer ".concat($e)}}),Qe=(Ve.a.create({baseURL:"https://api.qrserver.com/v1"}),"/project/"),Ze=function(e){var t=e.status,a=e.clientId,n="";t&&(n+="status=".concat(t,"&")),a&&(n+="client=".concat(a,"&")),xe.dispatch({type:A,payload:Je.get("".concat(Qe,"?").concat(n))})},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";xe.dispatch({type:P,payload:Je.get("".concat(Qe+e,"/histories"))})},Xe=function(){return Object(De.jsxs)("div",{className:"loading text-center",children:[Object(De.jsx)("i",{className:"fa fa-spinner fa-spin"})," Loading..."]})},et=Xe,tt=a(13),at=a(670),nt=a(671),ct=a(304),it=a(573),ot=a(954),rt=a(955),lt=a(956),st=a(957),dt=a(400),ut=a(19),jt=Object(dt.a)((function(e){return{grow:{flexGrow:1},appBar:{backgroundColor:"#8967fc"},menuButton:{marginRight:e.spacing(2)},title:Object(g.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ut.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ut.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(g.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(g.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(g.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),bt=a(27),mt=a(160),ht=a(266),Ot=a(267),pt=["_id"],gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="/auth/users";e&&(t+="?role=".concat(e)),xe.dispatch({type:y,payload:Je.get(t)})},xt=function(e){xe.dispatch({type:I,payload:Je.patch("/auth/edit-profile",e)})},ft="primary-search-account-menu",vt=function(e){var t=e.anchorEl,a=e.isMenuOpen,n=e.handleMenuClose,c=e.user,i=[{link:"analytics",title:"Analytics"},{link:"products",title:"3D assets"},{link:"projects",title:"Projects"},{link:"quotes",title:"Proposals"},{link:"invoices",title:"Invoices"},{link:"subscriptions",title:"Subscriptions"},{link:"profile",title:"My profile"}];return c&&"Client"!==c.role&&(i=[{link:"customers",title:"Customers"}].concat(Object(bt.a)(i))),Object(De.jsxs)(mt.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:ft,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:n,children:[i.map((function(e,t){return Object(De.jsx)(ht.a,{onClick:n,component:_e.a,to:"/dashboard/".concat(e.link),children:e.title},t)})),Object(De.jsx)(Ot.a,{}),Object(De.jsx)(ht.a,{onClick:function(){xe.dispatch({type:v})},children:"Sign Out"})]})},yt="primary-search-account-menu-mobile",Ct=function(e){var t=e.mobileMoreAnchorEl,a=e.isMobileMenuOpen,n=e.handleMobileMenuClose,c=e.handleNavMenuOpen,i=e.user,o=e.notificationsCount,r=void 0===o?0:o;return Object(De.jsxs)(mt.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:yt,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:n,children:[Object(De.jsxs)(ht.a,{children:[Object(De.jsx)(ct.a,{"aria-label":"show ".concat(r," new notifications"),color:"inherit","aria-controls":"notifications-menu","aria-haspopup":"true",children:Object(De.jsx)(it.a,{badgeContent:r,color:"secondary",children:Object(De.jsx)(ot.a,{})})}),Object(De.jsx)("p",{children:"Notifications"})]}),Boolean(null===i||void 0===i?void 0:i.fullName)&&Object(De.jsxs)(ht.a,{onClick:c,children:[Object(De.jsx)(ct.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(De.jsx)(rt.a,{})}),Object(De.jsx)("p",{children:i.fullName})]})]})},St=a(492),Nt=a(669),wt=a(32),It=a.n(wt),kt=a(30),Et=a(494),Dt=a.n(Et),Tt=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c="You";return a.role===n.userRole?c:"Client"===a.role?"".concat(null===(e=n.createdBy)||void 0===e?void 0:e.fullName,"[").concat(n.userRole,"]"):null===(t=n.createdBy)||void 0===t?void 0:t.companyName},At=function(e){return Dt()(Object(kt.convertToRaw)(null===e||void 0===e?void 0:e.getCurrentContent()))},Pt="notifications-menu",Rt=function(e){var t=e.anchorEl,a=e.onClose,n=e.user,c=Object(r.b)((function(e){return e})).notifsGet,i=c.notifs,o=c.loading,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/dashboard/projects/".concat(e.project);return e.quote&&(t="/dashboard/quotes"),t};return Object(De.jsx)(mt.a,{id:Pt,anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:a,children:o?Object(De.jsx)(et,{}):i.length?i.map((function(e,t){return Object(De.jsx)(ht.a,{onClick:a,component:_e.a,to:l(e),children:Object(De.jsx)(St.a,{alignItems:"flex-start",children:Object(De.jsx)(Nt.a,{primary:e.description,secondary:Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)(Se.a,{component:"span",variant:"body2",style:{display:"inline"},color:"textPrimary",children:["(",Tt(n,e),")"]})," \u2014 ".concat(It()(e.createdAt).fromNow())]})})})},t)})):Object(De.jsx)(ht.a,{onClick:a,children:" No new notification"})})},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="notifications",a=G;""!==e&&(t+="?type=count",a=V),xe.dispatch({type:a,payload:Je.get("/home/".concat(t))})},Ft=function(e){var t=e.children,a=jt(),i=c.a.useState(null),o=Object(tt.a)(i,2),l=o[0],s=o[1],d=c.a.useState(null),u=Object(tt.a)(d,2),j=u[0],b=u[1],m=c.a.useState(null),h=Object(tt.a)(m,2),O=h[0],p=h[1],g=Object(r.b)((function(e){return e})),x=g.login.userInfo.user,f=g.notifsCount.count;Object(n.useEffect)((function(){Lt("count")}),[]);var v=Boolean(l),y=Boolean(j),C=function(e){b(null),s(e.currentTarget)},S=function(){b(null)};return Object(De.jsxs)("div",{className:a.grow,children:[Object(De.jsx)(at.a,{position:"static",className:a.appBar,children:Object(De.jsxs)(nt.a,{children:[Object(De.jsx)(Se.a,{className:a.title,variant:"h4",color:"inherit",noWrap:!0,children:"Augmented Reality Innovations"}),Object(De.jsx)("div",{className:a.grow}),Boolean(null===x||void 0===x?void 0:x.fullName)&&Object(De.jsxs)("div",{className:a.sectionDesktop,children:[Object(De.jsxs)(ct.a,{"aria-label":"show ".concat(f," new notifications"),color:"inherit","aria-controls":Pt,"aria-haspopup":"true",onClick:function(e){var t=e.currentTarget;p(t),Lt()},children:[Object(De.jsx)(it.a,{badgeContent:f,color:"secondary",children:Object(De.jsx)(ot.a,{})}),"Notifications"]}),Object(De.jsxs)(ct.a,{edge:"end","aria-label":"account of current user","aria-controls":ft,"aria-haspopup":"true",onClick:C,color:"inherit",children:[Object(De.jsx)(rt.a,{}),x.firstName,Object(De.jsx)(lt.a,{})]})]}),Object(De.jsx)("div",{className:a.sectionMobile,children:Object(De.jsx)(ct.a,{"aria-label":"show more","aria-controls":yt,"aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},color:"inherit",children:Object(De.jsx)(st.a,{})})})]})}),Object(De.jsx)(vt,{anchorEl:l,isMenuOpen:v,handleMenuClose:function(){s(null),S()},user:x}),Object(De.jsx)(Ct,{mobileMoreAnchorEl:j,isMobileMenuOpen:y,handleMobileMenuClose:S,handleNavMenuOpen:C,user:x,notificationsCount:f}),Object(De.jsx)(Rt,{anchorEl:O,onClose:function(){return p(null)},user:x}),t]})},Ut=function(e){var t={Admin:{lg:3,sm:6,xl:3,xs:12},Manager:{lg:3,sm:6,xl:3,xs:12},Client:{lg:4,sm:6,xl:4,xs:12}};return e?t[e]:t.Client},_t=a.p+"static/media/ari_cube.2edefd08.png",Mt={password:"",confirmPassword:""},Wt=function(e){var t=e.history,a=e.match,c=Object(n.useState)(Mt),i=Object(tt.a)(c,2),o=i[0],l=i[1],s=Object(r.b)((function(e){return e})),d=s.passwordSet,u=d.loaded,j=d.loading,b=s.pwdReset,m=b.loaded,h=b.loading;Object(n.useEffect)((function(){(u||m)&&(Oe("The password has been set"),setTimeout((function(){t.replace("/")}),3e3))}),[t,u,m]);var O=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;l(Object(p.a)(Object(p.a)({},o),{},Object(g.a)({},a,n)))};return Object(De.jsx)("div",{children:Object(De.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),delete o.confirmPassword,o.token=a.params.token,"reset"===a.params.action?function(e){xe.dispatch({type:E,payload:Je.post("/auth/reset-password",e)})}(o):function(e){xe.dispatch({type:S,payload:Je.patch("/auth/set-password",e)})}(o)},children:[Object(De.jsx)("div",{children:Object(De.jsx)("img",{src:_t,alt:"#",className:"logo"})}),Object(De.jsx)("div",{children:Object(De.jsx)("h1",{children:"Set a new password"})}),(j||h)&&Object(De.jsx)(et,{}),Object(De.jsxs)("div",{children:[Object(De.jsx)("label",{htmlFor:"pasword",children:"New Password"}),Object(De.jsx)("input",{type:"password",id:"password",name:"password",className:"login-input",placeholder:"Enter password",required:!0,onChange:O,value:o.password})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm password"}),Object(De.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",className:"login-input",placeholder:"Confirm password",required:!0,onChange:O,value:o.confirmPassword})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("label",{}),Object(De.jsx)("button",{className:"login-input btn-login primary",type:"submit",disabled:j,children:"Set password"})]})]})})},Bt=a(495),zt=a.n(Bt),Yt=a(224),qt=a.n(Yt),Gt=Object(dt.a)((function(e){return{root:{},row:{height:"42px",display:"flex",alignItems:"center",marginTop:e.spacing(1)},spacer:{flexGrow:1},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)},searchInput:{marginRight:e.spacing(1)},content:{marginTop:e.spacing(2)},tableContent:{padding:0},inner:{},nameContainer:{display:"flex",alignItems:"center"},avatar:{marginRight:e.spacing(2)},actions:{justifyContent:"flex-end"}}})),Vt=a(675),Ht=a(676),$t=a(677),Jt=a(678),Qt=a(679),Zt=a(680),Kt=a(681),Xt=a(11),ea=a(17),ta=a(496),aa=a.n(ta),na=["pageCount","pageRangeDisplayed","marginPagesDisplayed","onPageChange","className"],ca=Object(dt.a)((function(e){return{root:Object(p.a)(Object(p.a)({},e.typography.button),{},{listStyle:"none",userSelect:"none",display:"flex",alignItems:"center"}),active:{},activeLink:{},break:{},breakLink:{},disabled:{},next:{marginLeft:e.spacing(1)},nextLink:{padding:"6px 16px",outline:"none",cursor:"pointer",borderRadius:4,"&:hover":{backgroundColor:ea.a.blueGrey[50]}},page:{},pageLink:{color:e.palette.text.secondary,padding:e.spacing(1),outline:"none",cursor:"pointer",width:40,height:40,borderRadius:"50%",display:"block",textAlign:"center","&:hover":{backgroundColor:ea.a.blueGrey[50],color:e.palette.text.primary},"&$activeLink":{backgroundColor:ea.a.blueGrey[50],color:e.palette.text.primary}},previous:{marginRight:e.spacing(1)},previousLink:{padding:"6px 16px",outline:"none",cursor:"pointer",borderRadius:4,"&:hover":{backgroundColor:ea.a.blueGrey[50]}}}})),ia=function(e){var t=e.pageCount,a=void 0===t?0:t,n=e.pageRangeDisplayed,c=void 0===n?2:n,i=e.marginPagesDisplayed,o=void 0===i?1:i,r=e.onPageChange,l=(e.className,Object(qe.a)(e,na)),s=ca();return a>0&&Object(De.jsx)(aa.a,Object(p.a)({activeClassName:s.active,activeLinkClassName:s.activeLink,breakClassName:s.break,breakLabel:"...",breakLinkClassName:s.breakLink,containerClassName:s.root,disabledClassName:s.disabled,marginPagesDisplayed:o,nextClassName:s.next,nextLabel:"next",nextLinkClassName:s.nextLink,onPageChange:r,pageClassName:s.page,pageCount:a,pageLinkClassName:s.pageLink,pageRangeDisplayed:c,previousClassName:s.previous,previousLabel:"previous",previousLinkClassName:s.previousLink,subContainerClassName:"pages pagination"},l))},oa=function(e){var t=e.message,a=void 0===t?"No data to display":t;return Object(De.jsx)(Se.a,{align:"center",variant:"h5",children:a})},ra=Object(Xt.a)((function(e){return{head:{backgroundColor:"#8967fc",color:e.palette.common.white,fontSize:16},body:{fontSize:16}}}))(Vt.a),la=Object(Xt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Ht.a),sa=function(e){var t=e.data,a=void 0===t?[]:t,n=e.tableTitle,c=void 0===n?"":n,i=(e.dataCount,e.pageCount),o=void 0===i?0:i,r=(e.page,e.columns),l=void 0===r?[]:r,s=e.selectedData,d=void 0===s?[]:s,u=e.loading,j=void 0!==u&&u,b=e.withPagination,m=void 0===b||b,h=e.handlePageChange,O=e.size,p=void 0===O?"small":O,g=Gt(),x=function(e,t){return t.content?t.content(e):qt.a.get(e,t.path)};return Object(De.jsx)("div",{className:g.root,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:c}),Object(De.jsx)(Ot.a,{}),Object(De.jsx)(Ce.a,{className:g.tableContent,children:j?Object(De.jsx)(Xe,{}):a.length?Object(De.jsx)(zt.a,{children:Object(De.jsxs)(Jt.a,{size:p,children:[Object(De.jsx)(Qt.a,{children:Object(De.jsx)(la,{children:l.map((function(e,t){var a=e.label;return Object(De.jsx)(ra,{children:a},t)}))})}),Object(De.jsx)(Zt.a,{children:a.map((function(e,t){return Object(De.jsx)(la,{className:g.tableRow,hover:!0,selected:-1!==d.indexOf(e.id),children:l.map((function(t,a){return Object(De.jsx)(ra,{children:x(e,t)},a)}))},t)}))})]})}):Object(De.jsx)(oa,{})}),0!==o&&m&&Object(De.jsx)(Kt.a,{className:g.actions,children:Object(De.jsx)(ia,{marginPagesDisplayed:2,onPageChange:h,pageCount:o,pageRangeDisplayed:1})})]})})},da=a(165),ua=a(52),ja=a(976),ba=a(132),ma=a(277),ha=a(500),Oa=a(501),pa=a(528),ga=a(213),xa=a(958),fa=a(166),va=Object(dt.a)((function(e){return{root:{padding:e.spacing(3)},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#8967fc"},input:{fontSize:16},form:{width:"100%",marginTop:e.spacing(2),color:"black",fontSize:16},submit:{margin:e.spacing(3,0,2),backgroundColor:"#8967fc",borderRadius:5,float:"left",maxWidth:"100%",color:"white",fontSize:16,"&:hover":{backgroundColor:"#8967fc",color:"#FFFFFF"}},inline:{display:"inline"}}})),ya=a(497),Ca=(a(682),Object(dt.a)((function(e){return{root:{fontFamily:e.typography.fontFamily,"& .rdw-option-wrapper":{background:"transparent",border:"none",minWidth:26,padding:6,"&:hover":{boxShadow:"none",backgroundColor:e.palette.action.hover}},"& .rdw-option-active":{boxShadow:"none",backgroundColor:e.palette.action.selected},"& .rdw-dropdown-wrapper":{boxShadow:"none",background:"transparent"},"& .rdw-dropdown-optionwrapper":{overflowY:"auto",boxShadow:e.shadows[10],padding:e.spacing(1)}},toolbar:{marginBottom:0,borderLeft:"none",borderTop:"none",borderRight:"none",borderBottom:"1px solid ".concat(e.palette.divider),background:"transparent"},editor:{padding:e.spacing(2),height:100,color:e.palette.text.primary}}}))),Sa=function(e){var t=e.setEditorState,a=e.editorState,n=Ca();return Object(De.jsx)(ya.Editor,{editorClassName:n.editor,editorState:a,onEditorStateChange:t,toolbar:{options:["inline","blockType","fontSize","fontFamily","list","textAlign","history"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0}},toolbarClassName:n.toolbar,wrapperClassName:n.root})},Na={name:"",type:"",nOfItems:"1",startDate:It()().format("YYYY-MM-DD"),dueDate:It()().format("YYYY-MM-DD"),budget:"",status:"pending",description:"",userId:"",managerId:""},wa=["pending","approved","canceled"],Ia=[{name:"Cube Platform",description:"I want to publish and manage my products in 3D and AR myself"},{name:"3D modeling",description:"I need help with creating my products in 3D"},{name:"3D Viewer",description:"I want to present my product in 3D on a website"},{name:"3D Configurator",description:"I want to showcase my products in specific configurations"},{name:"AR",description:"I want to showcase my products in AR"}],ka=function(e){var t,a=e.action,c=void 0===a?"add":a,i=e.currentItem,o=void 0===i?null:i,l=va(),s=Object(n.useState)(Na),d=Object(tt.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(kt.EditorState.createEmpty()),m=Object(tt.a)(b,2),h=m[0],O=m[1],x=Object(r.b)((function(e){return e})),f=x.projectAdd,v=f.loading,y=f.loaded,C=x.projectEdit,S=C.loading,N=C.loaded,w=x.userList.users,I=x.login.userInfo.user;Object(n.useEffect)((function(){gt("Manager")}),[]),Object(n.useEffect)((function(){if(y||N){var e=Object(p.a)({},Na);j(e),O(kt.EditorState.createEmpty())}}),[y,N,I]),Object(n.useEffect)((function(){if(o&&"view"!==c){var e=o.status,t=o.name,a=o.description,n=o.type,i=o.nOfItems,r=o.startDate,l=o.dueDate,s=o.budget,d=o.manager,u=Object(fa.a)(a);j({name:t,status:e,type:n,nOfItems:i,startDate:It()(r).format("YYYY-MM-DD"),dueDate:It()(l).format("YYYY-MM-DD"),budget:s,managerId:d}),O(kt.EditorState.createWithContent(u))}}),[o,c]);var k=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;j(Object(p.a)(Object(p.a)({},u),{},Object(g.a)({},a,n)))};return Object(De.jsx)(ye.a,{component:"main",className:l.root,children:Object(De.jsxs)("div",{className:l.paper,children:[Object(De.jsx)(Ne.a,{className:l.avatar,children:Object(De.jsx)(xa.a,{})}),Object(De.jsx)(Se.a,{component:"h1",variant:"h4",children:o&&"view"!==c?'Update "'.concat(null===o||void 0===o||null===(t=o.name)||void 0===t?void 0:t.toUpperCase(),'" project'):"Add a new project"}),(v||S)&&Object(De.jsx)(Xe,{}),Object(De.jsxs)("form",{className:l.form,onSubmit:function(e){var t,a;e.preventDefault(),u.description=At(h),"add"!==c&&o?(t=u,a=o._id,xe.dispatch({type:T,payload:Je.patch(Qe+a,t)})):function(e){xe.dispatch({type:D,payload:Je.post(Qe,e)})}(u)},children:[Object(De.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{className:l.input,name:"name",variant:"outlined",fullWidth:!0,label:"Project name",onChange:k,value:u.name,autoFocus:!0,disabled:"Client"!==I.role})}),"Admin"===I.role&&"changePm"===c&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"project-manager",children:"Project manager"}),Object(De.jsxs)(pa.a,{labelId:"project-manager",value:u.managerId,name:"managerId",onChange:k,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),w.map((function(e,t){var a=e._id,n=e.fullName;return Object(De.jsx)(ht.a,{value:a,children:n},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"project-type",children:"Project type"}),Object(De.jsxs)(pa.a,{labelId:"project-type",value:u.type,name:"type",onChange:k,disabled:"Client"!==I.role,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),Ia.map((function(e,t){return Object(De.jsx)(ht.a,{value:e.name,children:"".concat(e.name," - ").concat(e.description)},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"project-status",children:"Status"}),Object(De.jsxs)(pa.a,{labelId:"project-status",value:u.status,name:"status",onChange:k,disabled:"change"!==c,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),wa.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(De.jsx)(ua.a,{utils:da.a,children:Object(De.jsx)(ja.a,{label:"Start Date",inputVariant:"outlined",value:u.startDate,InputAdornmentProps:{position:"start"},format:"yyyy-MM-dd",views:["year","month","date"],onChange:function(e){j(Object(p.a)(Object(p.a)({},u),{},{startDate:e}))},disabled:"Client"!==I.role})})}),Object(De.jsx)(ve.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(De.jsx)(ua.a,{utils:da.a,children:Object(De.jsx)(ja.a,{label:"Due Date",inputVariant:"outlined",value:u.dueDate,InputAdornmentProps:{position:"start"},format:"yyyy-MM-dd",views:["year","month","date"],disabled:"Client"!==I.role,onChange:function(e){j(Object(p.a)(Object(p.a)({},u),{},{dueDate:e}))}})})}),Object(De.jsx)(ve.a,{item:!0,lg:4,md:4,xl:4,xs:12,children:Object(De.jsx)(ma.a,{className:l.input,variant:"outlined",fullWidth:!0,type:"number",name:"nOfItems",label:"Number of items",value:u.nOfItems,onChange:k,disabled:"Client"!==I.role})}),Object(De.jsx)(ve.a,{item:!0,lg:8,md:8,xl:8,xs:12,children:Object(De.jsx)(ba.a,{className:l.input,value:u.budget,onValueChange:function(e){var t=e.floatValue;return j(Object(p.a)(Object(p.a)({},u),{},{budget:t}))},prefix:"$",thousandSeparator:!0,customInput:ma.a,fullWidth:!0,variant:"outlined",label:"Budget(in USD)",disabled:"Client"!==I.role})}),"Client"===I.role&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(Sa,{editorState:h,setEditorState:O})})]}),Object(De.jsx)(Kt.a,{children:"add"===c?Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:v,children:"Save"}):Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:S,children:"Update the project"})})]})]})})},Ea=a(687),Da=a(688),Ta=a(959),Aa=a(960),Pa=a(961),Ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"Client"!==e.role?[{content:function(e){var t;return Object(De.jsx)(Se.a,{children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName})},label:"Project Owner"}]:[]},La=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{content:function(e){return Object(De.jsx)(St.a,{children:Object(De.jsx)(Nt.a,{primary:e.name,secondary:e.type})})},label:"Project"}].concat(Object(bt.a)(Ra(t)),[{path:"type",label:"Type"},{path:"status",label:"Status"},{content:function(e){var t;return Object(De.jsxs)(Se.a,{children:["$ ",null===(t=e.budget)||void 0===t?void 0:t.toLocaleString("en-US")]})},label:"Budget"},{content:function(a){return Object(De.jsxs)(Ea.a,{variant:"outlined",size:"small",children:[Object(De.jsx)(Da.a,{title:"View",children:Object(De.jsxs)(ct.a,{"aria-label":"View",color:"secondary",component:_e.a,to:"/dashboard/projects/".concat(a._id),children:[Object(De.jsx)(Ta.a,{})," View"]})}),"Client"===t.role&&Object(De.jsx)(Da.a,{title:"Edit",children:Object(De.jsx)(ct.a,{"aria-label":"Edit",color:"secondary",disabled:"approved"===a.status,onClick:function(){return e(a,"edit")},children:Object(De.jsx)(Aa.a,{})})}),"Client"!==t.role&&Object(De.jsx)(Da.a,{title:"Change status",children:Object(De.jsx)(ct.a,{"aria-label":"Change status",color:"default",disabled:"approved"===a.status,onClick:function(){return e(a,"change")},children:Object(De.jsx)(Pa.a,{})})}),"Admin"===t.role&&Object(De.jsx)(Da.a,{title:"Change project manager",children:Object(De.jsx)(ct.a,{"aria-label":"Change project manager",color:"default",disabled:"approved"===a.status,onClick:function(){return e(a,"changePm")},children:"Change PM"})})]})},label:"Actions"}])},Fa=a(962),Ua=function(e){return[{path:"fullName",label:"Names"},{path:"email",label:"Email"},{path:"phoneNumber",label:"Phone number"},{path:"role",label:"User role"},{path:"companyName",label:"Company"},{content:function(t){return Object(De.jsxs)(Ea.a,{variant:"outlined",size:"small",children:[Object(De.jsx)(Da.a,{title:"View",children:Object(De.jsxs)(ct.a,{"aria-label":"View",color:"secondary",onClick:function(){return e(t,"view")},children:[Object(De.jsx)(Ta.a,{})," View"]})}),Object(De.jsx)(Da.a,{title:"Edit",children:Object(De.jsx)(ct.a,{"aria-label":"Edit",color:"secondary",onClick:function(){return e(t,"edit")},children:Object(De.jsx)(Aa.a,{})})}),Object(De.jsx)(Da.a,{title:"Delete",children:Object(De.jsx)(ct.a,{"aria-label":"Delete",color:"danger",onClick:function(){return e(t,"delete")},children:Object(De.jsx)(Fa.a,{})})})]})},label:"Actions"}]},_a=a(963),Ma=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{content:function(e){var t,a;return Object(De.jsx)(St.a,{children:Object(De.jsx)(Nt.a,{primary:null===(t=e.project)||void 0===t?void 0:t.name,secondary:null===(a=e.project)||void 0===a?void 0:a.type})})},label:"Project"},{content:function(e){var t;return Object(De.jsx)(Se.a,{children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName})},label:"Project owner"},{content:function(e){var t;return Object(De.jsxs)(Se.a,{children:["$ ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-US")]})},label:"Amount"},{path:"status",label:"Status"},{content:function(e){return Object(De.jsx)(Se.a,{children:"pending"===e.status?It()(e.due_date).fromNow():"Already paid"})},label:"Due data"},{content:function(a){return"pending"===a.status&&"Client"!==t.role?Object(De.jsx)(Ea.a,{variant:"outlined",size:"small",children:Object(De.jsx)(Da.a,{title:"Approve payment",children:Object(De.jsxs)(ct.a,{"aria-label":"Approve payment",color:"default",onClick:function(){return e(a,"change")},children:[Object(De.jsx)(Pa.a,{})," Approve payment"]})})}):Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Se.a,{variant:"caption",color:"error",children:"No action needed"}),Object(De.jsx)(Da.a,{title:"Print invoice",children:Object(De.jsxs)(ct.a,{component:"a","aria-label":"Print invoice",color:"default",rel:"noreferrer",href:"".concat(We,"/").concat(a._id),target:"_blank",size:"small",children:[Object(De.jsx)(_a.a,{})," Download"]})})]})},label:"Actions"}]},Wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{content:function(e){var t,a;return Object(De.jsx)(St.a,{children:Object(De.jsx)(Nt.a,{primary:null===(t=e.project)||void 0===t?void 0:t.name,secondary:null===(a=e.project)||void 0===a?void 0:a.type})})},label:"Project"}].concat(Object(bt.a)(Ra(e)),[{content:function(e){return Object(De.jsx)(Se.a,{children:e.billingCycle})},label:"Billing cycle"},{content:function(e){var t,a;return Object(De.jsxs)(Se.a,{children:["$ ",null===(t=e.quote)||void 0===t||null===(a=t.amount)||void 0===a?void 0:a.toLocaleString("en-US")]})},label:"Amount"},{content:function(e){return Object(De.jsx)(Se.a,{children:It()(e.startDate).fromNow()})},label:"Start date"},{content:function(e){return Object(De.jsx)(Se.a,{children:e.expirationDate?It()(e.expirationDate).fromNow():"One time pay"})},label:"Expiration date"},{path:"status",label:"Status"}])},Ba=a(905),za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=(t-1)*a;return qt()(e).slice(n).take(a).value()},Ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{pageSize:e,pageNumber:t}},qa=a(93),Ga=a.n(qa),Va=a(755),Ha=a(683),$a=a(756),Ja=a(684),Qa=a(491),Za=a(906),Ka=a(758),Xa=a(759),en=a(685),tn=a(966),an=(a(454),a(228)),nn=a.n(an),cn=a(229),on=["button"],rn=Object(n.forwardRef)((function(e,t){return Object(De.jsx)(Va.a,Object(p.a)({direction:"up",ref:t},e))})),ln=Object(dt.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),sn=function(e){var t,a,c=e.open,i=void 0!==c&&c,o=e.setOpen,l=e.currentItem,s=void 0===l?null:l,d=ln(),u=Object(n.useState)({name:""}),j=Object(tt.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)({}),O=Object(tt.a)(h,2),p=O[0],g=O[1],x=Object(r.b)((function(e){return e.historiesGet})),f=x.loading,v=x.histories;Object(n.useEffect)((function(){if(s){m(s),Ke(s._id);var e=Ia.find((function(e){return e.name===s.type}));g(e)}}),[s]);var y=Object(cn.useBlogTextInfoContentStyles)(),C=y.button,S=Object(qe.a)(y,on),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.invoice;return e.quote&&(t="".concat(e.quote,"?downloadType=quote")),t};return Object(De.jsxs)(Ha.a,{open:i,TransitionComponent:rn,keepMounted:!0,onClose:o,"aria-labelledby":"project-name","aria-describedby":"project-description",children:[Object(De.jsx)($a.a,{id:"project-name",children:"Project name: ".concat(b.name.toUpperCase())}),Object(De.jsx)(Ja.a,{children:Object(De.jsxs)(Ce.a,{children:[Object(De.jsx)(nn.a,{classes:S,overline:(null===(t=b.user)||void 0===t?void 0:t.firstName)&&"Created by: ".concat(b.user.firstName," ").concat(b.user.lastName)}),Object(De.jsx)(Nt.a,{primary:"Start: ".concat(It()(b.startDate).format("YYYY-MM-DD"),", Due date: ").concat(It()(b.dueDate).format("YYYY-MM-DD"))}),Object(De.jsx)(Se.a,{variant:"h4",children:"Project type:"}),Object(De.jsx)(St.a,{children:Object(De.jsx)(Nt.a,{primary:null===p||void 0===p?void 0:p.name,secondary:null===p||void 0===p?void 0:p.description})}),Object(De.jsxs)(Se.a,{variant:"h4",children:["Number of items: ",b.nOfItems]}),Ga()(b.description),Object(De.jsxs)(ga.a,{className:C,children:["Budget: $",(null===(a=b.budget)||void 0===a?void 0:a.toLocaleString("en-US"))||0]}),f?Object(De.jsx)(et,{}):Object(De.jsx)(Qa.a,{children:v.map((function(e,t){return Object(De.jsxs)(Za.a,{children:[Object(De.jsx)(Ka.a,{expandIcon:Object(De.jsx)(lt.a,{}),"aria-controls":"panel".concat(t,"a-content"),id:"panel".concat(t,"a-header"),children:Object(De.jsxs)(St.a,{alignItems:"flex-start",children:[Object(De.jsx)(Nt.a,{primary:e.description,secondary:Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Se.a,{component:"span",variant:"body2",className:d.inline,color:"textPrimary",children:e.userRole})," \u2014 on ".concat(It()(e.createdAt).format("MMM DD, YYYY @ HH:mm"))]})}),(e.invoice||e.quote)&&Object(De.jsx)(ct.a,{edge:"end",size:"small",component:"a","aria-label":"Print invoice",rel:"noreferrer",href:"".concat(We,"/").concat(N(e)),target:"_blank",children:Object(De.jsx)(tn.a,{})})]})}),Boolean(e.content)&&Object(De.jsx)(Xa.a,{children:Ga()(e.content)})]},t)}))})]})}),Object(De.jsx)(en.a,{children:Object(De.jsx)(ga.a,{onClick:o,color:"primary",children:"Close"})})]})},dn=a(760),un=a(761),jn=a(967),bn=a(968),mn=function(){xe.dispatch({type:W,payload:Je.get("/quote")})},hn=function(e,t){xe.dispatch({type:M,payload:Je.patch("/quote/".concat(t),e)})},On=["project","user","updatedAt","createdAt","_id","__v"],pn=["amount","customer"],gn={projectId:"",billingCycle:"Monthly",taxes:[],discount:"0",isFixed:!1,expiryDate:It()().format("YYYY-MM-DD"),propasalText:"",customerNote:"",customer:""},xn={title:"",amount:""},fn=["Monthly","Yearly","OneTime"],vn=["Accepted","Declined"],yn=function(e){var t,a=e.action,c=void 0===a?"add":a,i=e.currentItem,o=void 0===i?null:i,l=va(),s=Object(n.useState)(gn),d=Object(tt.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(xn),m=Object(tt.a)(b,2),h=m[0],O=m[1],x=Object(n.useState)(kt.EditorState.createEmpty()),f=Object(tt.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(kt.EditorState.createEmpty()),S=Object(tt.a)(C,2),N=S[0],w=S[1],I=Object(r.b)((function(e){return e})),k=I.quoteAdd,E=k.loading,D=k.loaded,T=I.quoteEdit,A=T.loading,P=T.loaded,R=I.projectsGet.projects,L=I.userList.users,F=I.login.userInfo.user;Object(n.useEffect)((function(){gt("Client")}),[]),Object(n.useEffect)((function(){u.customer&&Ze({clientId:u.customer})}),[u.customer]),Object(n.useEffect)((function(){(D||P)&&(j(gn),y(kt.EditorState.createEmpty()),w(kt.EditorState.createEmpty()))}),[D,P]),Object(n.useEffect)((function(){if(o){var e=o.project,t=o.user,a=(o.updatedAt,o.createdAt,o._id,o.__v,Object(qe.a)(o,On)),n=e._id,c=t._id,i=It()(o.expiryDate).format("YYYY-MM-DD");j(Object(p.a)(Object(p.a)({},a),{},{projectId:n,expiryDate:i,customer:c}));var r=Object(fa.a)(a.propasalText),l=Object(fa.a)(a.customerNote);y(kt.EditorState.createWithContent(r)),w(kt.EditorState.createWithContent(l))}}),[o]);var U=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;j((function(e){var t=Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n));return"customer"===a&&(t.projectId=""),t}))},M=function(e){var t=e.target,a=t.name,n=t.value;O((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n))}))};return Object(De.jsx)(ye.a,{component:"main",className:l.root,children:Object(De.jsxs)("div",{className:l.paper,children:[Object(De.jsx)(Ne.a,{className:l.avatar,children:Object(De.jsx)(xa.a,{})}),Object(De.jsx)(Se.a,{component:"h1",variant:"h4",children:o?'Update "'.concat(o.project.name.toUpperCase(),'" proposal'):"Add a new proposal"}),(E||A)&&Object(De.jsx)(Xe,{}),(o&&"items"!==c||"add"===c&&"Client"!==F.role)&&Object(De.jsxs)("form",{className:l.form,onSubmit:function(e){e.preventDefault(),u.propasalText=At(v),u.customerNote=At(N);u.amount,u.customer;var t,a=Object(qe.a)(u,pn);"add"!==c&&o?hn(a,o._id):(t=a,xe.dispatch({type:_,payload:Je.post("/quote",t)}))},children:[Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[("add"===c||"edit"===c)&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"customer-or-comp",children:"Customer or company"}),Object(De.jsxs)(pa.a,{labelId:"customer-or-comp",value:u.customer,name:"customer",onChange:U,disabled:"Client"===F.role,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),L.map((function(e,t){return Object(De.jsxs)(ht.a,{value:e._id,children:[e.fullName,", ",e.companyName]},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"select-project",children:"Select project"}),Object(De.jsxs)(pa.a,{labelId:"select-project",value:u.projectId,name:"projectId",onChange:U,disabled:!Boolean(u.customer),children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),R.map((function(e,t){var a=e._id,n=e.name,c=e.user;return Object(De.jsx)(ht.a,{value:a,children:"".concat(n," ---\x3e ").concat(null===c||void 0===c?void 0:c.fullName)},t)}))]})]})})]}),("add"===c||"edit"===c)&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"billing-cycle",children:"Billing cycle"}),Object(De.jsxs)(pa.a,{labelId:"billing-cycle",value:u.billingCycle,name:"billingCycle",onChange:U,disabled:"change"===c,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),fn.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))]})]})}),("add"===c||"edit"===c)&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ua.a,{utils:da.a,children:Object(De.jsx)(ja.a,{label:"Expiry Date",inputVariant:"outlined",fullWidth:!0,value:u.expiryDate,InputAdornmentProps:{position:"start"},format:"yyyy-MM-dd",views:["year","month","date"],onChange:function(e){return j((function(t){return Object(p.a)(Object(p.a)({},t),{},{expiryDate:e})}))},minDate:new Date})})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:8,lg:8,children:u.isFixed?Object(De.jsx)(ba.a,{className:l.input,value:u.discount,onValueChange:function(e){var t=e.floatValue;return j(Object(p.a)(Object(p.a)({},u),{},{discount:t}))},prefix:"$",thousandSeparator:!0,customInput:ma.a,fullWidth:!0,variant:"outlined",label:"Discount(in USD)"}):Object(De.jsx)(ma.a,{name:"discount",variant:"outlined",type:"number",fullWidth:!0,label:"Discount(in %)",onChange:U,value:u.discount})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:4,lg:4,children:Object(De.jsx)(dn.a,{control:Object(De.jsx)(un.a,{checked:u.isFixed,onChange:function(e){var t=e.target.checked;return j(Object(p.a)(Object(p.a)({},u),{},{isFixed:t}))}}),label:"Is fixed?",labelPlacement:"top"})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:5,lg:5,children:Object(De.jsx)(ma.a,{name:"title",variant:"outlined",fullWidth:!0,label:"Tax title",size:"small",onChange:M,value:h.title})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:5,lg:5,children:Object(De.jsx)(ma.a,{name:"amount",variant:"outlined",type:"number",fullWidth:!0,label:"Tax(in %)",size:"small",onChange:M,value:h.amount,disabled:!Boolean(h.title)})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:2,lg:2,children:Object(De.jsx)(ga.a,{variant:"contained",color:"primary",disabled:!Boolean(h.amount),onClick:function(){return function(){var e=Object(bt.a)(u.taxes),t=e.findIndex((function(e){return e.title===h.title}));t<0?e.push(h):(e[t].title=h.title,e[t].amount=h.amount),j((function(t){return Object(p.a)(Object(p.a)({},t),{},{taxes:e})})),O(xn)}()},children:"Add"})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)("ul",{children:u.taxes.map((function(e,t){return Object(De.jsxs)("li",{children:[Object(De.jsxs)("strong",{children:[e.title,": "]}),"".concat(e.amount,"%"),Object(De.jsx)(ct.a,{size:"small",onClick:function(){return O(e)},children:Object(De.jsx)(jn.a,{})}),Object(De.jsx)(ct.a,{size:"small",onClick:function(){return function(e){var t=u.taxes.filter((function(t){return t.title!==e}));j((function(e){return Object(p.a)(Object(p.a)({},e),{},{taxes:t})}))}(e.title)},children:Object(De.jsx)(bn.a,{})})]},t)}))})}),Object(De.jsxs)(ve.a,{item:!0,xs:12,children:[Object(De.jsx)(Se.a,{variant:"h4",children:"Proposal text"}),Object(De.jsx)(Sa,{editorState:v,setEditorState:y})]}),Object(De.jsxs)(ve.a,{item:!0,xs:12,children:[Object(De.jsx)(Se.a,{variant:"h4",children:"Customer note"}),Object(De.jsx)(Sa,{editorState:N,setEditorState:w})]})]}),"change"===c&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"project-status",children:"Status"}),Object(De.jsxs)(pa.a,{labelId:"project-status",value:u.status,name:"status",onChange:U,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),vn.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))]})]})}),u.status&&"change"===c&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{className:l.input,variant:"outlined",fullWidth:!0,name:"comment",label:"Add comment",value:u.comment,onChange:U})}),"edit"===c&&(null===(t=o.items)||void 0===t?void 0:t.length)>0&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(dn.a,{control:Object(De.jsx)(un.a,{checked:"Draft"!==u.status,onChange:function(e){var t=e.target.checked;j(Object(p.a)(Object(p.a)({},u),{},{status:t?"Pending":"Draft"}))}}),disabled:"Draft"!==u.status&&"Pending"!==u.status,label:"Send proposal"})})]}),Object(De.jsx)(Kt.a,{children:"add"===c?Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:E,children:"Save"}):Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:A,children:"Update the proposal"})})]})]})})},Cn=function(e){var t=new Date,a=new Date(e);return t.getTime()>a.getTime()},Sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{content:function(e){var t,a;return Object(De.jsx)(St.a,{children:Object(De.jsx)(Nt.a,{primary:null===(t=e.project)||void 0===t?void 0:t.name,secondary:null===(a=e.project)||void 0===a?void 0:a.type})})},label:"Project"}].concat(Object(bt.a)(Ra(t)),[{path:"billingCycle",label:"Billing cycle"},{content:function(e){var t,a,n;return null!==(t=e.amounts)&&void 0!==t&&t.total?Object(De.jsxs)(Se.a,{children:["$ ",null===(a=e.amounts)||void 0===a||null===(n=a.total)||void 0===n?void 0:n.toLocaleString("en-US")]}):"-"},label:"Amount"},{content:function(e){return Object(De.jsx)(Se.a,{children:"Pending"===e.status&&Cn(e.expiryDate)?"Dead":e.status})},label:"Status"},{content:function(a){return Object(De.jsxs)(Ea.a,{variant:"outlined",size:"small",children:[Object(De.jsx)(Da.a,{title:"Manage items",children:Object(De.jsx)(ct.a,{"aria-label":"manage-items",color:"secondary",onClick:function(){return e(a,"items")},size:"small",children:"View"})}),"Client"!==t.role&&("Pending"===a.status||"Draft"===a.status||Cn(a.expiryDate))&&Object(De.jsx)(Da.a,{title:"Edit",children:Object(De.jsxs)(ct.a,{"aria-label":"Edit",color:"secondary",onClick:function(){return e(a,"edit")},children:[Object(De.jsx)(Aa.a,{}),"Edit"]})})]})},label:"Actions"}])},Nn=a(762),wn=a(115),In=a(969),kn=a(970),En=a(971),Dn=a(972),Tn=["project","user","updatedAt","createdAt","_id","__v"],An={name:"",quantity:"",price:"",total:""},Pn={subtotal:0,tax:0,discount:0,total:0},Rn=function(e){var t=new Date,a=new Date(e);return t.getTime()<a.getTime()},Ln=function(e){var t,a,c,i,o,r=e.open,l=e.setOpen,s=e.quote,d=e.loading,u=void 0!==d&&d,j=e.user,b=void 0===j?{}:j,m=Object(n.useState)(An),h=Object(tt.a)(m,2),O=h[0],x=h[1],f=Object(n.useState)(Pn),v=Object(tt.a)(f,2),y=v[0],C=v[1],S=Object(n.useState)([]),N=Object(tt.a)(S,2),w=N[0],I=N[1];Object(n.useEffect)((function(){s&&s.items&&(I((null===s||void 0===s?void 0:s.items)||[]),C((null===s||void 0===s?void 0:s.amounts)||{}))}),[s]);var k=function(e){var t=e.target,a=t.name,n=t.value;x((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n))}))},E=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.taxes,n=t.discount,c=t.isFixed,i=Number(e.reduce((function(e,t){return e+t.total}),0)),o=c?n:i*n/100,r=i-o,l=a.reduce((function(e,t){return e+t.amount}),0),s=r*l/100;return{subtotal:i.toFixed(2),tax:s.toFixed(2),discount:o.toFixed(2),total:(r+s).toFixed(2)}}(e,s);I(e),C(t),x(An),s.items=e,s.amounts=t},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draft",t=s.project,a=(s.user,s.updatedAt,s.createdAt,s._id),n=(s.__v,Object(qe.a)(s,Tn));n.projectId=t._id,n.status=e,hn(n,a)};return Object(De.jsxs)(Ha.a,{open:r,keepMounted:!0,onClose:l,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"quote-items-title","aria-describedby":"quote-items-description",children:[Object(De.jsx)($a.a,{id:"quote-items-title",children:"Manage proposal items"}),Object(De.jsx)(Ja.a,{children:Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsxs)(ve.a,{item:!0,xs:12,sm:12,md:7,lg:7,children:[Object(De.jsxs)(ve.a,{item:!0,xs:12,children:[Object(De.jsx)(Se.a,{variant:"h4",children:"Proposal text"}),Object(De.jsx)("hr",{}),Ga()(null===s||void 0===s?void 0:s.propasalText)]}),Object(De.jsxs)(ve.a,{item:!0,xs:12,children:[Object(De.jsx)(Se.a,{variant:"h4",children:"Customer note"}),Object(De.jsx)("hr",{}),Ga()(null===s||void 0===s?void 0:s.customerNote)]})]}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:5,lg:5,children:Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:4,lg:4,children:Object(De.jsx)(ma.a,{name:"name",variant:"outlined",fullWidth:!0,label:"Name",onChange:k,value:O.name,size:"small",disabled:"Client"===b.role||"Draft"!==(null===s||void 0===s?void 0:s.status)&&"Pending"!==(null===s||void 0===s?void 0:s.status)})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:3,lg:3,children:Object(De.jsx)(ma.a,{name:"price",variant:"outlined",fullWidth:!0,label:"Price",type:"number",onChange:k,value:O.price,size:"small",disabled:""===O.name})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:3,lg:3,children:Object(De.jsx)(ma.a,{name:"quantity",variant:"outlined",fullWidth:!0,label:"Quantity",type:"number",onChange:k,value:O.quantity,size:"small",disabled:O.price<=0})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:2,lg:2,children:Object(De.jsx)(ga.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=Object(bt.a)(w),t=e.findIndex((function(e){return e.name===O.name}));O.total=O.price*O.quantity,t<0?e.push(O):(e[t].price=O.price,e[t].quantity=O.quantity,e[t].total=O.total),E(e)}()},disabled:O.quantity<=0,children:"Add"})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(Nn.a,{component:wn.a,children:w.length>0?Object(De.jsxs)(Jt.a,{"aria-label":"item-table",size:"small",children:[Object(De.jsxs)(Qt.a,{children:[Object(De.jsxs)(Ht.a,{children:[Object(De.jsx)(Vt.a,{align:"center",colSpan:3,children:"Item details"}),Object(De.jsx)(Vt.a,{align:"right",children:"Item price"})]}),Object(De.jsxs)(Ht.a,{children:[Object(De.jsx)(Vt.a,{children:"Name"}),Object(De.jsx)(Vt.a,{align:"right",children:"Qty."}),Object(De.jsx)(Vt.a,{align:"right",children:"Price"}),Object(De.jsx)(Vt.a,{align:"right",children:"Total"})]})]}),Object(De.jsxs)(Zt.a,{children:[w.map((function(e,t){var a,n;return Object(De.jsxs)(Ht.a,{children:[Object(De.jsxs)(Vt.a,{children:[e.name,"Client"!==b.role&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(ct.a,{size:"small",onClick:function(){return x((function(t){return Object(p.a)(Object(p.a)({},t),e)}))},children:Object(De.jsx)(Aa.a,{})}),Object(De.jsx)(ct.a,{size:"small",onClick:function(){return function(e){var t=w.filter((function(t){return t.name!==e}));E(t)}(e.name)},children:Object(De.jsx)(In.a,{})})]})]}),Object(De.jsx)(Vt.a,{align:"right",children:e.quantity}),Object(De.jsxs)(Vt.a,{align:"right",children:["$",null===(a=e.price)||void 0===a?void 0:a.toLocaleString("en-US")]}),Object(De.jsxs)(Vt.a,{align:"right",children:["$",null===(n=e.total)||void 0===n?void 0:n.toLocaleString("en-US")]})]},t)})),Object(De.jsxs)(Ht.a,{children:[Object(De.jsx)(Vt.a,{rowSpan:4}),Object(De.jsx)(Vt.a,{colSpan:2,children:"Subtotal"}),Object(De.jsxs)(Vt.a,{align:"right",children:["$",null===(t=y.subtotal)||void 0===t?void 0:t.toLocaleString("en-US")]})]}),Object(De.jsxs)(Ht.a,{children:[Object(De.jsx)(Vt.a,{children:"Taxes"}),Object(De.jsx)(Vt.a,{align:"right",children:null===s||void 0===s||null===(a=s.taxes)||void 0===a?void 0:a.reduce((function(e,t){return e+"".concat(t.amount,"%, ")}),"")}),Object(De.jsxs)(Vt.a,{align:"right",children:["$",null===(c=y.tax)||void 0===c?void 0:c.toLocaleString("en-US")]})]}),Object(De.jsxs)(Ht.a,{children:[Object(De.jsx)(Vt.a,{children:"Discount"}),Object(De.jsx)(Vt.a,{align:"right",children:null!==s&&void 0!==s&&s.isFixed?"".concat(null===s||void 0===s?void 0:s.discount.toLocaleString("en-US")):"".concat(null===s||void 0===s?void 0:s.discount,"%")}),Object(De.jsxs)(Vt.a,{align:"right",children:["$",null===(i=y.discount)||void 0===i?void 0:i.toLocaleString("en-US")]})]}),Object(De.jsxs)(Ht.a,{children:[Object(De.jsx)(Vt.a,{colSpan:2,children:"Total"}),Object(De.jsxs)(Vt.a,{align:"right",children:["$",null===(o=y.total)||void 0===o?void 0:o.toLocaleString("en-US")]})]})]})]}):Object(De.jsx)(oa,{message:"Not items added yet"})})}),"Client"===b.role&&Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"comment",label:"Add comment",value:null===s||void 0===s?void 0:s.comment,disabled:"Pending"!==(null===s||void 0===s?void 0:s.status),onChange:function(e){var t=e.target.value;s.comment=t}})})]})})]})}),Object(De.jsxs)(en.a,{children:[Object(De.jsx)(ga.a,{color:"default",variant:"contained",component:"a","aria-label":"Print invoice",rel:"noreferrer",href:"".concat(We,"/").concat(null===s||void 0===s?void 0:s._id,"?downloadType=proposal"),target:"_blank",children:"Download PDF"}),("Pending"===(null===s||void 0===s?void 0:s.status)||"Draft"===(null===s||void 0===s?void 0:s.status)||Rn(null===s||void 0===s?void 0:s.expiryDate))&&Object(De.jsx)(Ea.a,{variant:"outlined",color:"primary",children:"Client"!==b.role?Object(De.jsxs)(ga.a,{color:"primary",variant:"contained",onClick:function(){return D()},disabled:u,children:[Object(De.jsx)(kn.a,{}),u?"Saving,...":"Save"]}):"Pending"===(null===s||void 0===s?void 0:s.status)&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)(ga.a,{"aria-label":"Change status",color:"primary",disabled:u,onClick:function(){return D("Accepted")},children:[Object(De.jsx)(En.a,{}),u?"Saving,...":"Accept"]}),Object(De.jsxs)(ga.a,{"aria-label":"Change status",color:"secondary",disabled:u,onClick:function(){return D("Declined")},children:[Object(De.jsx)(Dn.a,{}),u?"Saving,...":"Decline"]})]})}),Object(De.jsxs)(ga.a,{color:"default",variant:"contained",onClick:function(){return l()},children:[Object(De.jsx)(bn.a,{}),"Cancel"]})]})]})},Fn=["quoteId"],Un=function(){xe.dispatch({type:B,payload:Je.get("/invoice")})},_n={amount:"",status:"pending"},Mn=["pending","paid"],Wn=function(e){var t=e.action,a=void 0===t?"add":t,c=e.currentItem,i=void 0===c?null:c,o=va(),l=Object(n.useState)(_n),s=Object(tt.a)(l,2),d=s[0],u=s[1],j=Object(r.b)((function(e){return e})).invoiceEdit,b=j.loading,m=j.loaded;Object(n.useEffect)((function(){m&&u(_n)}),[m]),Object(n.useEffect)((function(){if(i){var e=i.status,t=i.amount;u({amount:t,status:e})}}),[i]);var h=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;u(Object(p.a)(Object(p.a)({},d),{},Object(g.a)({},a,n)))};return Object(De.jsx)(ye.a,{component:"main",className:o.root,children:Object(De.jsxs)("div",{className:o.paper,children:[Object(De.jsx)(Ne.a,{className:o.avatar,children:Object(De.jsx)(xa.a,{})}),Object(De.jsx)(Se.a,{component:"h1",variant:"h4",children:"Invoice"}),b&&Object(De.jsx)(Xe,{}),i?Object(De.jsxs)("form",{className:o.form,onSubmit:function(e){e.preventDefault(),"add"!==a&&i&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(e.quoteId,Object(qe.a)(e,Fn));xe.dispatch({type:z,payload:Je.patch("/invoice/".concat(t),a)})}(d,i._id)},children:[Object(De.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{className:o.input,name:"amount",variant:"outlined",fullWidth:!0,label:"Invoice amount",onChange:h,value:d.amount,autoFocus:!0})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"invoice-status",children:"Status"}),Object(De.jsxs)(pa.a,{labelId:"invoice-status",value:d.status,name:"status",onChange:h,disabled:"change"!==a,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),Mn.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))]})]})})]}),Object(De.jsx)(Kt.a,{children:"add"===a?Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,children:"Save"}):Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,disabled:b,children:"Change invoice status"})})]}):Object(De.jsx)(Se.a,{variant:"caption",children:"You can change a status of an invoice"})]})})},Bn=a(764),zn=a(765),Yn=a(766),qn=a(767),Gn=a(507),Vn=a.n(Gn),Hn=Object(dt.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#8967fc",height:100,width:100},input:{fontSize:16},form:{width:"100%",marginTop:e.spacing(2),color:"black",fontSize:16},submit:{margin:e.spacing(3,0,2),backgroundColor:"#8967fc",borderRadius:5,float:"left",maxWidth:"100%",color:"white",fontSize:16},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},completed:{display:"inline-block"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},root:{},content:{display:"flex",alignItems:"center",flexDirection:"column",textAlgin:"center"},name:{marginTop:e.spacing(1)},removeBotton:{width:"100%"}}})),$n=a(232),Jn=a.n($n),Qn=["Client","Manager"],Zn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange;return Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{name:"firstName",variant:"outlined",fullWidth:!0,id:"firstName",label:"First Name",onChange:n,value:a.firstName,autoFocus:!0})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{name:"lastName",variant:"outlined",fullWidth:!0,id:"lastName",label:"Last Name",onChange:n,value:a.lastName})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"companyName",label:"Company Name",autoComplete:"Company Name",value:a.companyName,onChange:n})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"companyUrl",label:"Company URL",value:a.companyUrl,onChange:n})})]})},Kn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange,c=e.onPhoneChange;return Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:a.email,onChange:n})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(Jn.a,{variant:"outlined",fullWidth:!0,autoComplete:"phone number",label:"Phone Number",defaultCountry:"rw",countryCodeEditable:!1,value:a.phoneNumber,onChange:c})})]})},Xn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange;return Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsx)(ve.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"country",autoComplete:"country",value:a.country,disabled:!0,onChange:n})}),Object(De.jsx)(ve.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,label:"City",name:"city",autoComplete:"city",value:a.city,onChange:n})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,label:"State",name:"state",autoComplete:"state",value:a.state,onChange:n})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,label:"Postal code",name:"postalCode",value:a.postalCode,onChange:n})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"address",label:"Your Address",type:"address",id:"address",autoComplete:"address",value:a.address,onChange:n})})]})},ec=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange;return Object(De.jsx)(ve.a,{container:!0,spacing:1,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"user-role",children:"Role"}),Object(De.jsxs)(pa.a,{labelId:"user-role",value:a.role,name:"role",onChange:n,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),Qn.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))]})]})})},tc={firstName:"",lastName:"",companyName:"",companyUrl:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",postalCode:"",role:"client"},ac=["User information","Contact","Location","Permission"],nc=function(e){var t=e.action,a=void 0===t?"add":t,c=e.currentItem,i=void 0===c?null:c,o=Hn(),l=Object(n.useState)(tc),s=Object(tt.a)(l,2),d=s[0],u=s[1],j=Object(n.useState)(0),b=Object(tt.a)(j,2),m=b[0],h=b[1],O=Object(n.useState)(new Set([0])),x=Object(tt.a)(O,2),f=x[0],v=x[1],y=Object(r.b)((function(e){return e})),S=y.register,w=S.loading,I=S.loaded,k=y.userEdit,E=k.loading,D=k.loaded;Object(n.useEffect)((function(){(I||D)&&(gt(),u(tc),h(0),v(new Set([0])))}),[I,D]),Object(n.useEffect)((function(){i&&"edit"===a&&(u(i),h(0),v(new Set([0])))}),[i,a]);var T,A=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;u(Object(p.a)(Object(p.a)({},d),{},Object(g.a)({},a,n)))},P=function(e){e.preventDefault(),"add"===a&&function(e){xe.dispatch({type:C,payload:Je.post("/user/register",e)})}(d),"edit"===a&&function(e){var t=e._id,a=Object(qe.a)(e,pt);xe.dispatch({type:N,payload:Je.patch("/auth/users/".concat(t),a)})}(d)},R=function(e,t){u(Object(p.a)(Object(p.a)({},d),{},{phoneNumber:e,country:t.name}))},L=function(){return ac.length},F=function(){return f.size===L()},U=function(e){return f.has(e)};return Object(De.jsxs)(fe.a,{component:"main",children:[Object(De.jsx)(Bn.a,{}),Object(De.jsxs)("div",{className:o.paper,children:[Object(De.jsx)(Ne.a,{className:o.avatar,children:Object(De.jsx)(Vn.a,{})}),Object(De.jsx)(Se.a,{component:"h1",variant:"h4",children:i?"Update ".concat(i.firstName):"REGISTER USER"}),Object(De.jsx)(zn.a,{alternativeLabel:!0,nonLinear:!0,activeStep:m,children:ac.map((function(e,t){return Object(De.jsx)(Yn.a,{children:Object(De.jsx)(qn.a,{onClick:(a=t,function(){h(a),v((function(e){var t=new Set(e);return t.add(a),t}))}),completed:U(t),children:e})},t);var a}))}),w&&Object(De.jsx)(et,{}),Object(De.jsx)("form",{className:o.form,children:Object(De.jsxs)("div",{children:[Object(De.jsx)(ve.a,{className:o.instructions,children:(T=m,[{label:"Step 1: Fill customer information",component:Object(De.jsx)(Zn,{userInfo:d,onHandleChange:A})},{label:"Step 2: Customer contacts",component:Object(De.jsx)(Kn,{userInfo:d,onHandleChange:A,onPhoneChange:R})},{label:"Step 3: Location",component:Object(De.jsx)(Xn,{userInfo:d,onHandleChange:A})},{label:"Step 4: Customer role",component:Object(De.jsx)(ec,{userInfo:d,onHandleChange:A})}][T]).component}),Object(De.jsxs)("div",{children:[Object(De.jsx)(ga.a,{disabled:0===m,onClick:function(){h((function(e){return e-1}))},className:o.button,children:"Back"}),Object(De.jsx)(ga.a,{variant:"contained",color:"primary",onClick:function(){var e=m!==L()-1||F()?m+1:ac.findIndex((function(e,t){return!f.has(t)}));h(e)},className:o.button,children:"Next"}),"add"===a&&Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,disabled:w,onClick:P,children:"Save"}),"edit"===a&&Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,disabled:E,onClick:P,children:i?"Update ".concat(i.firstName):"Update"})]})]})})]})]})},cc=Object(n.forwardRef)((function(e,t){return Object(De.jsx)(Va.a,Object(p.a)({direction:"up",ref:t},e))})),ic=function(e){var t=e.open,a=void 0!==t&&t,c=e.setOpen,i=e.currentItem,o=void 0===i?null:i,r=Hn(),l=Object(n.useState)({}),s=Object(tt.a)(l,2),d=s[0],u=s[1];return Object(n.useEffect)((function(){o&&u(o)}),[o]),Object(De.jsxs)(Ha.a,{open:a,TransitionComponent:cc,keepMounted:!0,onClose:c,"aria-labelledby":"customer-name","aria-describedby":"customer-description",maxWidth:"lg",children:[Object(De.jsx)($a.a,{id:"customer-name",children:"Customer names: ".concat(d.firstName)}),Object(De.jsxs)(Ja.a,{children:[Object(De.jsx)(Ne.a,{className:r.avatar,src:d.avatar}),Object(De.jsxs)(Se.a,{className:r.name,gutterBottom:!0,variant:"h3",children:[d.firstName," ",d.lastName,"(",d.role,")"]}),Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsxs)(ve.a,{item:!0,xs:12,sm:6,md:8,lg:8,children:[Object(De.jsxs)(Se.a,{color:"textSecondary",variant:"body1",children:[d.city,", ",d.state,", ",d.country]}),Object(De.jsx)(Se.a,{color:"textSecondary",variant:"body1",children:d.phoneNumber}),Object(De.jsx)(Se.a,{color:"textSecondary",variant:"body1",children:d.email}),Object(De.jsxs)(Se.a,{color:"textSecondary",variant:"body2",children:["Postal code: ",d.postalCode]})]}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:6,md:4,lg:4,children:Object(De.jsxs)(Se.a,{color:"textSecondary",variant:"body1",children:["Company: ",d.companyName,Object(De.jsx)("br",{}),"Company URL:",d.companyUrl,Object(De.jsx)("br",{})]})})]})]}),Object(De.jsx)(en.a,{children:Object(De.jsx)(ga.a,{onClick:c,color:"primary",children:"Close"})})]})},oc=a(768),rc=function(e){var t=e.open,a=e.setOpen,n=e.onConfirmYes,c=e.loading,i=void 0!==c&&c,o=e.message,r=void 0===o?"":o;return Object(De.jsxs)(Ha.a,{"aria-labelledby":"dialog-title",onClose:a,open:t,children:[Object(De.jsx)($a.a,{id:"dialog-title",children:"Confirm action"}),Object(De.jsx)(Ja.a,{children:Object(De.jsx)(oc.a,{children:r})}),Object(De.jsxs)(en.a,{children:[Object(De.jsx)(ga.a,{color:"primary",onClick:a,children:"Cancel"}),Object(De.jsx)(ga.a,{color:"primary",disabled:i,onClick:n,children:i?"Loading,...":"Yes"})]})]})},lc=a(311),sc=a(769),dc=Object(lc.a)((function(e){return{root:{},details:{display:"flex"},avatar:{marginLeft:"auto",height:110,width:100,flexShrink:0,flexGrow:0},progress:{marginTop:e.spacing(2)},uploadButton:{marginRight:e.spacing(2)}}})),uc=function(e){var t=e.user,a=dc();return Object(De.jsxs)(ye.a,{className:a.root,children:[Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)("div",{className:a.details,children:[Object(De.jsxs)("div",{children:[Object(De.jsxs)(Se.a,{gutterBottom:!0,variant:"h2",children:[t.firstName," ",t.lastName]}),Object(De.jsxs)(Se.a,{className:a.locationText,color:"textSecondary",variant:"body1",children:[t.city,", ",t.country]}),Object(De.jsxs)(Se.a,{className:a.dateText,color:"textSecondary",variant:"body1",children:[It()().format("hh:mm A")," (",Intl.DateTimeFormat().resolvedOptions().timeZone,")"]})]}),Object(De.jsx)(Ne.a,{className:a.avatar,src:t.avatar})]}),Object(De.jsxs)("div",{className:a.progress,children:[Object(De.jsx)(Se.a,{variant:"body1",children:"My profile"}),Object(De.jsx)(sc.a,{value:100,variant:"determinate"})]})]}),Object(De.jsx)(Ot.a,{}),Object(De.jsxs)(Kt.a,{children:[Object(De.jsx)(ga.a,{className:a.uploadButton,color:"primary",variant:"text",children:"Upload picture"}),Object(De.jsx)(ga.a,{variant:"text",children:"Remove picture"})]})]})},jc=function(e){var t=e.open,a=e.setOpen,n=e.userInfo,c=e.onChange,i=e.onConfirm;return Object(De.jsxs)(Ha.a,{open:t,maxWidth:"md",onClose:a,"aria-labelledby":"confirm-dialog",children:[Object(De.jsx)($a.a,{id:"confirm-dialog",children:"Confirm update"}),Object(De.jsxs)(Ja.a,{children:[Object(De.jsx)(oc.a,{children:"To update your information to this website, please enter your password address here."}),Object(De.jsx)(Se.a,{color:"error",children:"AFTER UPDATING YOUR INFORMATION THE SYSTEM WILL LOG YOU OUT"}),Object(De.jsx)(ma.a,{autoFocus:!0,margin:"dense",name:"password",value:n.password,label:"Enter your password",type:"password",fullWidth:!0,onChange:c})]}),Object(De.jsxs)(en.a,{children:[Object(De.jsx)(ga.a,{onClick:a,color:"primary",children:"Cancel"}),Object(De.jsx)(ga.a,{onClick:i,color:"primary",children:"Confirm update"})]})]})},bc=Object(lc.a)((function(){return{root:{}}})),mc={firstName:"",lastName:"",companyName:"",companyUrl:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",password:"",postalCode:"",role:"client"},hc=function(e){var t=e.user,a=e.loading,c=void 0!==a&&a,i=Object(n.useState)(mc),o=Object(tt.a)(i,2),r=o[0],l=o[1],s=Object(n.useState)(!1),d=Object(tt.a)(s,2),u=d[0],j=d[1],b=bc();Object(n.useEffect)((function(){t.role&&l(t)}),[t]);var m=function(e){var t=e.target,a=t.name,n=t.value;l(Object(p.a)(Object(p.a)({},r),{},Object(g.a)({},a,n)))};return Object(De.jsx)(ye.a,{className:b.root,children:Object(De.jsxs)("form",{autoComplete:"off",noValidate:!0,children:[Object(De.jsx)(jc,{open:u,setOpen:function(){return j(!1)},userInfo:r,onChange:m,onConfirm:function(){xt(r),j(!1)}}),Object(De.jsx)($t.a,{subheader:"The information can be edited",title:"Profile"}),Object(De.jsx)(Ot.a,{}),Object(De.jsx)(Ce.a,{children:Object(De.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(De.jsx)(ve.a,{item:!0,md:6,xs:12,children:Object(De.jsx)(ma.a,{fullWidth:!0,helperText:"Please specify the first name",label:"First name",margin:"dense",name:"firstName",onChange:m,required:!0,value:r.firstName,variant:"outlined"})}),Object(De.jsx)(ve.a,{item:!0,md:6,xs:12,children:Object(De.jsx)(ma.a,{fullWidth:!0,label:"Last name",margin:"dense",name:"lastName",onChange:m,required:!0,value:r.lastName,variant:"outlined"})}),Object(De.jsx)(ve.a,{item:!0,md:6,xs:12,children:Object(De.jsx)(ma.a,{fullWidth:!0,label:"Company name",margin:"dense",name:"companyName",onChange:m,required:!0,value:r.companyName,variant:"outlined"})}),Object(De.jsx)(ve.a,{item:!0,md:6,xs:12,children:Object(De.jsx)(ma.a,{fullWidth:!0,label:"Company URL",margin:"dense",name:"companyUrl",onChange:m,required:!0,value:r.companyUrl,variant:"outlined"})}),Object(De.jsx)(ve.a,{item:!0,md:6,xs:12,children:Object(De.jsx)(ma.a,{fullWidth:!0,label:"Email Address",margin:"dense",name:"email",onChange:m,disabled:!0,value:r.email,variant:"outlined"})}),Object(De.jsx)(ve.a,{item:!0,md:6,xs:12,children:Object(De.jsx)(Jn.a,{variant:"outlined",fullWidth:!0,autoComplete:"phone number",label:"Phone Number",defaultCountry:"rw",margin:"dense",countryCodeEditable:!1,value:r.phoneNumber,onChange:function(e,t){l(Object(p.a)(Object(p.a)({},r),{},{phoneNumber:e,country:t.name}))}})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"address",label:"Your Address",margin:"dense",autoComplete:"address",value:r.address,onChange:m})}),Object(De.jsx)(ve.a,{item:!0,md:3,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,label:"City",name:"city",margin:"dense",autoComplete:"city",value:r.city,onChange:m})}),Object(De.jsx)(ve.a,{item:!0,md:3,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,label:"State",name:"state",margin:"dense",autoComplete:"state",value:r.state,onChange:m})}),Object(De.jsx)(ve.a,{item:!0,md:3,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,label:"Postal code",name:"postalCode",margin:"dense",value:r.postalCode,onChange:m})}),Object(De.jsx)(ve.a,{item:!0,md:3,xs:12,children:Object(De.jsx)(ma.a,{variant:"outlined",fullWidth:!0,name:"country",margin:"dense",autoComplete:"country",value:r.country,disabled:!0,onChange:m,onClick:function(){return xt(r)}})})]})}),Object(De.jsx)(Ot.a,{}),Object(De.jsx)(Kt.a,{children:Object(De.jsx)(ga.a,{color:"primary",variant:"contained",disabled:c,onClick:function(){return xt(r)},children:c?"Updating":"Save information"})})]})})},Oc=Object(lc.a)((function(e){return{root:{padding:e.spacing(4)}}})),pc=a(770),gc=function(e){var t=e.open,a=e.setOpen,n=e.userInfo,c=e.onChange,i=e.onConfirm,o=e.loading,r=void 0!==o&&o;return Object(De.jsxs)(Ha.a,{open:t,maxWidth:"md",onClose:a,"aria-labelledby":"confirm-dialog",children:[Object(De.jsx)($a.a,{id:"confirm-dialog",children:"Email Dialog"}),Object(De.jsxs)(Ja.a,{children:[Object(De.jsx)(oc.a,{children:"To reset your password, please enter your email address here."}),Object(De.jsx)(Se.a,{color:"secondary",children:"WE WILL SEND YOU A LINK TO HELP YOU RESET YOUR PASSWORD"}),Object(De.jsx)(ma.a,{autoFocus:!0,margin:"dense",name:"email",value:n.email,label:"Enter your email",type:"email",fullWidth:!0,onChange:c})]}),Object(De.jsxs)(en.a,{children:[Object(De.jsx)(ga.a,{onClick:a,color:"primary",children:"Cancel"}),Object(De.jsx)(ga.a,{onClick:i,color:"primary",disabled:r,children:r?"Loading,...":"Send the link"})]})]})},xc={email:"",password:""},fc={name:"",customer:"",project:"",price:"",status:"",sku:"",bgColor:"#FAFAFA",description:"",website:"",image:""},vc=["QA","COMPLETED"],yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cameraOrbit",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t[e],n=null===a||void 0===a?void 0:a.default;if(null===a||void 0===a||!a.useDefault){n="";var c=null===a||void 0===a?void 0:a.custom;n+="".concat(null===c||void 0===c?void 0:c.side,"deg"),n+=" ".concat(null===c||void 0===c?void 0:c.ud,"deg"),n+=" ".concat(null===c||void 0===c?void 0:c.side,"%")}return n},Cc=function(e){var t=e.skyboxImage,a=e.environmentImage,n={};return e.disableZoom&&(n["disable-zoom"]="true"),e.autoRotate&&(n["auto-rotate"]="true"),null!==t&&void 0!==t&&t.active&&null!==t&&void 0!==t&&t.image&&(n["skybox-image"]=ze+(null===t||void 0===t?void 0:t.image)),null!==a&&void 0!==a&&a.active&&null!==a&&void 0!==a&&a.image&&(n["environment-image"]=ze+(null===a||void 0===a?void 0:a.image)),n},Sc=["_id","__v"],Nc="/products",wc=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image3d",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new FormData,c=0,i=Object.keys(e);c<i.length;c++){var o=i[c];n.append("productFiles",e[o])}var r=a.productId,l=a.imgType,s={headers:{"Content-Type":"multipart/form-data"}},d="".concat(Nc,"/upload/").concat(t),u=H;r&&l&&(d+="?productId=".concat(r,"&imgType=").concat(l)),"attr-image"===t&&(u=ee),xe.dispatch({type:u,payload:Je.post(d,n,s)})},Ic=function(e){var t=e.projectId,a="?";t&&(a+="project=".concat(t)),xe.dispatch({type:J,payload:Je.get(Nc+a)})},kc=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},c=a?"?analyticType=visit":"",i=(null===(t=document.location)||void 0===t?void 0:t.ancestorOrigins)||[];i.length>0&&(n.headers={"ancestor-origin":i[0]}),xe.dispatch({type:X,payload:Je.get("".concat(Nc,"/").concat(e+c),n)})},Ec={side:50,ud:50,io:50},Dc={disableZoom:!1,autoRotate:!0,autoRotateDelay:3e3,backgroundColor:"#ffffff",cameraOrbit:{default:"0deg 75deg 105%",custom:Ec,useDefault:!0},minCameraOrbit:{default:"Infinity 22.5deg auto",custom:Ec,useDefault:!0},maxCameraOrbit:{default:"Infinity 157.5deg auto",custom:Ec,useDefault:!0},cameraTarget:{default:"auto auto auto",custom:"",useDefault:!0},fieldOfView:10,exposure:1,shadowIntensity:0,shadowSoftness:0,alt:"",scale:"auto",placement:"floor",metalness:0,roughness:0,arButtonImage:"",skyboxImage:{active:!1,image:""},environmentImage:{active:!1,image:""},imageFiles:[],hotspots:[]},Tc=["src"],Ac=function(e){var t,a,c,i=e.match,o=e.styles,l=void 0===o?{width:"100%",height:"100vh"}:o,s=e.addVisit,d=void 0===s||s,u=Object(n.useState)(Dc),j=Object(tt.a)(u,2),b=j[0],m=j[1],h=Object(r.b)((function(e){return e})),O=i.params.productId,g=h.productGet,x=g.product,f=g.loaded,v=g.loading,y=h.analyticAdd.loading;return Object(n.useEffect)((function(){O&&kc(O,d)}),[O,d]),Object(n.useEffect)((function(){if(f){var e=x.image,t=(e.src,Object(qe.a)(e,Tc));m(t)}}),[f,x]),Object(n.useEffect)((function(){var e=document.querySelector("model-viewer#image3d-viewer");f&&e&&e.addEventListener("load",(function(t){var a=e.model.materials[0];a.pbrMetallicRoughness.setMetallicFactor(b.metalness),a.pbrMetallicRoughness.setRoughnessFactor(b.roughness)}))}),[f,b.metalness,b.roughness]),v?Object(De.jsx)(et,{}):Boolean(x.imagesSrc)?Object(De.jsxs)("model-viewer",Object(p.a)(Object(p.a)({id:"image3d-viewer",src:"".concat(Be,"/").concat(null===(t=x.imagesSrc)||void 0===t?void 0:t.glb),"ios-src":"".concat(Be,"/").concat(null===(a=x.imagesSrc)||void 0===a?void 0:a.usdz),style:Object(p.a)(Object(p.a)({},l),{},{border:"none",backgroundColor:b.backgroundColor}),"auto-rotate-delay":b.autoRotateDelay,"background-color":b.backgroundColor,"camera-orbit":yc("cameraOrbit",b),"min-camera-orbit":yc("minCameraOrbit",b),"max-camera-orbit":yc("maxCameraOrbit",b),"camera-target":yc("cameraTarget",b),"field-of-view":b.fieldOfView,exposure:b.exposure,"shadow-intensity":b.shadowIntensity,"shadow-softness":b.shadowSoftness,alt:b.alt,"ar-scale":b.scale,"ar-placement":b.placement,ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0,autoplay:!0,"quick-look-browsers":"safari chrome firefox",loading:"eager"},Cc(b)),{},{children:[Boolean(b.arButtonImage)&&Object(De.jsx)("input",{type:"image",src:ze+b.arButtonImage,id:"ar-button",className:"ar-button",slot:"ar-button",alt:b.alt,disabled:y,onClick:function(){return function(e){var t="?analyticType=".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"visit");xe.dispatch({type:oe,payload:Je.post("".concat(Nc,"/").concat(e,"/analytics").concat(t))})}(x._id,"click")}}),null===(c=b.hotspots)||void 0===c?void 0:c.map((function(e,t){return Object(De.jsx)("button",{slot:"hotspot-".concat(t),className:"hotspot",style:{backgroundColor:e.bgColor},"data-position":e.dataPosition,"data-normal":e.dataNormal,children:Object(De.jsx)("div",{className:"annotation",children:e.dataText})},t)}))]})):null},Pc=function(e){var t=e.productId,a=e.open,n=e.setOpen,c={params:{productId:t}};return Object(De.jsxs)(Ha.a,{open:a,keepMounted:!0,onClose:n,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"view-product","aria-describedby":"project-description",children:[Object(De.jsx)($a.a,{id:"view-product",children:"Asset View"}),Object(De.jsx)(Ja.a,{children:Object(De.jsx)(ve.a,{container:!0,children:Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:12,lg:12,children:Object(De.jsx)(Ac,{match:c,styles:{width:"100%",height:"70vh"},addVisit:!1})})})}),Object(De.jsx)(en.a,{children:Object(De.jsx)(ga.a,{color:"secondary",onClick:function(){return n()},children:"Cancel"})})]})},Rc=["button"],Lc={title:"",description:""},Fc=a(235),Uc=["createdAt","updatedAt","image","project","customer"],_c=function(e){var t=e.action,a=void 0===t?"add":t,c=e.currentItem,i=void 0===c?null:c,o=e.setAction,l=va(),s=Object(n.useState)(fc),d=Object(tt.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(!1),m=Object(tt.a)(b,2),h=m[0],O=m[1],x=Object(r.b)((function(e){return e})),f=x.fileUpload,v=f.loaded,y=f.loading,C=f.filePath,S=x.productAdd,N=S.loading,w=S.loaded,I=x.productEdit,k=I.loading,E=I.loaded,D=x.userList.users,T=x.projectsGet.projects,A=x.login.userInfo.user;Object(n.useEffect)((function(){gt("Client")}),[]),Object(n.useEffect)((function(){u.customer&&Ze({clientId:u.customer})}),[u.customer]);var P=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;j((function(e){var t=Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n));return"customer"===a&&(t.project=""),t}))};Object(n.useEffect)((function(){v&&C&&(j(Object(p.a)(Object(p.a)({},u),{},{image:C})),O(!1),Oe("Images uploaded"))}),[v,C]),Object(n.useEffect)((function(){(w||E)&&(o("add"),j(fc),Ic({}))}),[w,E]),Object(n.useEffect)((function(){if(i&&"edit"===a){i.createdAt,i.updatedAt,i.image;var e=i.project,t=i.customer,n=Object(qe.a)(i,Uc);j(Object(p.a)(Object(p.a)({},n),{},{project:null===e||void 0===e?void 0:e._id,customer:null===t||void 0===t?void 0:t._id}))}}),[a,i]);return Object(De.jsx)(ye.a,{component:"main",className:l.root,children:Object(De.jsxs)("div",{className:l.paper,children:[Object(De.jsx)(Ne.a,{className:l.avatar,children:Object(De.jsx)(xa.a,{})}),Object(De.jsx)(Se.a,{component:"h1",variant:"h4",children:"add"===a&&"Client"===A.role?"3D Assets":"edit"===a?"Update ".concat(null===i||void 0===i?void 0:i.name.toUpperCase()):"Add a new 3D asset"}),("add"===a&&"Client"!==A.role||"edit"===a)&&Object(De.jsxs)("form",{className:l.form,onSubmit:function(e){e.preventDefault();var t,n=D.find((function(e){return e._id===u.customer}));u.website=null===n||void 0===n?void 0:n.companyUrl,"add"===a&&(t=u,xe.dispatch({type:$,payload:Je.post(Nc,t)})),"edit"===a&&(delete u.itemNumber,function(e){var t=e._id,a=(e.__v,Object(qe.a)(e,Sc));xe.dispatch({type:Z,payload:Je.patch("".concat(Nc,"/").concat(t),a)})}(u))},children:[Object(De.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{className:l.input,name:"name",variant:"outlined",fullWidth:!0,label:"3D Asset name",onChange:P,value:u.name})}),"Client"!==A.role&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"customer-or-comp",children:"Customer or company"}),Object(De.jsxs)(pa.a,{labelId:"customer-or-comp",value:u.customer,name:"customer",onChange:P,disabled:"Client"===A.role,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),D.map((function(e,t){return Object(De.jsxs)(ht.a,{value:e._id,children:[e.fullName,", ",e.companyName]},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"select-project",children:"Select project"}),Object(De.jsxs)(pa.a,{labelId:"select-project",value:u.project,name:"project",onChange:P,disabled:!Boolean(u.customer)||"Client"===A.role,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),T.map((function(e,t){return Object(De.jsx)(ht.a,{value:e._id,children:e.name},t)}))]})]})})]}),Object(De.jsx)(ve.a,{item:!0,lg:6,md:6,sm:6,xs:12,children:Object(De.jsx)(ma.a,{className:l.input,name:"sku",variant:"outlined",fullWidth:!0,label:"SKU",onChange:P,value:u.sku})}),Object(De.jsx)(ve.a,{item:!0,lg:6,md:6,sm:6,xs:12,children:Object(De.jsx)(ba.a,{className:l.input,value:u.price,onValueChange:function(e){var t=e.floatValue;return j(Object(p.a)(Object(p.a)({},u),{},{price:t}))},prefix:"$",thousandSeparator:!0,customInput:ma.a,fullWidth:!0,variant:"outlined",label:"Price(in USD)"})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"product-status",children:"Status"}),Object(De.jsxs)(pa.a,{labelId:"product-status",value:u.status,name:"status",onChange:P,children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),vc.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(ma.a,{className:l.input,variant:"outlined",fullWidth:!0,name:"description",label:"Description",rows:3,rowsMax:4,value:u.description,onChange:P})}),"add"===a&&"Client"!==A.role&&Object(De.jsxs)(ve.a,{item:!0,xs:12,children:[Object(De.jsx)(ga.a,{onClick:function(){return O(!0)},children:"Add the 3D asset files"}),Object(De.jsx)(Fc.a,{open:h,onSave:function(e){2===e.length?wc(e):he("Sorry only two files are needed")},acceptedFiles:[".gltf",".glb",".usdz"],showPreviews:!0,maxFileSize:5e7,filesLimit:2,onClose:function(){return O(!1)},clearOnUnmount:v,submitButtonText:y?"Uploading files, please wait,...":"Save files"})]})]}),Object(De.jsxs)(Kt.a,{children:["add"===a&&"Client"!==A.role&&Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:N,children:"Save"}),"edit"===a&&Object(De.jsx)(ga.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:k,children:"Update the asset"})]})]})]})})},Mc=a(973),Wc=function(e,t){return[{content:function(t){return Object(De.jsx)(ga.a,{onClick:function(){return e(t,"preview")},children:t.name})},label:"Asset name"},{content:function(e){return Object(De.jsxs)(Se.a,{children:[e.customer.fullName,", ",e.customer.companyName]})},label:"Customer"},{content:function(e){var t;return Object(De.jsx)(Se.a,{children:null===(t=e.project)||void 0===t?void 0:t.name})},label:"Project"},{path:"sku",label:"SKU"},{content:function(e){var t;return Object(De.jsx)(Se.a,{children:e.price?"$ ".concat(null===(t=e.price)||void 0===t?void 0:t.toLocaleString("en-US")):""})},label:"Price"},{path:"status",label:"Status"},{content:function(t){return Object(De.jsxs)(Ea.a,{variant:"outlined",size:"small",children:[Object(De.jsx)(Da.a,{title:"View",children:Object(De.jsxs)(ct.a,{"aria-label":"View",color:"secondary",onClick:function(){return e(t,"preview")},children:[Object(De.jsx)(Ta.a,{})," View"]})}),Object(De.jsx)(Da.a,{title:"Edit",children:Object(De.jsxs)(ct.a,{"aria-label":"Edit",color:"secondary",onClick:function(){return e(t,"edit")},children:[Object(De.jsx)(Aa.a,{})," Edit"]})}),Object(De.jsx)(Da.a,{title:"Delete",children:Object(De.jsxs)(ct.a,{"aria-label":"Delete",color:"primary",onClick:function(){return e(t,"delete")},children:[Object(De.jsx)(Mc.a,{})," Delete"]})})]})},label:"Actions"}]},Bc=a(521),zc=a(757),Yc=a(907),qc=a(233),Gc=a.n(qc),Vc=a(903),Hc=a(974),$c=a(975),Jc=function(e){var t=e.label,a=e.attribute,n=e.name,c=e.values,i=void 0===c?{}:c,o=e.onSetValue;return Object(De.jsxs)(ve.a,{container:!0,children:[Object(De.jsx)(ve.a,{item:!0,xs:6,sm:6,md:6,children:Object(De.jsx)(Se.a,{variant:"h6",children:t})}),Object(De.jsx)(ve.a,{item:!0,xs:6,sm:6,md:6,children:Object(De.jsxs)(Ea.a,{size:"small",children:[Object(De.jsx)(ga.a,{"aria-label":"reduce",onClick:function(){return o(a,n,-1)},children:Object(De.jsx)(Hc.a,{fontSize:"small"})}),Object(De.jsx)(ga.a,{children:i[n]}),Object(De.jsx)(ga.a,{"aria-label":"increase",onClick:function(){return o(a,n,1)},children:Object(De.jsx)($c.a,{fontSize:"small"})})]})})]})},Qc=function(e){var t=e.cardTitle,a=e.onSetCounterValue,n=e.onChangeCheckbox,c=e.counterValues,i=void 0===c?{}:c,o=e.attribute;return Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:t}),Object(De.jsxs)(Ce.a,{children:[Object(De.jsx)(dn.a,{control:Object(De.jsx)(Vc.a,{checked:i.useDefault,onChange:function(e){var t=e.target;return n(t,o)}}),label:"Default value"}),Object(De.jsxs)(zc.a,{in:!i.useDefault,children:[Object(De.jsx)(Jc,{label:"Side to side",onSetValue:a,attribute:o,values:i.custom,name:"side"}),Object(De.jsx)(Jc,{label:"Up and down",onSetValue:a,attribute:o,values:i.custom,name:"ud"}),Object(De.jsx)(Jc,{label:"In and out",onSetValue:a,attribute:o,values:i.custom,name:"io"})]})]})]})},Zc=Object(dt.a)((function(e){return{root:{height:450,overflowY:"auto"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},editor:{backgroundColor:e.palette.background.default,height:500}}})),Kc=function(e){var t=e.attributes,a=void 0===t?{}:t,n=e.attName,c=e.onInputChange,i=e.onSetCounterValue,o=e.onSliderChange,r=e.onChangeColor,l=e.onChangeSwitch,s=e.onChangeCheckbox,d=Zc();return Object(De.jsx)(zc.a,{in:"scene"===n,children:Object(De.jsx)(ye.a,{className:d.root,children:Object(De.jsxs)(Ce.a,{children:[Object(De.jsx)(dn.a,{control:Object(De.jsx)(un.a,{checked:a.disableZoom,onChange:l,name:"disableZoom",color:"primary"}),label:"Disable zoom"}),Object(De.jsx)(dn.a,{control:Object(De.jsx)(un.a,{checked:a.autoRotate,onChange:l,name:"autoRotate",color:"primary"}),label:"Auto rotate"}),Object(De.jsx)(ma.a,{label:"Auto rotate delay",type:"number",name:"autoRotateDelay",value:a.autoRotateDelay,fullWidth:!0,onChange:c}),Object(De.jsx)(Gc.a,{defaultValue:"Color",name:"backgroundColor",floatingLabelText:"Background color",onChange:r,fullWidth:!0,value:a.backgroundColor}),Object(De.jsx)(Qc,{cardTitle:"Camera orbit",onSetCounterValue:i,counterValues:a.cameraOrbit,onChangeCheckbox:s,attribute:"cameraOrbit"}),Object(De.jsx)(Qc,{cardTitle:"Min Camera orbit",onSetCounterValue:i,counterValues:a.minCameraOrbit,onChangeCheckbox:s,attribute:"minCameraOrbit"}),Object(De.jsx)(Qc,{cardTitle:"Max Camera orbit",onSetCounterValue:i,counterValues:a.maxCameraOrbit,onChangeCheckbox:s,attribute:"maxCameraOrbit"}),Object(De.jsx)(Se.a,{variant:"h4",id:"field-of-view",gutterBottom:!0,children:"Field of view"}),Object(De.jsx)(Yc.a,{"aria-labelledby":"field-of-view",min:0,step:5,max:50,valueLabelDisplay:"on",name:"fieldOfView",value:a.fieldOfView,onChange:function(e,t){return o("fieldOfView",t)}})]})})})},Xc=a(898),ei=function(e){var t,a,n,c,i,o,r,l,s,d,u,j,b=e.attName,m=e.attributes,h=e.onSliderChange,O=e.onLightningCheck,p=e.onLighteningSelect;return Object(De.jsx)(zc.a,{in:"lighting"===b,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Image lighting"}),Object(De.jsxs)(Ce.a,{children:[Object(De.jsx)(Se.a,{variant:"h4",id:"exposure",gutterBottom:!0,children:"Exposure"}),Object(De.jsx)(Yc.a,{"aria-labelledby":"exposure",min:0,step:.01,max:2,valueLabelDisplay:"on",name:"exposure",value:m.exposure,onChange:function(e,t){return h("exposure",t)}}),Object(De.jsx)(Se.a,{variant:"h4",id:"shadow-intensity",gutterBottom:!0,children:"Shadow intensity"}),Object(De.jsx)(Yc.a,{"aria-labelledby":"shadow-intensity",min:0,step:.1,max:1,valueLabelDisplay:"on",name:"shadowIntensity",value:m.shadowIntensity,onChange:function(e,t){return h("shadowIntensity",t)}}),Object(De.jsx)(Se.a,{variant:"h4",id:"shadow-softness",gutterBottom:!0,children:"Shadow softness"}),Object(De.jsx)(Yc.a,{"aria-labelledby":"shadow-softness",min:0,step:.1,max:1,valueLabelDisplay:"on",name:"shadowSoftness",value:m.shadowSoftness,onChange:function(e,t){return h("shadowSoftness",t)}}),Object(De.jsx)(dn.a,{control:Object(De.jsx)(Vc.a,{checked:null===(t=m.skyboxImage)||void 0===t?void 0:t.active,onChange:function(e){var t=e.target;return O(t,"skyboxImage")}}),label:"Skybox image"}),(null===(a=m.skyboxImage)||void 0===a?void 0:a.active)&&Object(De.jsxs)(ha.a,{fullWidth:!0,children:[Object(De.jsx)(Oa.a,{shrink:!0,id:"select-skybox-image",children:"Images"}),Object(De.jsx)(pa.a,{labelId:"select-skybox-image",name:"skyboxImage",value:null===(n=m.skyboxImage)||void 0===n?void 0:n.image,onChange:function(e){var t=e.target;return p(t,"skyboxImage")},children:null===(c=m.imageFiles)||void 0===c?void 0:c.filter((function(e){return"skybox"===e.imageType})).map((function(e,t){return Object(De.jsx)(ht.a,{value:e.imageFileName,children:e.imageFileName},t)}))})]}),Boolean(null===(i=m.skyboxImage)||void 0===i?void 0:i.image)&&Object(De.jsx)(Xc.a,{image:ze+(null===(o=m.skyboxImage)||void 0===o?void 0:o.image),component:"img",height:"140"}),Object(De.jsx)(dn.a,{control:Object(De.jsx)(Vc.a,{checked:null===(r=m.environmentImage)||void 0===r?void 0:r.active,onChange:function(e){var t=e.target;return O(t,"environmentImage")}}),label:"Environment image"}),(null===(l=m.environmentImage)||void 0===l?void 0:l.active)&&Object(De.jsxs)(ha.a,{fullWidth:!0,children:[Object(De.jsx)(Oa.a,{shrink:!0,id:"select-environment-image",children:"Images"}),Object(De.jsx)(pa.a,{labelId:"select-environment-image",name:"environmentImage",value:null===(s=m.environmentImage)||void 0===s?void 0:s.image,onChange:function(e){var t=e.target;return p(t,"environmentImage")},children:null===(d=m.imageFiles)||void 0===d?void 0:d.filter((function(e){return"skybox"===e.imageType})).map((function(e,t){return Object(De.jsx)(ht.a,{value:e.imageFileName,children:e.imageFileName},t)}))})]}),Boolean(null===(u=m.environmentImage)||void 0===u?void 0:u.image)&&Object(De.jsx)(Xc.a,{image:ze+(null===(j=m.environmentImage)||void 0===j?void 0:j.image),component:"img",height:"140"})]})]})})},ti=function(e){var t=e.attName,a=e.attributes,n=e.onSliderChange;return Object(De.jsx)(zc.a,{in:"material"===t,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Image material"}),Object(De.jsxs)(Ce.a,{children:[Object(De.jsx)(Se.a,{variant:"h4",id:"metalness",gutterBottom:!0,children:"Matelness"}),Object(De.jsx)(Yc.a,{"aria-labelledby":"metalness",min:0,step:.01,max:1,valueLabelDisplay:"on",name:"metalness",value:a.metalness,onChange:function(e,t){return n("metalness",t)}}),Object(De.jsx)(Se.a,{variant:"h4",id:"roughness",gutterBottom:!0,children:"Roughness"}),Object(De.jsx)(Yc.a,{"aria-labelledby":"roughness",min:0,step:.01,max:1,valueLabelDisplay:"on",name:"roughness",value:a.roughness,onChange:function(e,t){return n("roughness",t)}})]})]})})},ai=function(e){var t=e.attName,a=e.attributes,n=void 0===a?{}:a,c=e.setAttributes,i=e.onInputChange,o=e.modelViewRef,r=void 0===o?{}:o,l=e.currentHotspot,s=e.setCurrentHotspot,d=Zc(),u=r.current,j=function(){var e=Object(bt.a)(n.hotspots),t=1;e.length>0&&(t=e.pop().hotspotNum+1);return t},b=function e(t){var a=t.clientX,i=t.clientY,o=u.positionAndNormalFromPoint(a,i);if(o){var r=o.position,l=o.normal,d=Object(p.a)({},n),b={dataPosition:r.toString(),dataNormal:l.toString(),dataText:"",bgColor:"black",hotspotNum:j(),selected:"selected"},m=d.hotspots.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{selected:""})}));m.push(b),c(Object(p.a)(Object(p.a)({},n),{},{hotspots:m})),s(b),u.removeEventListener("click",e)}};return Object(De.jsx)(zc.a,{in:"annotation"===t,children:Object(De.jsxs)(ye.a,{className:d.root,children:[Object(De.jsx)($t.a,{title:"Modal annotation"}),Object(De.jsxs)(Ce.a,{children:[Object(De.jsx)(ma.a,{label:"Model alt text",style:{margin:8},placeholder:"Type here",fullWidth:!0,margin:"normal",name:"alt",value:n.alt,onChange:i,InputLabelProps:{shrink:!0}}),Object(De.jsx)(ga.a,{color:"primary",onClick:function(){u.addEventListener("click",b)},children:"Add new hotspot"}),Object(De.jsx)(ma.a,{label:"Model alt text",style:{margin:8},placeholder:"Type annotation text",fullWidth:!0,margin:"normal",name:"dataText",value:null===l||void 0===l?void 0:l.dataText,disabled:!l,onChange:function(e){var t=e.target;if(l){var a=Object(p.a)({},n),i=a.hotspots.findIndex((function(e){return e.dataNormal===l.dataNormal})),o=Object(p.a)(Object(p.a)({},l),{},{dataText:t.value});s(o),a.hotspots[i].dataText=t.value,c(a)}},InputLabelProps:{shrink:!0}}),Object(De.jsx)(Gc.a,{defaultValue:"Click to select color",name:"bgColor",floatingLabelText:"Hotspot background color",onChange:function(e){if(l){var t=Object(p.a)({},n),a=t.hotspots.findIndex((function(e){return e.dataNormal===l.dataNormal})),i=Object(p.a)(Object(p.a)({},l),{},{bgColor:e});s(i),t.hotspots[a].bgColor=e,c(t)}},disabled:!l,fullWidth:!0,value:null===l||void 0===l?void 0:l.bgColor}),Object(De.jsx)(ga.a,{color:"secondary",disabled:!l,onClick:function(){return function(){if(l){var e=Object(p.a)({},n).hotspots.filter((function(e){return e.hotspotNum!==l.hotspotNum}));c((function(t){return Object(p.a)(Object(p.a)({},t),{},{hotspots:e})})),s(null)}}()},children:"Remove hotspot"})]})]})})},ni=["auto","fixed"],ci=["floor","wall"],ii=function(e){var t,a,n=e.attName,c=e.attributes,i=void 0===c?{}:c,o=e.onInputChange;return Object(De.jsx)(zc.a,{in:"ar"===n,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"AR Editor"}),Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ha.a,{fullWidth:!0,children:[Object(De.jsx)(Oa.a,{shrink:!0,id:"select-scale",children:"AR scale"}),Object(De.jsx)(pa.a,{labelId:"select-scale",name:"scale",value:i.scale,onChange:o,children:ni.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))})]}),Object(De.jsxs)(ha.a,{fullWidth:!0,children:[Object(De.jsx)(Oa.a,{shrink:!0,id:"select-placement",children:"AR placement"}),Object(De.jsx)(pa.a,{labelId:"select-placement",name:"placement",value:i.placement,onChange:o,children:ci.map((function(e,t){return Object(De.jsx)(ht.a,{value:e,children:e.toUpperCase()},t)}))})]}),(null===(t=i.imageFiles)||void 0===t?void 0:t.filter((function(e){return"custom"===e.imageType})).length)>0&&Object(De.jsxs)(ha.a,{fullWidth:!0,children:[Object(De.jsx)(Oa.a,{shrink:!0,id:"select-ar-button-image",children:"AR button image"}),Object(De.jsxs)(pa.a,{labelId:"select-ar-button-image",name:"arButtonImage",value:i.arButtonImage,onChange:o,children:[Object(De.jsx)(ht.a,{value:"",children:"Empty"}),null===(a=i.imageFiles)||void 0===a?void 0:a.filter((function(e){return"custom"===e.imageType})).map((function(e,t){return Object(De.jsx)(ht.a,{value:e.imageFileName,children:e.imageFileName},t)}))]})]}),Boolean(i.arButtonImage)&&Object(De.jsx)(Xc.a,{image:ze+i.arButtonImage,component:"img",height:"40"})]})]})})},oi=a(899),ri=[{id:"skybox",name:"Skybox & environment"},{id:"custom",name:"Custom AR"}],li=function(e){var t,a=e.attName,c=e.attributes,i=void 0===c?{}:c,o=e.setAttributes,l=e.productId,s=Object(n.useState)(ri[0].id),d=Object(tt.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(!1),m=Object(tt.a)(b,2),h=m[0],O=m[1],g=Object(r.b)((function(e){return e})),x=g.attrImg,f=x.loading,v=x.loaded,y=x.fileName,C=g.imgAttrDel,S=C.loaded,N=C.deletedFile;Object(n.useEffect)((function(){if(v){var e,t=Object(p.a)({},i);null===(e=t.imageFiles)||void 0===e||e.push({imageType:u,imageFileName:y,canBeDeleted:!0}),o(t),O(!1),xe.dispatch({type:te})}}),[v,y]),Object(n.useEffect)((function(){if(S){var e,t,a=Object(p.a)({},i),n=null===(e=a.imageFiles)||void 0===e?void 0:e.findIndex((function(e){return e.imageFileName===N}));null===(t=a.imageFiles)||void 0===t||t.splice(n,1),o(a)}}),[S,N]);return Object(De.jsx)(zc.a,{in:"manage_images"===a,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Manage images"}),Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ha.a,{fullWidth:!0,children:[Object(De.jsx)(Oa.a,{shrink:!0,id:"select-image-type",children:"Image type"}),Object(De.jsx)(pa.a,{labelId:"select-image-type",name:"imageType",value:u,onChange:function(e){var t=e.target;j(t.value)},children:ri.map((function(e,t){return Object(De.jsx)(ht.a,{value:e.id,children:e.name},t)}))})]}),Object(De.jsx)(ga.a,{onClick:function(){return O(!0)},children:"Upload ".concat(u," image")}),Object(De.jsx)(Fc.a,{acceptedFiles:["image/*"],cancelButtonText:"cancel",submitButtonText:f?"Uploading,...":"Submit",maxFileSize:5e6,clearOnUnmount:v,open:h,onClose:function(){return O(!1)},onSave:function(e){wc(e,"attr-image",{productId:l,imgType:u})},dialogTitle:"Upload ".concat(u.toUpperCase()," image")}),Object(De.jsx)(Qa.a,{dense:!0,children:null===i||void 0===i||null===(t=i.imageFiles)||void 0===t?void 0:t.filter((function(e){return e.imageType===u})).map((function(e,t){return Object(De.jsxs)(St.a,{children:[Object(De.jsx)(Nt.a,{primary:e.imageFileName}),e.canBeDeleted&&Object(De.jsx)(oi.a,{children:Object(De.jsx)(ct.a,{onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="".concat(Nc,"/").concat(e,"/image/").concat(t);xe.dispatch({type:ae,payload:Je.delete(a)})}(l,e.imageFileName)},edge:"end","aria-label":"delete",children:Object(De.jsx)(In.a,{})})})]},t)}))})]})]})})},si=a(20),di=a(12),ui=a.n(di),ji=function(e){var t=e.attName,a=e.modelViewRef,n=function(){var e=Object(si.a)(ui.a.mark((function e(){var t,n,c,i;return ui.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.current,n="",t.fieldOfView="auto",t.jumpCameraToGoal(),e.next=6,new Promise((function(e){return requestAnimationFrame((function(){return e()}))}));case 6:return e.next=8,t.toBlob({mimeType:"image/png",idealAspect:!0});case 8:c=e.sent,n=URL.createObjectURL(c),(i=document.createElement("a")).href=n,i.download="poster.png",i.click();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(De.jsx)(zc.a,{in:"poster"===t,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Poster"}),Object(De.jsx)(Ce.a,{children:Object(De.jsx)(ga.a,{color:"primary",onClick:n,children:"Download poster"})})]})})},bi=function(e){var t=e.attName,a=e.productId,c=Object(r.b)((function(e){return e})).projectProdsGet,i=c.loading,o=c.projProds;return Object(n.useEffect)((function(){}),[a]),Object(De.jsx)(zc.a,{in:"added_projects"===t,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Added projects"}),Object(De.jsx)(Ce.a,{children:i&&!o.length?Object(De.jsx)(et,{}):o.length?Object(De.jsx)(Qa.a,{children:o.map((function(e,t){var a;return Object(De.jsx)(St.a,{divider:!0,children:Object(De.jsx)(Nt.a,{primary:null===(a=e.project)||void 0===a?void 0:a.name,secondary:e.website})},t)}))}):Object(De.jsx)(oa,{message:"No project added yet"})})]})})},mi=function(e){var t=e.attName,a=e.productId,c=Object(r.b)((function(e){return e})).qrGenerate,i=c.loading,o=c.loaded,l=c.qr;return Object(n.useEffect)((function(){a&&function(e){var t={data:"".concat(Ye,"/products/").concat(e),size:"200x200",bgcolor:"FFFFFF",color:"9722FF"},a=Object.entries(t).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&");xe.dispatch({type:ne,payload:"".concat("https://api.qrserver.com/v1","/create-qr-code/?").concat(a)})}(a)}),[a]),Object(De.jsx)(zc.a,{in:"qr-code"===t,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Scan the QR code to preview 3D asset in your space"}),Object(De.jsxs)(Ce.a,{children:[i&&Object(De.jsx)(et,{}),o&&Object(De.jsx)("img",{src:l,alt:"QR code",loading:"lazy"})]})]})})},hi=function(e){var t=e.productId,a=e.attributes,c=e.setAttributes,i=e.modelViewRef,o=e.currentHotspot,l=e.setCurrentHotspot,s=Zc(),d=Object(n.useState)("scene"),u=Object(tt.a)(d,2),j=u[0],b=u[1],m=Object(r.b)((function(e){return e})),h=m.attrUpdate.loading,O=m.login.userInfo.user,x=function(e){var t=e.target,n=t.name,i=t.value;c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},n,i)))},f=function(e,t){c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},e,t)))};return Object(De.jsxs)(ve.a,{container:!0,spacing:2,className:s.editor,children:[Object(De.jsxs)(ve.a,{item:!0,sm:4,md:4,children:[Object(De.jsxs)(Ea.a,{orientation:"vertical",color:"primary","aria-label":"vertical contained primary button group",variant:"text",children:[Object(De.jsx)(ga.a,{color:"scene"===j?"primary":"secondary",onClick:function(){return b("scene")},children:"Scene"}),Object(De.jsx)(ga.a,{color:"lighting"===j?"primary":"secondary",onClick:function(){return b("lighting")},children:"Lighting"}),Object(De.jsx)(ga.a,{color:"material"===j?"primary":"secondary",onClick:function(){return b("material")},children:"Material"}),Object(De.jsx)(ga.a,{color:"annotation"===j?"primary":"secondary",onClick:function(){return b("annotation")},children:"Annotations"}),Object(De.jsx)(ga.a,{color:"ar"===j?"primary":"secondary",onClick:function(){return b("ar")},children:"AR"}),Object(De.jsx)(ga.a,{color:"poster"===j?"primary":"secondary",onClick:function(){return b("poster")},children:"Poster"}),"Client"!==O.role&&Object(De.jsx)(ga.a,{color:"manage_images"===j?"primary":"secondary",onClick:function(){return b("manage_images")},children:"Manage images"}),Object(De.jsx)(ga.a,{color:"qr-code"===j?"primary":"secondary",onClick:function(){return b("qr-code")},children:"View QR code"})]}),Object(De.jsx)(ga.a,{color:"secondary",variant:"contained",disabled:h,onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";xe.dispatch({type:K,payload:Je.patch("".concat(Nc,"/attributes/").concat(t),e)})}(a,t)},children:"Save Changes"})]}),Object(De.jsxs)(ve.a,{item:!0,sm:8,md:8,children:[Object(De.jsx)(Kc,{attName:j,attributes:a,onInputChange:x,onSetCounterValue:function(e,t,n){var i=Object(p.a)({},a[e].custom);i[t]+=n,a[e].custom=i,c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},e,a[e])))},onSliderChange:f,onChangeColor:function(e){c(Object(p.a)(Object(p.a)({},a),{},{backgroundColor:e}))},onChangeSwitch:function(e){var t=e.target,n=t.name,i=t.checked;c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},n,i)))},onChangeCheckbox:function(e,t){var n=e.checked,i=Object(p.a)({},a[t]);i.useDefault=n,n&&(i.custom=Dc[t].custom),c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},t,i)))}}),Object(De.jsx)(ei,{attName:j,attributes:a,onSliderChange:f,onLightningCheck:function(e,t){var n=e.checked,i=Object(p.a)({},a[t]);i.active=n,n||(i.image=""),c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},t,i)))},onLighteningSelect:function(e,t){var n=e.value,i=Object(p.a)({},a[t]);i.image=n,c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},t,i)))}}),Object(De.jsx)(ti,{attName:j,attributes:a,onSliderChange:f}),Object(De.jsx)(ai,{attName:j,attributes:a,onInputChange:x,modelViewRef:i,setAttributes:c,currentHotspot:o,setCurrentHotspot:l}),Object(De.jsx)(ii,{attName:j,attributes:a,onInputChange:x}),Object(De.jsx)(ji,{attName:j,modelViewRef:i}),"Client"!==O.role&&Object(De.jsx)(li,{attName:j,attributes:a,setAttributes:c,productId:t}),Object(De.jsx)(bi,{attName:j,productId:t}),Object(De.jsx)(mi,{attName:j,productId:t})]})]})},Oi=["src"],pi=function(e){var t,a,c=e.open,i=e.setOpen,o=e.productId,l=void 0===o?null:o,s=Object(n.useRef)(null),d=Object(n.useState)(Dc),u=Object(tt.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(null),h=Object(tt.a)(m,2),O=h[0],g=h[1],x=Object(n.useState)(null),f=Object(tt.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(tt.a)(C,2),N=S[0],w=S[1],I=Object(r.b)((function(e){return e})).productGet,k=I.loading,E=I.product,D=I.loaded;Object(n.useEffect)((function(){l&&c&&kc(l)}),[l,c]),Object(n.useEffect)((function(){if(D){var e=E.image,t=(e.src,Object(qe.a)(e,Oi));b((function(e){return Object(p.a)({prevAttribs:e},t)})),w(!1),g(null)}}),[D,E]),Object(n.useEffect)((function(){var e=document.querySelector("model-viewer#image3d-viewer");document.querySelectorAll("button.hotspot").forEach((function(e){return e.remove()})),j.hotspots.length&&e&&j.hotspots.forEach((function(t){var a=document.createElement("button");a.slot="hotspot-".concat(t.hotspotNum),a.classList.add("hotspot"),a.style.backgroundColor=t.bgColor,a.dataset.position=t.dataPosition,a.dataset.normal=t.dataNormal,e.appendChild(a),a.addEventListener("click",(function(){T(t)}));var n=document.createElement("div");n.classList.add("annotation"),n.textContent=t.dataText,a.appendChild(n)}))}),[j.hotspots,O]),Object(n.useEffect)((function(){var e=document.querySelector("model-viewer#image3d-viewer");D&&e&&(y(e),e.addEventListener("load",(function(t){var a=e.model.materials[0];a.pbrMetallicRoughness.setMetallicFactor(j.metalness),a.pbrMetallicRoughness.setRoughnessFactor(j.roughness)})))}),[D]),Object(n.useEffect)((function(){var e=s.current;if(e&&e.model){var t=e.model.materials[0];t.pbrMetallicRoughness.setMetallicFactor(j.metalness),t.pbrMetallicRoughness.setRoughnessFactor(j.roughness)}}),[j.metalness,j.roughness]);var T=function(e){g(e)};return Object(De.jsxs)(Ha.a,{open:c,maxWidth:"lg",fullWidth:!0,onClose:i,"aria-labelledby":"product-dialog-title","aria-describedby":"product-dialog-description",children:[Object(De.jsx)($a.a,{id:"product-dialog-title",children:null===E||void 0===E?void 0:E.name}),Object(De.jsxs)(en.a,{children:[Object(De.jsx)(Bc.CopyToClipboard,{text:"".concat(Ye,"/products/").concat(l),onCopy:function(){return w(!0)},children:Object(De.jsx)(ga.a,{color:N?"secondary":"",children:N?"Copied!":"Copy the embeded code"})}),Object(De.jsx)(ga.a,{onClick:i,color:"primary",autoFocus:!0,children:"Exit"})]}),Object(De.jsx)(Ja.a,{id:"product-dialog-description",children:k&&!Boolean(E.image)?Object(De.jsx)(et,{}):Object(De.jsxs)(ve.a,{container:!0,spacing:2,style:{backgroundColor:j.backgroundColor},children:[Object(De.jsx)(ve.a,{item:!0,md:5,lg:5,children:Object(De.jsx)(hi,{productId:l,attributes:j,setAttributes:b,modelViewRef:s,currentHotspot:O,mv:v,setCurrentHotspot:g})}),Object(De.jsx)(ve.a,{item:!0,md:7,lg:7,children:Object(De.jsx)("model-viewer",Object(p.a)(Object(p.a)({id:"image3d-viewer",ref:s,src:"".concat(Be,"/").concat(null===(t=E.imagesSrc)||void 0===t?void 0:t.glb),"ios-src":"".concat(Be,"/").concat(null===(a=E.imagesSrc)||void 0===a?void 0:a.usdz),style:{width:"100%",height:"70vh",border:"none"},"auto-rotate-delay":j.autoRotateDelay,"background-color":j.backgroundColor,"camera-orbit":yc("cameraOrbit",j),"min-camera-orbit":yc("minCameraOrbit",j),"max-camera-orbit":yc("maxCameraOrbit",j),"camera-target":yc("cameraTarget",j),"field-of-view":j.fieldOfView,exposure:j.exposure,"shadow-intensity":j.shadowIntensity,"shadow-softness":j.shadowSoftness,alt:j.alt,ar:!0,"ar-scale":j.scale,"ar-placement":j.placement,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0,autoplay:!0,"quick-look-browsers":"safari chrome firefox",loading:"eager","interaction-prompt":"none"},Cc(j)),{},{children:Boolean(j.arButtonImage)&&Object(De.jsx)("input",{type:"image",src:ze+j.arButtonImage,className:"ar-button",style:{width:"50%"},slot:"ar-button",alt:j.alt})}))})]})}),Object(De.jsx)(en.a,{children:Object(De.jsx)(ga.a,{onClick:i,color:"primary",autoFocus:!0,children:"Close"})})]})},gi={project:"",time:"allTime"},xi=[{id:"today",name:"Today"},{id:"7days",name:"Last 7 days"},{id:"30days",name:"Last 30 days"},{id:"allTime",name:"All time"}],fi=[{path:"/",exact:!0,component:function(e){var t=Object(n.useState)(xc),a=Object(tt.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(tt.a)(o,2),s=l[0],d=l[1],u=e.location.search?e.location.search.split("=")[1]:"dashboard/home",j=Object(r.b)((function(e){return e})),b=j.login,m=b.userInfo,h=b.loading,O=j.linkSend,x=O.loaded,v=O.loading;Object(n.useEffect)((function(){m.user.fullName&&(localStorage.setItem(Me,JSON.stringify(m)),window.location.href=u,i(xc))}),[e.history,u,m]),Object(n.useEffect)((function(){x&&(d(!1),Oe("Email was sent to your mail box"),i(xc))}),[x]);var y=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;i(Object(p.a)(Object(p.a)({},c),{},Object(g.a)({},a,n)))};return Object(De.jsxs)("div",{className:"login-page",children:[Object(De.jsx)(gc,{open:s,setOpen:function(){return d(!1)},userInfo:c,onChange:y,onConfirm:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";xe.dispatch({type:k,payload:Je.post("/auth/send-reset-link",{email:e})})}(c.email)},loading:v}),Object(De.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),function(e){xe.dispatch({type:f,payload:Je.post("/auth/login",e)})}(c)},children:[Object(De.jsx)("div",{children:Object(De.jsx)("img",{src:_t,alt:"#",className:"logo"})}),Object(De.jsx)("div",{children:Object(De.jsx)("h1",{children:"Sign In to ARI CUBE"})}),h&&Object(De.jsx)(et,{}),Object(De.jsxs)("div",{children:[Object(De.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(De.jsx)("input",{type:"email",name:"email",placeholder:"Enter email",required:!0,onChange:y,value:c.email,className:"login-input"})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("label",{htmlFor:"password",children:"Password"}),Object(De.jsx)("input",{type:"password",name:"password",placeholder:"Enter password",required:!0,onChange:y,value:c.password,className:"login-input"})]}),Object(De.jsxs)("div",{children:[Object(De.jsx)("button",{className:"login-input btn-login primary",type:"submit",children:"Login"}),Object(De.jsx)(pc.a,{component:"button",variant:"body2",onClick:function(){return d(!0)},children:"Forget password?"})]})]})]})}},{path:"/set-password/:token",exact:!0,component:Wt},{path:"/set-password/:token/:action",exact:!0,component:Wt},{path:"/products/:productId",exact:!0,component:Ac},{path:"/dashboard",component:function(e){var t=e.route,a=e.history,c=Object(r.b)((function(e){return e})),i=c.login.userInfo.user,o=c.dashboard,l=o.loading,s=o.counts;return Object(n.useEffect)((function(){i.fullName||(localStorage.removeItem(Me),a.replace("/"))}),[i,a]),Object(n.useEffect)((function(){xe.dispatch({type:q,payload:Je.get("/home/dashboard")})}),[]),Object(De.jsx)(Ft,{children:Object(De.jsxs)(fe.a,{maxWidth:!1,children:[l?Object(De.jsx)(et,{}):Object(De.jsxs)(ve.a,{container:!0,spacing:3,children:["Client"!==i.role&&Object(De.jsx)(ve.a,{item:!0,lg:Ut(i.role).lg,sm:Ut(i.role).sm,xl:Ut(i.role).xl,xs:Ut(i.role).xs,component:_e.a,to:"/dashboard/customers",children:Object(De.jsx)(Le,{counts:s.users||0})}),Object(De.jsx)(ve.a,{item:!0,lg:Ut(i.role).lg,sm:Ut(i.role).sm,xl:Ut(i.role).xl,xs:Ut(i.role).xs,component:_e.a,to:"/dashboard/projects",children:Object(De.jsx)(Fe,{counts:s.projects||0})}),Object(De.jsx)(ve.a,{item:!0,lg:Ut(i.role).lg,sm:Ut(i.role).sm,xl:Ut(i.role).xl,xs:Ut(i.role).xs,component:_e.a,to:"/dashboard/quotes",children:Object(De.jsx)(Ue,{sx:{height:"100%"},counts:s.quotes||0})}),Object(De.jsx)(ve.a,{item:!0,lg:Ut(i.role).lg,sm:Ut(i.role).sm,xl:Ut(i.role).xl,xs:Ut(i.role).xs,component:_e.a,to:"/dashboard/subscriptions",children:Object(De.jsx)(Te,{counts:s.subscriptions||0})})]}),Object(j.a)(t.routes)]})})},routes:[{path:"/dashboard/home",exact:!0,component:function(){var e="Client"!==xe.getState().login.userInfo.user.role?"customers":"projects";return Object(De.jsx)(l.a,{to:"/dashboard/".concat(e)})}},{path:"/dashboard/customers",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(tt.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(Ya(10)),o=Object(tt.a)(i,2),l=o[0],s=o[1],d=Object(n.useState)(null),u=Object(tt.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)("add"),h=Object(tt.a)(m,2),O=h[0],g=h[1],x=Object(n.useState)(!1),f=Object(tt.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(tt.a)(C,2),N=S[0],I=S[1],k=Object(r.b)((function(e){return e})),E=k.userList,D=E.loading,T=E.users,A=k.userRm,P=A.loading,R=A.loaded;Object(n.useEffect)((function(){gt()}),[]),Object(n.useEffect)((function(){R&&(gt(),I(!1))}),[R]),Object(n.useEffect)((function(){if(T.length>0){var e=l.pageNumber,t=l.pageSize,a=za(T,e,t);c(a)}}),[T,l]);return Object(De.jsx)(we.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsx)(ic,{open:v,setOpen:function(){return y(!1)},currentItem:j}),Object(De.jsx)(rc,{loading:P,message:j&&"Are you sure you want to delete ".concat(j.firstName),onConfirmYes:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";xe.dispatch({type:w,payload:Je.delete("/auth/users/".concat(e))})}(j._id)},open:N,setOpen:function(){return I(!1)}}),Object(De.jsx)(ve.a,{item:!0,lg:4,md:4,xl:6,xs:12,children:Object(De.jsx)(nc,{action:O,currentItem:j})}),Object(De.jsx)(ve.a,{item:!0,lg:8,md:8,xl:6,xs:12,children:Object(De.jsx)(sa,{tableTitle:"All users",loading:D,columns:Ua((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;b(e),"delete"!==t?"view"!==t?g(t):y(!0):I(!0)})),dataCount:a.length,data:a,withPagination:!0,pageCount:Math.ceil(T.length/l.pageSize),handlePageChange:function(e){var t=e.selected;s(Object(p.a)(Object(p.a)({},l),{},{pageNumber:t+1}))},page:l.pageNumber})})]})})}},{path:"/dashboard/projects",exact:!0,component:function(){var e=Object(r.b)((function(e){return e})),t=Object(n.useState)([]),a=Object(tt.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(Ya()),l=Object(tt.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(null),j=Object(tt.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)("add"),O=Object(tt.a)(h,2),g=O[0],x=O[1],f=Object(n.useState)(!1),v=Object(tt.a)(f,2),y=v[0],C=v[1],S=e.projectsGet,N=S.loading,w=S.projects,I=e.projectAdd.loaded,k=e.projectEdit.loaded,E=e.login.userInfo.user;Object(n.useEffect)((function(){if(w.length>0){var e=s.pageNumber,t=s.pageSize,a=za(w,e,t);i(a)}}),[w,s]),Object(n.useEffect)((function(){Ze({})}),[]),Object(n.useEffect)((function(){(I||k)&&(m(null),x("add"),Ze({}))}),[I,k]);return Object(De.jsxs)(ve.a,{container:!0,spacing:2,sx:{py:3},children:[Object(De.jsx)(sn,{open:y,setOpen:function(){return C(!1)},currentItem:b}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(De.jsx)(ka,{action:g,currentItem:b})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(De.jsx)(sa,{tableTitle:"List of projects",columns:La((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;m(e),"view"!==t?x(t):C(!0)}),E),loading:N,data:c,withPagination:!0,dataCount:w.length,pageCount:Math.ceil(w.length/s.pageSize),handlePageChange:function(e){var t=e.selected;d(Object(p.a)(Object(p.a)({},s),{},{pageNumber:t+1}))},page:s.pageNumber})})]})}},{path:"/dashboard/products",exact:!0,component:function(){var e=Object(n.useState)(Ya()),t=Object(tt.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),o=Object(tt.a)(i,2),l=o[0],s=o[1],d=Object(n.useState)(!1),u=Object(tt.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(null),h=Object(tt.a)(m,2),O=h[0],g=h[1],x=Object(n.useState)("add"),f=Object(tt.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(tt.a)(C,2),N=S[0],w=S[1],I=Object(r.b)((function(e){return e})),k=I.productsGet,E=k.loading,D=k.products,T=k.loaded,A=I.productRm,P=A.loading,R=A.loaded,L=A.message;I.login.userInfo.user;Object(n.useEffect)((function(){if(T){var e=a.pageNumber,t=a.pageSize,n=za(D,e,t);s(n)}}),[D,a,T]),Object(n.useEffect)((function(){Ic({})}),[]),Object(n.useEffect)((function(){R&&(Oe(L),w(!1),Ic({}))}),[R,L]);return Object(De.jsxs)(ve.a,{container:!0,spacing:2,sx:{py:3},children:[Object(De.jsx)(rc,{loading:P,message:O&&"Are you sure you want to delete ".concat(O.name),onConfirmYes:function(){return e=null===O||void 0===O?void 0:O._id,void xe.dispatch({type:ce,payload:Je.delete("".concat(Nc,"/").concat(e))});var e},open:N,setOpen:function(){return w(!1)}}),Object(De.jsx)(pi,{open:j,setOpen:function(){return b(!1)},productId:null===O||void 0===O?void 0:O._id}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(De.jsx)(_c,{action:v,currentItem:O,setAction:y})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(De.jsx)(sa,{tableTitle:"List of 3D assets",columns:Wc((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;g(e),"preview"!==t?"delete"!==t?y(t):w(!0):b(!0)})),loading:E,data:l,withPagination:!0,dataCount:D.length,pageCount:Math.ceil(D.length/a.pageSize),handlePageChange:function(e){var t=e.selected;c(Object(p.a)(Object(p.a)({},a),{},{pageNumber:t+1}))},page:a.pageNumber})})]})}},{path:"/dashboard/projects/:projectId",exact:!0,component:function(e){var t,a,c,i,o=e.match,l=va(),s=Object(n.useState)({}),d=Object(tt.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(Lc),m=Object(tt.a)(b,2),h=m[0],O=m[1],x=Object(n.useState)({}),f=Object(tt.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(tt.a)(C,2),N=S[0],w=S[1],I=Object(n.useState)(kt.EditorState.createEmpty()),k=Object(tt.a)(I,2),E=k[0],D=k[1],T=o.params.projectId,A=Object(r.b)((function(e){return e})),P=A.historiesGet,F=P.loading,_=P.histories,M=A.projectGet,W=M.loading,B=M.loaded,z=M.project,Y=A.logAdd,q=Y.loading,G=Y.loaded,V=A.login.userInfo.user,H=A.projectProdsGet,$=H.loading,J=H.projProds;Object(n.useEffect)((function(){T&&(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";xe.dispatch({type:R,payload:Je.get(Qe+e)})}(T),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"project",a="".concat(Qe+e,"/products");a+="?type=".concat(t),xe.dispatch({type:U,payload:Je.get(a)})}(T))}),[T]),Object(n.useEffect)((function(){if(T&&B){Ke(T);var e=Ia.find((function(e){return e.name===z.type}));j(e)}}),[T,B,z.type]),Object(n.useEffect)((function(){G&&(Ke(T),O(Lc),D(kt.EditorState.createEmpty()))}),[G,T]);var Q=Object(cn.useBlogTextInfoContentStyles)(),Z=Q.button,K=Object(qe.a)(Q,Rc),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.quote,"?downloadType=proposal");return e.invoice&&(t="".concat(e.invoice,"?downloadType=invoice")),t};return Object(De.jsxs)(ve.a,{container:!0,spacing:2,sx:{py:3},children:[Object(De.jsx)(Pc,{open:N,setOpen:function(){y({}),w(!1)},productId:v._id}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(De.jsxs)(ye.a,{component:"main",className:l.root,children:[Object(De.jsxs)("div",{className:l.paper,children:[Object(De.jsx)(Ne.a,{className:l.avatar,children:Object(De.jsx)(xa.a,{})}),Object(De.jsx)(Se.a,{component:"h1",variant:"h4",children:z.name}),Object(De.jsx)(Se.a,{variant:"caption",children:"Created by: ".concat(null===(t=z.user)||void 0===t?void 0:t.fullName)})]}),Object(De.jsx)($t.a,{title:"3D assets added"}),Object(De.jsx)(Ot.a,{}),Object(De.jsx)(Ce.a,{children:$&&!J.length?Object(De.jsx)(et,{}):J.length?Object(De.jsx)(Qa.a,{children:J.map((function(e,t){var a;return Object(De.jsx)(St.a,{divider:!0,component:ga.a,children:Object(De.jsx)(Nt.a,{primary:null===(a=e.product)||void 0===a?void 0:a.name,secondary:"added ".concat(It()(e.createdAt).fromNow()),onClick:function(){w(!0),y(e.product)}})},t)}))}):Object(De.jsx)(oa,{message:"No asset added yet"})})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(De.jsxs)(ye.a,{"aria-labelledby":"project-name","aria-describedby":"project-description",children:[Object(De.jsx)($t.a,{title:"Project name: ".concat(null===(a=z.name)||void 0===a?void 0:a.toUpperCase())}),Object(De.jsx)(Ce.a,{children:W?Object(De.jsx)(et,{}):Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(nn.a,{classes:K,overline:(null===(c=z.user)||void 0===c?void 0:c.fullName)&&"Created by: ".concat(z.user.fullName)}),Object(De.jsx)(Nt.a,{primary:"Start: ".concat(It()(z.startDate).format("YYYY-MM-DD"),", Due date: ").concat(It()(z.dueDate).format("YYYY-MM-DD"))}),Object(De.jsx)(Se.a,{variant:"h4",children:"Project type:"}),Object(De.jsx)(St.a,{children:Object(De.jsx)(Nt.a,{primary:null===u||void 0===u?void 0:u.name,secondary:null===u||void 0===u?void 0:u.description})}),Object(De.jsxs)(Se.a,{variant:"h4",children:["Number of items: ",z.nOfItems]}),Ga()(z.description),Object(De.jsxs)(ga.a,{className:Z,children:["Budget: $",(null===(i=z.budget)||void 0===i?void 0:i.toLocaleString("en-US"))||0]}),F&&!_.length?Object(De.jsx)(et,{}):Object(De.jsxs)(Ce.a,{children:[Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Add custom log"}),Object(De.jsx)(Ce.a,{children:Object(De.jsxs)(ve.a,{item:!0,xs:12,sm:12,md:8,lg:8,children:[Object(De.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(De.jsx)(ma.a,{label:"Log title",placeholder:"Type here",name:"title",fullWidth:!0,value:h.title,onChange:function(e){var t=e.target,a=t.name,n=t.value;O(Object(p.a)(Object(p.a)({},h),{},Object(g.a)({},a,n)))}}),Object(De.jsx)(Sa,{editorState:E,setEditorState:D})]}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:12,md:2,lg:2}),Object(De.jsx)(ga.a,{variant:"contained",color:"primary",disabled:q,onClick:function(){h.description=At(E),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xe.dispatch({type:L,payload:Je.post("".concat(Qe+e,"/histories"),t)})}(T,h)},children:"Send"})]})})]}),Object(De.jsx)(Qa.a,{children:_.map((function(e,t){return Object(De.jsxs)(Za.a,{children:[Object(De.jsx)(Ka.a,{expandIcon:Object(De.jsx)(lt.a,{}),"aria-controls":"panel".concat(t,"a-content"),id:"panel".concat(t,"a-header"),children:Object(De.jsxs)(St.a,{alignItems:"flex-start",children:[Object(De.jsx)(Nt.a,{primary:e.description,secondary:Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Se.a,{component:"span",variant:"body2",className:l.inline,color:"textPrimary",children:Tt(V,e)})," \u2014 on ".concat(It()(e.createdAt).format("MMM DD, YYYY @ HH:mm"))]})}),(e.invoice||e.quote)&&Object(De.jsx)(ct.a,{edge:"end",size:"small",component:"a","aria-label":"Print invoice",rel:"noreferrer",href:"".concat(We,"/").concat(X(e)),target:"_blank",children:Object(De.jsx)(tn.a,{})})]})}),Boolean(e.content)&&Object(De.jsx)(Xa.a,{children:Object(De.jsx)(we.a,{children:Ga()(e.content)})})]},t)}))})]})]})}),Object(De.jsx)(Kt.a,{children:Object(De.jsx)(ga.a,{onClick:function(){},color:"primary",children:"Close"})})]})})]})}},{path:"/dashboard/quotes",exact:!0,component:function(){var e=Object(r.b)((function(e){return e})),t=Object(n.useState)([]),a=Object(tt.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(Ya()),l=Object(tt.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(null),j=Object(tt.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)("add"),O=Object(tt.a)(h,2),g=O[0],x=O[1],f=e.quotesGet,v=f.loading,y=f.quotes,C=e.quoteAdd.loaded,S=e.quoteEdit,N=S.loaded,w=S.loading,I=e.login.userInfo;Object(n.useEffect)((function(){if(y.length>0){var e=s.pageNumber,t=s.pageSize,a=za(y,e,t);i(a)}}),[y,s]),Object(n.useEffect)((function(){mn()}),[]),Object(n.useEffect)((function(){(C||N)&&(k(),mn())}),[C,N]);var k=function(){m(null),x("add")};return Object(De.jsxs)(ve.a,{container:!0,spacing:2,sx:{py:3},children:[Object(De.jsxs)(ve.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:[Object(De.jsx)(yn,{action:g,currentItem:b}),Object(De.jsx)(Ln,{open:"items"===g,setOpen:function(){return k()},quote:b,loading:w,user:I.user})]}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(De.jsx)(sa,{tableTitle:"All proposals",columns:Sn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;m(e),x(t)}),I.user),loading:v,data:c,withPagination:!0,dataCount:y.length,pageCount:Math.ceil(y.length/s.pageSize),handlePageChange:function(e){var t=e.selected;d(Object(p.a)(Object(p.a)({},s),{},{pageNumber:t+1}))},page:s.pageNumber})})]})}},{path:"/dashboard/invoices",exact:!0,component:function(){var e=Object(r.b)((function(e){return e})),t=Object(n.useState)([]),a=Object(tt.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(Ya()),l=Object(tt.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(null),j=Object(tt.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)("add"),O=Object(tt.a)(h,2),g=O[0],x=O[1],f=e.invoicesGet,v=f.loading,y=f.invoices,C=e.invoiceEdit.loaded,S=e.login.userInfo;Object(n.useEffect)((function(){if(y.length>0){var e=s.pageNumber,t=s.pageSize,a=za(y,e,t);i(a)}}),[y,s]),Object(n.useEffect)((function(){Un()}),[]),Object(n.useEffect)((function(){C&&(m(null),x("add"),Un())}),[C]);return Object(De.jsxs)(ve.a,{container:!0,spacing:2,sx:{py:3},children:[Object(De.jsx)(ve.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(De.jsx)(Wn,{action:g,currentItem:b})}),Object(De.jsx)(ve.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(De.jsx)(sa,{tableTitle:"List of invoices",columns:Ma((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;m(e),x(t)}),S.user),loading:v,data:c,withPagination:!0,dataCount:y.length,pageCount:Math.ceil(y.length/s.pageSize),handlePageChange:function(e){var t=e.selected;d(Object(p.a)(Object(p.a)({},s),{},{pageNumber:t+1}))},page:s.pageNumber})})]})}},{path:"/dashboard/subscriptions",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(tt.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(Ya()),o=Object(tt.a)(i,2),l=o[0],s=o[1],d=Object(r.b)((function(e){return e})),u=d.subscriptionsGet,j=u.loading,b=u.subscriptions,m=d.login.userInfo;Object(n.useEffect)((function(){if(b.length>0){var e=l.pageNumber,t=l.pageSize,a=za(b,e,t);c(a)}}),[b,l]),Object(n.useEffect)((function(){xe.dispatch({type:Y,payload:Je.get("/subscription")})}),[]);return Object(De.jsx)(ve.a,{container:!0,spacing:2,sx:{py:3},children:Object(De.jsx)(ve.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(De.jsx)(sa,{tableTitle:"List of subscriptions",columns:Wa(m.user),loading:j,data:a,withPagination:!0,dataCount:b.length,pageCount:Math.ceil(b.length/l.pageSize),handlePageChange:function(e){var t=e.selected;s(Object(p.a)(Object(p.a)({},l),{},{pageNumber:t+1}))},page:l.pageNumber})})})}},{path:"/dashboard/profile",exact:!0,component:function(){var e=Oc(),t=Object(r.b)((function(e){return e})),a=t.login.userInfo,c=t.profileEdit,i=c.loading,o=c.loaded,l=c.userInfo;return Object(n.useEffect)((function(){o&&(Oe("Your account has been successfully updated."),localStorage.setItem(Me,JSON.stringify(l)),setTimeout((function(){window.location.reload()}),3e3))}),[o,l]),Object(De.jsx)("div",{className:e.root,children:Object(De.jsxs)(ve.a,{container:!0,spacing:4,children:[Object(De.jsx)(ve.a,{item:!0,lg:4,md:6,xl:4,xs:12,children:Object(De.jsx)(uc,{user:a.user})}),Object(De.jsx)(ve.a,{item:!0,lg:8,md:6,xl:8,xs:12,children:Object(De.jsx)(hc,{user:a.user,loading:i})})]})})}},{path:"/dashboard/analytics",exact:!0,component:function(){var e,t=Object(n.useState)(gi),a=Object(tt.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)("All"),l=Object(tt.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(Ya()),j=Object(tt.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)([]),O=Object(tt.a)(h,2),g=O[0],x=O[1],f=Object(n.useState)(null),v=Object(tt.a)(f,2),y=v[0],C=v[1],S=Object(r.b)((function(e){return e})),N=S.projectsGet.projects,w=S.analyticsGet,I=w.analytics,k=w.loading;Object(n.useEffect)((function(){Ze({})}),[]),Object(n.useEffect)((function(){var e="";Boolean(c.project)&&(e="PROJECT: ".concat(N.find((function(e){return e._id===c.project})).name,". ")),d(e+"TIME: "+xi.find((function(e){return e.id===c.time})).name),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="?time=".concat(e.time||"allTime");e.project&&(t+="&project=".concat(e.project)),xe.dispatch({type:ie,payload:Je.get("".concat(Nc,"/get/analytics").concat(t))})}(c)}),[c]),Object(n.useEffect)((function(){var e=b.pageNumber,t=b.pageSize,a=za(I,e,t);x(a)}),[I,b]);var E;return Object(De.jsxs)(we.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:[Object(De.jsx)(Pc,{open:Boolean(y),setOpen:function(){C(null)},productId:null===y||void 0===y||null===(e=y.product)||void 0===e?void 0:e._id}),Object(De.jsxs)(ve.a,{container:!0,spacing:1,children:[Object(De.jsx)(ve.a,{item:!0,lg:4,md:4,xl:6,xs:12,children:Object(De.jsxs)(ye.a,{children:[Object(De.jsx)($t.a,{title:"Add filters"}),Object(De.jsx)(Ce.a,{children:Object(De.jsxs)(ve.a,{container:!0,spacing:2,children:[Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsxs)(ha.a,{variant:"outlined",fullWidth:!0,children:[Object(De.jsx)(Oa.a,{id:"select-project",children:"Select project"}),Object(De.jsxs)(pa.a,{labelId:"select-project",name:"project",value:c.project,onChange:function(e){var t=e.target;return i((function(e){return Object(p.a)(Object(p.a)({},e),{},{project:t.value})}))},children:[Object(De.jsx)(ht.a,{value:"",children:"---"}),N.map((function(e,t){return Object(De.jsx)(ht.a,{value:e._id,children:e.name},t)}))]})]})}),Object(De.jsx)(ve.a,{item:!0,xs:12,children:Object(De.jsx)(Ea.a,{variant:"contained","aria-label":"outlined primary button group",children:xi.map((function(e,t){var a=e.id,n=e.name;return Object(De.jsx)(ga.a,{color:c.time===a?"primary":"",onClick:function(){return i((function(e){return Object(p.a)(Object(p.a)({},e),{},{time:a})}))},children:n},t)}))})})]})})]})}),Object(De.jsxs)(ve.a,{item:!0,lg:8,md:8,xl:6,xs:12,children:[Object(De.jsx)(Se.a,{variant:"h4",children:"Analytics page"}),Object(De.jsx)(sa,{tableTitle:"Filters: ".concat(s),columns:(E=function(e){C(e)},[{content:function(e){var t;return Object(De.jsx)(ga.a,{onClick:function(){return E(e,"preview")},children:null===(t=e.product)||void 0===t?void 0:t.name})},label:"3D Assets"},{path:"users",label:"Users"},{path:"clicks",label:"AR Users"},{content:function(e){return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Ba.a,{variant:"outlined",color:"primary",size:"small",label:"iOs",avatar:Object(De.jsx)(Ne.a,{children:e.iOs})}),Object(De.jsx)(Ba.a,{variant:"outlined",color:"secondary",size:"small",label:"Android",avatar:Object(De.jsx)(Ne.a,{children:e.androids})}),Object(De.jsx)(Ba.a,{variant:"outlined",size:"small",label:"Desktop",avatar:Object(De.jsx)(Ne.a,{children:e.desktops})})]})},label:"Device by Users"},{content:function(e){return e.countries.map((function(e,t){return Object(De.jsx)(Ba.a,{variant:"outlined",size:"small",label:e.name,avatar:Object(De.jsx)(Ne.a,{children:e.count})},t)}))},label:"Country by Users"}]),loading:k,data:g,withPagination:!0,dataCount:I.length,pageCount:Math.ceil(I.length/b.pageSize),handlePageChange:function(e){var t=e.selected;m(Object(p.a)(Object(p.a)({},b),{},{pageNumber:t+1}))},page:b.pageNumber})]})]})]})}}]},{component:function(){return Object(De.jsx)(l.a,{to:"/dashboard/home"})}}],vi=fi,yi=a(110),Ci="#FFFFFF",Si={black:"#000000",white:Ci,primary:{contrastText:Ci,dark:ea.a.indigo[900],main:ea.a.indigo[500],light:ea.a.indigo[100]},secondary:{contrastText:Ci,dark:ea.a.blue[900],main:ea.a.blue.A400,light:ea.a.blue.A400},success:{contrastText:Ci,dark:ea.a.green[900],main:ea.a.green[600],light:ea.a.green[400]},info:{contrastText:Ci,dark:ea.a.blue[900],main:ea.a.blue[600],light:ea.a.blue[400]},warning:{contrastText:Ci,dark:ea.a.orange[900],main:ea.a.orange[600],light:ea.a.orange[400]},purple:{contrastText:Ci,dark:"#8967fc",main:"#8967fc",light:"#8967fc"},error:{contrastText:Ci,dark:ea.a.red[900],main:ea.a.red[600],light:ea.a.red[400]},text:{primary:ea.a.blueGrey[900],secondary:ea.a.blueGrey[600],link:ea.a.blue[600]},background:{default:"#DFD9DF",paper:Ci},icon:ea.a.blueGrey[600],divider:ea.a.grey[200]},Ni={h1:{color:Si.text.primary,fontWeight:500,fontSize:"35px",letterSpacing:"-0.24px",lineHeight:"40px"},h2:{color:Si.text.primary,fontWeight:500,fontSize:"29px",letterSpacing:"-0.24px",lineHeight:"32px"},h3:{color:Si.text.primary,fontWeight:500,fontSize:"24px",letterSpacing:"-0.06px",lineHeight:"28px"},h4:{color:Si.text.primary,fontWeight:500,fontSize:"20px",letterSpacing:"-0.06px",lineHeight:"24px"},h5:{color:Si.text.primary,fontWeight:500,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"20px"},h6:{color:Si.text.primary,fontWeight:500,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"20px"},subtitle1:{color:Si.text.primary,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"25px"},subtitle2:{color:Si.text.secondary,fontWeight:400,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body1:{color:Si.text.primary,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body2:{color:Si.text.secondary,fontSize:"12px",letterSpacing:"-0.04px",lineHeight:"18px"},button:{color:Si.text.primary,fontSize:"14px"},caption:{color:Si.text.secondary,fontSize:"11px",letterSpacing:"0.33px",lineHeight:"13px"},overline:{color:Si.text.secondary,fontSize:"11px",fontWeight:500,letterSpacing:"0.33px",lineHeight:"13px",textTransform:"uppercase"}},wi={MuiButton:{contained:{boxShadow:"0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12), 0 1px 3px 0 rgba(0,0,0,0.20)",backgroundColor:"#FFFFFF"}},MuiIconButton:{root:{color:Si.icon,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}},MuiPaper:{elevation1:{boxShadow:"0 0 0 1px rgba(63,63,68,0.05), 0 1px 3px 0 rgba(63,63,68,0.15)"}},MuiTableCell:{root:Object(p.a)(Object(p.a)({},Ni.body1),{},{borderBottom:"1px solid ".concat(Si.divider)})},MuiTableHead:{root:{backgroundColor:ea.a.grey[50]}},MuiTypography:{gutterBottom:{marginBottom:8}}},Ii=Object(yi.b)({palette:Si,typography:Ni,overrides:wi,zIndex:{appBar:1200,drawer:1100}});var ki=function(){var e=Object(s.a)();return Object(De.jsx)(u.a,{theme:Ii,children:Object(De.jsxs)(r.a,{store:xe,children:[Object(De.jsx)(d.a,{}),Object(De.jsx)(l.c,{history:e,children:Object(j.a)(vi)})]})})},Ei=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,978)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))};o.a.render(Object(De.jsx)(c.a.StrictMode,{children:Object(De.jsx)(ki,{})}),document.getElementById("root")),Ei()}},[[901,1,2]]]);
//# sourceMappingURL=main.1673d91b.chunk.js.map