(this.webpackJsonpcube=this.webpackJsonpcube||[]).push([[0],{538:function(e,t,a){},713:function(e,t){},901:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(25),o=a.n(i),r=(a(538),a(539),a(22)),l=a(35),s=a(53),d=a(94),u=a(965),j=a(223),b=(a(902),a(100)),m=a(486),h=a(483),O=a(484),p=a(3),g=a(14),x=function(e,t){return Object(g.a)({loading:!1,loaded:!1},e,t)},f="USER_SIGNIN",v="USER_SIGNOUT",y="USER_LIST",C="USER_REGISTER",S="SET_PASSWORD",N="USER_UPDATE",w="USER_DELETE",I="UPDATE_PROFILE",k="SEND_LINK",E="RESET_PASSWORD",D="ADD_NEW_PROJECT",T="EDIT_PROJECT",A="GET_PROJECTS",P="GET_PROJECT_HISTORIES",R="GET_PROJECT_DETAILS",F="ADD_NEW_LOG",L="ADD_PROJECT_PROD",U="GET_PROJECT_PROD",_="ADD_NEW_QUOTA",M="UPDATE_QUOTE",W="GET_QUOTES",B="GET_INVOICES",z="UPDATE_INVOICE",q="GET_SUBSCRIPTIONS",G="GET_DASHBOARD_COUNTS",Y="GET_NOTIFICATIONS",V="GET_NOTIFICATIONS_COUNT",H="UPLOAD_PRODUCT_IMAGES",$="ADD_NEW_PRODUCT",J="GET_PRODUCTS",Q="GET_PRODUCT_IMAGES",Z="UPDATE_PRODUCT",K="UPDATE_ATTRIBUTES",X="GET_PRODUCT",ee="UPLOAD_ATTR_IMAGE",te="RESET_UPLOAD_A_IMAGE",ae="DELETE_ATTR_IMAGE",ne="GENERATE_QR",ce="GET_ANALYTICS",ie="ADD_ANALYTIC",oe=function(e){return"".concat(e,"_PENDING")},re=function(e){return"".concat(e,"_FULFILLED")},le=function(e){return"".concat(e,"_REJECTED")},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t={string:"",object:{},array:[]};return t[e]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"state",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"data";return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x(t,se(a)),o=arguments.length>1?arguments[1]:void 0;switch(o.type){case oe(e):var r=Object(p.a)(Object(p.a)({},i),{},{loaded:!1,loading:!0});return n&&(r=Object(p.a)(Object(p.a)({},r),{},Object(g.a)({},t,se(a)))),r;case re(e):return Object(p.a)(Object(p.a)({},i),{},Object(g.a)({loading:!1,loaded:!0},t,o.payload.data[c]));case le(e):default:return Object(p.a)(Object(p.a)({},i),{},{loading:!1})}}},ue=Object(b.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("userInfo",{user:{}}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(f):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(f):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,userInfo:t.payload.data.data});case v:return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,userInfo:{user:{}}});case le(f):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("userInfo",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(C):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(C):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,userInfo:t.payload.data.data});case le(C):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("users",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(y):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(y):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,users:t.payload.data.data});case le(y):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},passwordSet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(S):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(S):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(S):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(D):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(D):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(D):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectsGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("projects",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(A):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(A):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,projects:t.payload.data.data});case le(A):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(T):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(T):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(T):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},quoteAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(_):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(_):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(_):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},quotesGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("quotes",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(W):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(W):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,quotes:t.payload.data.data});case le(W):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},quoteEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(M):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(M):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(M):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},invoicesGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("invoices",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(B):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(B):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,invoices:t.payload.data.data});case le(B):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},invoiceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(z):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(z):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(z):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},subscriptionsGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("subscriptions",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(q):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(q):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,subscriptions:t.payload.data.data});case le(q):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("counts",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(G):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(G):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,counts:t.payload.data.data});case le(G):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},userEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(N):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(N):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:t.payload.data.message});case le(N):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},userRm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(w):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(w):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:t.payload.data.message});case le(w):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},profileEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("userInfo",{user:{}}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(I):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(I):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,userInfo:t.payload.data.data});case le(I):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},linkSend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(k):return Object(p.a)(Object(p.a)({},e),{},{loading:!0,loaded:!1});case re(k):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(k):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},pwdReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("message",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(E):return Object(p.a)(Object(p.a)({},e),{},{loading:!0,loaded:!1});case re(E):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,message:"Success"});case le(E):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},historiesGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("histories",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(P):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(P):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,histories:t.payload.data.data});case le(P):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},notifsGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("notifs",[]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(Y):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(Y):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,notifs:t.payload.data.data});case le(Y):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},notifsCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("count",0),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(V):return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case re(V):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,count:t.payload.data.data});case le(V):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},projectGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("project",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(R):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(R):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,project:t.payload.data.data});case le(R):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},logAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("log",{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(F):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(F):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,log:t.payload.data.data});case le(F):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},fileUpload:de(H,"filePath","string"),productAdd:de($,"product","object"),productsGet:de(J,"products","array"),productImg:de(Q,"image","object"),productEdit:de(Z,"message","string"),attrUpdate:de(K,"message","string"),productGet:de(X,"product","object",!0),attrImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("fileName",""),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe(ee):return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,loading:!0});case re(ee):return Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,fileName:t.payload.data.data});case te:return Object(p.a)(Object(p.a)({},e),{},{loaded:!1,fileName:""});case le(ee):default:return Object(p.a)(Object(p.a)({},e),{},{loading:!1})}},imgAttrDel:de(ae,"deletedFile","string"),projectAddProd:de(L,"message","string",!0),projectProdsGet:de(U,"projProds","array"),analyticsGet:de(ce,"analytics","array"),analyticAdd:de(ie,"analytic","object",!0),qrGenerate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("qr",""),t=arguments.length>1?arguments[1]:void 0;return t.type===ne?Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0,qr:t.payload}):Object(p.a)(Object(p.a)({},e),{},{loading:!1})}}),je=a(485),be=a.n(je),me=function(e){return Object(d.b)(e,{type:d.b.TYPE.ERROR,position:d.b.POSITION.BOTTOM_RIGHT,toastId:13})},he=function(e){return Object(d.b)(e,{type:d.b.TYPE.DEFAULT,position:d.b.POSITION.BOTTOM_LEFT,toastId:13})},Oe=function(){return function(e){return function(t){return be()(t.payload)?t.meta&&t.meta.localError?e(t):e(t).catch((function(e){var t="";if(e.response){var a=e.response.data,n=a.error,c=a.message;t=n||c}else t=e.message;var i=Array.isArray(t)?t[0]:t;me(i)})):e(t)}}},pe={login:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{user:{}}}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=!1,a=[Oe,m.a,h.a],n=t?Object(O.composeWithDevTools)(b.applyMiddleware.apply(void 0,a)):b.applyMiddleware.apply(void 0,a),c=[n],i=b.compose.apply(void 0,c),o=Object(b.createStore)(ue,e,i);return o}(),xe=a(672),fe=a(547),ve=a(545),ye=a(546),Ce=a(50),Se=a(904),Ne=a(548),we=a(487),Ie=a.n(we),ke=a(128),Ee=a(1),De=function(e){var t=e.counts;return Object(Ee.jsx)(ve.a,{sx:{height:"100%"},children:Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(Ee.jsxs)(fe.a,{item:!0,children:[Object(Ee.jsx)(Ce.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"Subscriptions"}),Object(Ee.jsx)(Ce.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(Ee.jsx)(fe.a,{item:!0,children:Object(Ee.jsx)(Se.a,{sx:{backgroundColor:ke.a[600],height:56,width:56},children:Object(Ee.jsx)(Ie.a,{})})})]}),Object(Ee.jsx)(Ne.a,{sx:{pt:2,display:"flex",alignItems:"center"}})]})})},Te=a(131),Ae=a(221),Pe=a.n(Ae),Re=function(e){var t=e.counts;return Object(Ee.jsx)(ve.a,{children:Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(Ee.jsxs)(fe.a,{item:!0,children:[Object(Ee.jsx)(Ce.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TOTAL CUSTOMERS"}),Object(Ee.jsx)(Ce.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(Ee.jsx)(fe.a,{item:!0,children:Object(Ee.jsx)(Se.a,{sx:{backgroundColor:Te.a[600],height:56,width:56},children:Object(Ee.jsx)(Pe.a,{})})})]}),Object(Ee.jsx)(Ne.a,{sx:{alignItems:"center",display:"flex",pt:2}})]})})},Fe=function(e){var t=e.counts;return Object(Ee.jsx)(ve.a,{children:Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(Ee.jsxs)(fe.a,{item:!0,children:[Object(Ee.jsx)(Ce.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TOTAL PROJECTS"}),Object(Ee.jsx)(Ce.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(Ee.jsx)(fe.a,{item:!0,children:Object(Ee.jsx)(Se.a,{sx:{backgroundColor:Te.a[600],height:56,width:56}})})]}),Object(Ee.jsx)(Ne.a,{sx:{alignItems:"center",display:"flex",pt:2}})]})})},Le=function(e){var t=e.counts;return Object(Ee.jsx)(ve.a,{children:Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(Ee.jsxs)(fe.a,{item:!0,children:[Object(Ee.jsx)(Ce.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"TOTAL PROPOSALS"}),Object(Ee.jsx)(Ce.a,{color:"textPrimary",variant:"h3",children:t})]}),Object(Ee.jsx)(fe.a,{item:!0,children:Object(Ee.jsx)(Se.a,{sx:{backgroundColor:Te.a[600],height:56,width:56},children:Object(Ee.jsx)(Pe.a,{})})})]}),Object(Ee.jsx)(Ne.a,{sx:{alignItems:"center",display:"flex",pt:2}})]})})},Ue=a(61),_e="userInfo",Me="".concat("https://cube.arinnovations.io/","api/v1/invoice"),We="".concat("https://cube.arinnovations.io/","api/v1/files"),Be="".concat("https://cube.arinnovations.io/","api/v1/images/"),ze="https://cube.arinnovations.io",qe=a(8),Ge=a(302),Ye=a.n(Ge),Ve=JSON.parse(localStorage.getItem(_e)),He="";Ve&&(He=Ve.token);var $e=Ye.a.create({baseURL:"".concat("https://cube.arinnovations.io/","api/v1"),headers:{Authorization:"Bearer ".concat(He)}}),Je=(Ye.a.create({baseURL:"https://api.qrserver.com/v1"}),"/project/"),Qe=function(e){var t=e.status,a=e.clientId,n="";t&&(n+="status=".concat(t,"&")),a&&(n+="client=".concat(a,"&")),ge.dispatch({type:A,payload:$e.get("".concat(Je,"?").concat(n))})},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ge.dispatch({type:P,payload:$e.get("".concat(Je+e,"/histories"))})},Ke=function(){return Object(Ee.jsxs)("div",{className:"loading text-center",children:[Object(Ee.jsx)("i",{className:"fa fa-spinner fa-spin"})," Loading..."]})},Xe=Ke,et=a(13),tt=a(670),at=a(671),nt=a(304),ct=a(573),it=a(954),ot=a(955),rt=a(956),lt=a(957),st=a(400),dt=a(19),ut=Object(st.a)((function(e){return{grow:{flexGrow:1},appBar:{backgroundColor:"#8967fc"},menuButton:{marginRight:e.spacing(2)},title:Object(g.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(dt.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(dt.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(g.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(g.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(g.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),jt=a(27),bt=a(160),mt=a(266),ht=a(267),Ot=["_id"],pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="/auth/users";e&&(t+="?role=".concat(e)),ge.dispatch({type:y,payload:$e.get(t)})},gt=function(e){ge.dispatch({type:I,payload:$e.patch("/auth/edit-profile",e)})},xt="primary-search-account-menu",ft=function(e){var t=e.anchorEl,a=e.isMenuOpen,n=e.handleMenuClose,c=e.user,i=[{link:"analytics",title:"Analytics"},{link:"products",title:"3D assets"},{link:"projects",title:"Projects"},{link:"quotes",title:"Proposals"},{link:"invoices",title:"Invoices"},{link:"subscriptions",title:"Subscriptions"},{link:"profile",title:"My profile"}];return c&&"Client"!==c.role&&(i=[{link:"customers",title:"Customers"}].concat(Object(jt.a)(i))),Object(Ee.jsxs)(bt.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:xt,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:n,children:[i.map((function(e,t){return Object(Ee.jsx)(mt.a,{onClick:n,component:Ue.a,to:"/dashboard/".concat(e.link),children:e.title},t)})),Object(Ee.jsx)(ht.a,{}),Object(Ee.jsx)(mt.a,{onClick:function(){ge.dispatch({type:v})},children:"Sign Out"})]})},vt="primary-search-account-menu-mobile",yt=function(e){var t=e.mobileMoreAnchorEl,a=e.isMobileMenuOpen,n=e.handleMobileMenuClose,c=e.handleNavMenuOpen,i=e.user,o=e.notificationsCount,r=void 0===o?0:o;return Object(Ee.jsxs)(bt.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:vt,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:n,children:[Object(Ee.jsxs)(mt.a,{children:[Object(Ee.jsx)(nt.a,{"aria-label":"show ".concat(r," new notifications"),color:"inherit","aria-controls":"notifications-menu","aria-haspopup":"true",children:Object(Ee.jsx)(ct.a,{badgeContent:r,color:"secondary",children:Object(Ee.jsx)(it.a,{})})}),Object(Ee.jsx)("p",{children:"Notifications"})]}),Boolean(null===i||void 0===i?void 0:i.fullName)&&Object(Ee.jsxs)(mt.a,{onClick:c,children:[Object(Ee.jsx)(nt.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(Ee.jsx)(ot.a,{})}),Object(Ee.jsx)("p",{children:i.fullName})]})]})},Ct=a(492),St=a(669),Nt=a(32),wt=a.n(Nt),It=a(30),kt=a(494),Et=a.n(kt),Dt=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c="You";return a.role===n.userRole?c:"Client"===a.role?"".concat(null===(e=n.createdBy)||void 0===e?void 0:e.fullName,"[").concat(n.userRole,"]"):null===(t=n.createdBy)||void 0===t?void 0:t.companyName},Tt=function(e){return Et()(Object(It.convertToRaw)(null===e||void 0===e?void 0:e.getCurrentContent()))},At="notifications-menu",Pt=function(e){var t=e.anchorEl,a=e.onClose,n=e.user,c=Object(r.b)((function(e){return e})).notifsGet,i=c.notifs,o=c.loading,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/dashboard/projects/".concat(e.project);return e.quote&&(t="/dashboard/quotes"),t};return Object(Ee.jsx)(bt.a,{id:At,anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:a,children:o?Object(Ee.jsx)(Xe,{}):i.length?i.map((function(e,t){return Object(Ee.jsx)(mt.a,{onClick:a,component:Ue.a,to:l(e),children:Object(Ee.jsx)(Ct.a,{alignItems:"flex-start",children:Object(Ee.jsx)(St.a,{primary:e.description,secondary:Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(Ce.a,{component:"span",variant:"body2",style:{display:"inline"},color:"textPrimary",children:["(",Dt(n,e),")"]})," \u2014 ".concat(wt()(e.createdAt).fromNow())]})})})},t)})):Object(Ee.jsx)(mt.a,{onClick:a,children:" No new notification"})})},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="notifications",a=Y;""!==e&&(t+="?type=count",a=V),ge.dispatch({type:a,payload:$e.get("/home/".concat(t))})},Ft=function(e){var t=e.children,a=ut(),i=c.a.useState(null),o=Object(et.a)(i,2),l=o[0],s=o[1],d=c.a.useState(null),u=Object(et.a)(d,2),j=u[0],b=u[1],m=c.a.useState(null),h=Object(et.a)(m,2),O=h[0],p=h[1],g=Object(r.b)((function(e){return e})),x=g.login.userInfo.user,f=g.notifsCount.count;Object(n.useEffect)((function(){Rt("count")}),[]);var v=Boolean(l),y=Boolean(j),C=function(e){b(null),s(e.currentTarget)},S=function(){b(null)};return Object(Ee.jsxs)("div",{className:a.grow,children:[Object(Ee.jsx)(tt.a,{position:"static",className:a.appBar,children:Object(Ee.jsxs)(at.a,{children:[Object(Ee.jsx)(Ce.a,{className:a.title,variant:"h4",color:"inherit",noWrap:!0,children:"Augmented Reality Innovations"}),Object(Ee.jsx)("div",{className:a.grow}),Boolean(null===x||void 0===x?void 0:x.fullName)&&Object(Ee.jsxs)("div",{className:a.sectionDesktop,children:[Object(Ee.jsxs)(nt.a,{"aria-label":"show ".concat(f," new notifications"),color:"inherit","aria-controls":At,"aria-haspopup":"true",onClick:function(e){var t=e.currentTarget;p(t),Rt()},children:[Object(Ee.jsx)(ct.a,{badgeContent:f,color:"secondary",children:Object(Ee.jsx)(it.a,{})}),"Notifications"]}),Object(Ee.jsxs)(nt.a,{edge:"end","aria-label":"account of current user","aria-controls":xt,"aria-haspopup":"true",onClick:C,color:"inherit",children:[Object(Ee.jsx)(ot.a,{}),x.firstName,Object(Ee.jsx)(rt.a,{})]})]}),Object(Ee.jsx)("div",{className:a.sectionMobile,children:Object(Ee.jsx)(nt.a,{"aria-label":"show more","aria-controls":vt,"aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},color:"inherit",children:Object(Ee.jsx)(lt.a,{})})})]})}),Object(Ee.jsx)(ft,{anchorEl:l,isMenuOpen:v,handleMenuClose:function(){s(null),S()},user:x}),Object(Ee.jsx)(yt,{mobileMoreAnchorEl:j,isMobileMenuOpen:y,handleMobileMenuClose:S,handleNavMenuOpen:C,user:x,notificationsCount:f}),Object(Ee.jsx)(Pt,{anchorEl:O,onClose:function(){return p(null)},user:x}),t]})},Lt=function(e){var t={Admin:{lg:3,sm:6,xl:3,xs:12},Manager:{lg:3,sm:6,xl:3,xs:12},Client:{lg:4,sm:6,xl:4,xs:12}};return e?t[e]:t.Client},Ut=a.p+"static/media/ari_cube.2edefd08.png",_t={password:"",confirmPassword:""},Mt=function(e){var t=e.history,a=e.match,c=Object(n.useState)(_t),i=Object(et.a)(c,2),o=i[0],l=i[1],s=Object(r.b)((function(e){return e})),d=s.passwordSet,u=d.loaded,j=d.loading,b=s.pwdReset,m=b.loaded,h=b.loading;Object(n.useEffect)((function(){(u||m)&&(he("The password has been set"),setTimeout((function(){t.replace("/")}),3e3))}),[t,u,m]);var O=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;l(Object(p.a)(Object(p.a)({},o),{},Object(g.a)({},a,n)))};return Object(Ee.jsx)("div",{children:Object(Ee.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),delete o.confirmPassword,o.token=a.params.token,"reset"===a.params.action?function(e){ge.dispatch({type:E,payload:$e.post("/auth/reset-password",e)})}(o):function(e){ge.dispatch({type:S,payload:$e.patch("/auth/set-password",e)})}(o)},children:[Object(Ee.jsx)("div",{children:Object(Ee.jsx)("img",{src:Ut,alt:"#",className:"logo"})}),Object(Ee.jsx)("div",{children:Object(Ee.jsx)("h1",{children:"Set a new password"})}),(j||h)&&Object(Ee.jsx)(Xe,{}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("label",{htmlFor:"pasword",children:"New Password"}),Object(Ee.jsx)("input",{type:"password",id:"password",name:"password",className:"login-input",placeholder:"Enter password",required:!0,onChange:O,value:o.password})]}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm password"}),Object(Ee.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",className:"login-input",placeholder:"Confirm password",required:!0,onChange:O,value:o.confirmPassword})]}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("label",{}),Object(Ee.jsx)("button",{className:"login-input btn-login primary",type:"submit",disabled:j,children:"Set password"})]})]})})},Wt=a(495),Bt=a.n(Wt),zt=a(224),qt=a.n(zt),Gt=Object(st.a)((function(e){return{root:{},row:{height:"42px",display:"flex",alignItems:"center",marginTop:e.spacing(1)},spacer:{flexGrow:1},importButton:{marginRight:e.spacing(1)},exportButton:{marginRight:e.spacing(1)},searchInput:{marginRight:e.spacing(1)},content:{marginTop:e.spacing(2)},tableContent:{padding:0},inner:{},nameContainer:{display:"flex",alignItems:"center"},avatar:{marginRight:e.spacing(2)},actions:{justifyContent:"flex-end"}}})),Yt=a(675),Vt=a(676),Ht=a(677),$t=a(678),Jt=a(679),Qt=a(680),Zt=a(681),Kt=a(11),Xt=a(17),ea=a(496),ta=a.n(ea),aa=["pageCount","pageRangeDisplayed","marginPagesDisplayed","onPageChange","className"],na=Object(st.a)((function(e){return{root:Object(p.a)(Object(p.a)({},e.typography.button),{},{listStyle:"none",userSelect:"none",display:"flex",alignItems:"center"}),active:{},activeLink:{},break:{},breakLink:{},disabled:{},next:{marginLeft:e.spacing(1)},nextLink:{padding:"6px 16px",outline:"none",cursor:"pointer",borderRadius:4,"&:hover":{backgroundColor:Xt.a.blueGrey[50]}},page:{},pageLink:{color:e.palette.text.secondary,padding:e.spacing(1),outline:"none",cursor:"pointer",width:40,height:40,borderRadius:"50%",display:"block",textAlign:"center","&:hover":{backgroundColor:Xt.a.blueGrey[50],color:e.palette.text.primary},"&$activeLink":{backgroundColor:Xt.a.blueGrey[50],color:e.palette.text.primary}},previous:{marginRight:e.spacing(1)},previousLink:{padding:"6px 16px",outline:"none",cursor:"pointer",borderRadius:4,"&:hover":{backgroundColor:Xt.a.blueGrey[50]}}}})),ca=function(e){var t=e.pageCount,a=void 0===t?0:t,n=e.pageRangeDisplayed,c=void 0===n?2:n,i=e.marginPagesDisplayed,o=void 0===i?1:i,r=e.onPageChange,l=(e.className,Object(qe.a)(e,aa)),s=na();return a>0&&Object(Ee.jsx)(ta.a,Object(p.a)({activeClassName:s.active,activeLinkClassName:s.activeLink,breakClassName:s.break,breakLabel:"...",breakLinkClassName:s.breakLink,containerClassName:s.root,disabledClassName:s.disabled,marginPagesDisplayed:o,nextClassName:s.next,nextLabel:"next",nextLinkClassName:s.nextLink,onPageChange:r,pageClassName:s.page,pageCount:a,pageLinkClassName:s.pageLink,pageRangeDisplayed:c,previousClassName:s.previous,previousLabel:"previous",previousLinkClassName:s.previousLink,subContainerClassName:"pages pagination"},l))},ia=function(e){var t=e.message,a=void 0===t?"No data to display":t;return Object(Ee.jsx)(Ce.a,{align:"center",variant:"h5",children:a})},oa=Object(Kt.a)((function(e){return{head:{backgroundColor:"#8967fc",color:e.palette.common.white,fontSize:16},body:{fontSize:16}}}))(Yt.a),ra=Object(Kt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Vt.a),la=function(e){var t=e.data,a=void 0===t?[]:t,n=e.tableTitle,c=void 0===n?"":n,i=(e.dataCount,e.pageCount),o=void 0===i?0:i,r=(e.page,e.columns),l=void 0===r?[]:r,s=e.selectedData,d=void 0===s?[]:s,u=e.loading,j=void 0!==u&&u,b=e.withPagination,m=void 0===b||b,h=e.handlePageChange,O=e.size,p=void 0===O?"small":O,g=Gt(),x=function(e,t){return t.content?t.content(e):qt.a.get(e,t.path)};return Object(Ee.jsx)("div",{className:g.root,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:c}),Object(Ee.jsx)(ht.a,{}),Object(Ee.jsx)(ye.a,{className:g.tableContent,children:j?Object(Ee.jsx)(Ke,{}):a.length?Object(Ee.jsx)(Bt.a,{children:Object(Ee.jsxs)($t.a,{size:p,children:[Object(Ee.jsx)(Jt.a,{children:Object(Ee.jsx)(ra,{children:l.map((function(e,t){var a=e.label;return Object(Ee.jsx)(oa,{children:a},t)}))})}),Object(Ee.jsx)(Qt.a,{children:a.map((function(e,t){return Object(Ee.jsx)(ra,{className:g.tableRow,hover:!0,selected:-1!==d.indexOf(e.id),children:l.map((function(t,a){return Object(Ee.jsx)(oa,{children:x(e,t)},a)}))},t)}))})]})}):Object(Ee.jsx)(ia,{})}),0!==o&&m&&Object(Ee.jsx)(Zt.a,{className:g.actions,children:Object(Ee.jsx)(ca,{marginPagesDisplayed:2,onPageChange:h,pageCount:o,pageRangeDisplayed:1})})]})})},sa=a(165),da=a(52),ua=a(975),ja=a(132),ba=a(277),ma=a(500),ha=a(501),Oa=a(528),pa=a(213),ga=a(958),xa=a(166),fa=Object(st.a)((function(e){return{root:{padding:e.spacing(3)},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#8967fc"},input:{fontSize:16},form:{width:"100%",marginTop:e.spacing(2),color:"black",fontSize:16},submit:{margin:e.spacing(3,0,2),backgroundColor:"#8967fc",borderRadius:5,float:"left",maxWidth:"100%",color:"white",fontSize:16,"&:hover":{backgroundColor:"#8967fc",color:"#FFFFFF"}},inline:{display:"inline"}}})),va=a(497),ya=(a(682),Object(st.a)((function(e){return{root:{fontFamily:e.typography.fontFamily,"& .rdw-option-wrapper":{background:"transparent",border:"none",minWidth:26,padding:6,"&:hover":{boxShadow:"none",backgroundColor:e.palette.action.hover}},"& .rdw-option-active":{boxShadow:"none",backgroundColor:e.palette.action.selected},"& .rdw-dropdown-wrapper":{boxShadow:"none",background:"transparent"},"& .rdw-dropdown-optionwrapper":{overflowY:"auto",boxShadow:e.shadows[10],padding:e.spacing(1)}},toolbar:{marginBottom:0,borderLeft:"none",borderTop:"none",borderRight:"none",borderBottom:"1px solid ".concat(e.palette.divider),background:"transparent"},editor:{padding:e.spacing(2),height:100,color:e.palette.text.primary}}}))),Ca=function(e){var t=e.setEditorState,a=e.editorState,n=ya();return Object(Ee.jsx)(va.Editor,{editorClassName:n.editor,editorState:a,onEditorStateChange:t,toolbar:{options:["inline","blockType","fontSize","fontFamily","list","textAlign","history"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0}},toolbarClassName:n.toolbar,wrapperClassName:n.root})},Sa={name:"",type:"",nOfItems:"1",startDate:wt()().format("YYYY-MM-DD"),dueDate:wt()().format("YYYY-MM-DD"),budget:"",status:"pending",description:"",userId:"",managerId:""},Na=["pending","approved","canceled"],wa=[{name:"Cube Platform",description:"I want to publish and manage my products in 3D and AR myself"},{name:"3D modeling",description:"I need help with creating my products in 3D"},{name:"3D Viewer",description:"I want to present my product in 3D on a website"},{name:"3D Configurator",description:"I want to showcase my products in specific configurations"},{name:"AR",description:"I want to showcase my products in AR"}],Ia=function(e){var t,a=e.action,c=void 0===a?"add":a,i=e.currentItem,o=void 0===i?null:i,l=fa(),s=Object(n.useState)(Sa),d=Object(et.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(It.EditorState.createEmpty()),m=Object(et.a)(b,2),h=m[0],O=m[1],x=Object(r.b)((function(e){return e})),f=x.projectAdd,v=f.loading,y=f.loaded,C=x.projectEdit,S=C.loading,N=C.loaded,w=x.userList.users,I=x.login.userInfo.user;Object(n.useEffect)((function(){pt("Manager")}),[]),Object(n.useEffect)((function(){if(y||N){var e=Object(p.a)({},Sa);j(e),O(It.EditorState.createEmpty())}}),[y,N,I]),Object(n.useEffect)((function(){if(o&&"view"!==c){var e=o.status,t=o.name,a=o.description,n=o.type,i=o.nOfItems,r=o.startDate,l=o.dueDate,s=o.budget,d=o.manager,u=Object(xa.a)(a);j({name:t,status:e,type:n,nOfItems:i,startDate:wt()(r).format("YYYY-MM-DD"),dueDate:wt()(l).format("YYYY-MM-DD"),budget:s,managerId:d}),O(It.EditorState.createWithContent(u))}}),[o,c]);var k=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;j(Object(p.a)(Object(p.a)({},u),{},Object(g.a)({},a,n)))};return Object(Ee.jsx)(ve.a,{component:"main",className:l.root,children:Object(Ee.jsxs)("div",{className:l.paper,children:[Object(Ee.jsx)(Se.a,{className:l.avatar,children:Object(Ee.jsx)(ga.a,{})}),Object(Ee.jsx)(Ce.a,{component:"h1",variant:"h4",children:o&&"view"!==c?'Update "'.concat(null===o||void 0===o||null===(t=o.name)||void 0===t?void 0:t.toUpperCase(),'" project'):"Add a new project"}),(v||S)&&Object(Ee.jsx)(Ke,{}),Object(Ee.jsxs)("form",{className:l.form,onSubmit:function(e){var t,a;e.preventDefault(),u.description=Tt(h),"add"!==c&&o?(t=u,a=o._id,ge.dispatch({type:T,payload:$e.patch(Je+a,t)})):function(e){ge.dispatch({type:D,payload:$e.post(Je,e)})}(u)},children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{className:l.input,name:"name",variant:"outlined",fullWidth:!0,label:"Project name",onChange:k,value:u.name,autoFocus:!0,disabled:"Client"!==I.role})}),"Admin"===I.role&&"changePm"===c&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"project-manager",children:"Project manager"}),Object(Ee.jsxs)(Oa.a,{labelId:"project-manager",value:u.managerId,name:"managerId",onChange:k,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),w.map((function(e,t){var a=e._id,n=e.fullName;return Object(Ee.jsx)(mt.a,{value:a,children:n},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"project-type",children:"Project type"}),Object(Ee.jsxs)(Oa.a,{labelId:"project-type",value:u.type,name:"type",onChange:k,disabled:"Client"!==I.role,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),wa.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e.name,children:"".concat(e.name," - ").concat(e.description)},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"project-status",children:"Status"}),Object(Ee.jsxs)(Oa.a,{labelId:"project-status",value:u.status,name:"status",onChange:k,disabled:"change"!==c,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),Na.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(Ee.jsx)(da.a,{utils:sa.a,children:Object(Ee.jsx)(ua.a,{label:"Start Date",inputVariant:"outlined",value:u.startDate,InputAdornmentProps:{position:"start"},format:"yyyy-MM-dd",views:["year","month","date"],onChange:function(e){j(Object(p.a)(Object(p.a)({},u),{},{startDate:e}))},disabled:"Client"!==I.role})})}),Object(Ee.jsx)(fe.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(Ee.jsx)(da.a,{utils:sa.a,children:Object(Ee.jsx)(ua.a,{label:"Due Date",inputVariant:"outlined",value:u.dueDate,InputAdornmentProps:{position:"start"},format:"yyyy-MM-dd",views:["year","month","date"],disabled:"Client"!==I.role,onChange:function(e){j(Object(p.a)(Object(p.a)({},u),{},{dueDate:e}))}})})}),Object(Ee.jsx)(fe.a,{item:!0,lg:4,md:4,xl:4,xs:12,children:Object(Ee.jsx)(ba.a,{className:l.input,variant:"outlined",fullWidth:!0,type:"number",name:"nOfItems",label:"Number of items",value:u.nOfItems,onChange:k,disabled:"Client"!==I.role})}),Object(Ee.jsx)(fe.a,{item:!0,lg:8,md:8,xl:8,xs:12,children:Object(Ee.jsx)(ja.a,{className:l.input,value:u.budget,onValueChange:function(e){var t=e.floatValue;return j(Object(p.a)(Object(p.a)({},u),{},{budget:t}))},prefix:"$",thousandSeparator:!0,customInput:ba.a,fullWidth:!0,variant:"outlined",label:"Budget(in USD)",disabled:"Client"!==I.role})}),"Client"===I.role&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(Ca,{editorState:h,setEditorState:O})})]}),Object(Ee.jsx)(Zt.a,{children:"add"===c?Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:v,children:"Save"}):Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:S,children:"Update the project"})})]})]})})},ka=a(687),Ea=a(688),Da=a(959),Ta=a(960),Aa=a(961),Pa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"Client"!==e.role?[{content:function(e){var t;return Object(Ee.jsx)(Ce.a,{children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName})},label:"Project Owner"}]:[]},Ra=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{content:function(e){return Object(Ee.jsx)(Ct.a,{children:Object(Ee.jsx)(St.a,{primary:e.name,secondary:e.type})})},label:"Project"}].concat(Object(jt.a)(Pa(t)),[{path:"type",label:"Type"},{path:"status",label:"Status"},{content:function(e){var t;return Object(Ee.jsxs)(Ce.a,{children:["$ ",null===(t=e.budget)||void 0===t?void 0:t.toLocaleString("en-US")]})},label:"Budget"},{content:function(a){return Object(Ee.jsxs)(ka.a,{variant:"outlined",size:"small",children:[Object(Ee.jsx)(Ea.a,{title:"View",children:Object(Ee.jsxs)(nt.a,{"aria-label":"View",color:"secondary",component:Ue.a,to:"/dashboard/projects/".concat(a._id),children:[Object(Ee.jsx)(Da.a,{})," View"]})}),"Client"===t.role&&Object(Ee.jsx)(Ea.a,{title:"Edit",children:Object(Ee.jsx)(nt.a,{"aria-label":"Edit",color:"secondary",disabled:"approved"===a.status,onClick:function(){return e(a,"edit")},children:Object(Ee.jsx)(Ta.a,{})})}),"Client"!==t.role&&Object(Ee.jsx)(Ea.a,{title:"Change status",children:Object(Ee.jsx)(nt.a,{"aria-label":"Change status",color:"default",disabled:"approved"===a.status,onClick:function(){return e(a,"change")},children:Object(Ee.jsx)(Aa.a,{})})}),"Admin"===t.role&&Object(Ee.jsx)(Ea.a,{title:"Change project manager",children:Object(Ee.jsx)(nt.a,{"aria-label":"Change project manager",color:"default",disabled:"approved"===a.status,onClick:function(){return e(a,"changePm")},children:"Change PM"})})]})},label:"Actions"}])},Fa=a(962),La=function(e){return[{path:"fullName",label:"Names"},{path:"email",label:"Email"},{path:"phoneNumber",label:"Phone number"},{path:"role",label:"User role"},{path:"companyName",label:"Company"},{content:function(t){return Object(Ee.jsxs)(ka.a,{variant:"outlined",size:"small",children:[Object(Ee.jsx)(Ea.a,{title:"View",children:Object(Ee.jsxs)(nt.a,{"aria-label":"View",color:"secondary",onClick:function(){return e(t,"view")},children:[Object(Ee.jsx)(Da.a,{})," View"]})}),Object(Ee.jsx)(Ea.a,{title:"Edit",children:Object(Ee.jsx)(nt.a,{"aria-label":"Edit",color:"secondary",onClick:function(){return e(t,"edit")},children:Object(Ee.jsx)(Ta.a,{})})}),Object(Ee.jsx)(Ea.a,{title:"Delete",children:Object(Ee.jsx)(nt.a,{"aria-label":"Delete",color:"danger",onClick:function(){return e(t,"delete")},children:Object(Ee.jsx)(Fa.a,{})})})]})},label:"Actions"}]},Ua=a(963),_a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{content:function(e){var t,a;return Object(Ee.jsx)(Ct.a,{children:Object(Ee.jsx)(St.a,{primary:null===(t=e.project)||void 0===t?void 0:t.name,secondary:null===(a=e.project)||void 0===a?void 0:a.type})})},label:"Project"},{content:function(e){var t;return Object(Ee.jsx)(Ce.a,{children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName})},label:"Project owner"},{content:function(e){var t;return Object(Ee.jsxs)(Ce.a,{children:["$ ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-US")]})},label:"Amount"},{path:"status",label:"Status"},{content:function(e){return Object(Ee.jsx)(Ce.a,{children:"pending"===e.status?wt()(e.due_date).fromNow():"Already paid"})},label:"Due data"},{content:function(a){return"pending"===a.status&&"Client"!==t.role?Object(Ee.jsx)(ka.a,{variant:"outlined",size:"small",children:Object(Ee.jsx)(Ea.a,{title:"Approve payment",children:Object(Ee.jsxs)(nt.a,{"aria-label":"Approve payment",color:"default",onClick:function(){return e(a,"change")},children:[Object(Ee.jsx)(Aa.a,{})," Approve payment"]})})}):Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(Ce.a,{variant:"caption",color:"error",children:"No action needed"}),Object(Ee.jsx)(Ea.a,{title:"Print invoice",children:Object(Ee.jsxs)(nt.a,{component:"a","aria-label":"Print invoice",color:"default",rel:"noreferrer",href:"".concat(Me,"/").concat(a._id),target:"_blank",size:"small",children:[Object(Ee.jsx)(Ua.a,{})," Download"]})})]})},label:"Actions"}]},Ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{content:function(e){var t,a;return Object(Ee.jsx)(Ct.a,{children:Object(Ee.jsx)(St.a,{primary:null===(t=e.project)||void 0===t?void 0:t.name,secondary:null===(a=e.project)||void 0===a?void 0:a.type})})},label:"Project"}].concat(Object(jt.a)(Pa(e)),[{content:function(e){return Object(Ee.jsx)(Ce.a,{children:e.billingCycle})},label:"Billing cycle"},{content:function(e){var t,a;return Object(Ee.jsxs)(Ce.a,{children:["$ ",null===(t=e.quote)||void 0===t||null===(a=t.amount)||void 0===a?void 0:a.toLocaleString("en-US")]})},label:"Amount"},{content:function(e){return Object(Ee.jsx)(Ce.a,{children:wt()(e.startDate).fromNow()})},label:"Start date"},{content:function(e){return Object(Ee.jsx)(Ce.a,{children:e.expirationDate?wt()(e.expirationDate).fromNow():"One time pay"})},label:"Expiration date"},{path:"status",label:"Status"}])},Wa=a(905),Ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=(t-1)*a;return qt()(e).slice(n).take(a).value()},za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{pageSize:e,pageNumber:t}},qa=a(93),Ga=a.n(qa),Ya=a(755),Va=a(683),Ha=a(756),$a=a(684),Ja=a(491),Qa=a(906),Za=a(758),Ka=a(759),Xa=a(685),en=a(966),tn=(a(454),a(228)),an=a.n(tn),nn=a(229),cn=["button"],on=Object(n.forwardRef)((function(e,t){return Object(Ee.jsx)(Ya.a,Object(p.a)({direction:"up",ref:t},e))})),rn=Object(st.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}})),ln=function(e){var t,a,c=e.open,i=void 0!==c&&c,o=e.setOpen,l=e.currentItem,s=void 0===l?null:l,d=rn(),u=Object(n.useState)({name:""}),j=Object(et.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)({}),O=Object(et.a)(h,2),p=O[0],g=O[1],x=Object(r.b)((function(e){return e.historiesGet})),f=x.loading,v=x.histories;Object(n.useEffect)((function(){if(s){m(s),Ze(s._id);var e=wa.find((function(e){return e.name===s.type}));g(e)}}),[s]);var y=Object(nn.useBlogTextInfoContentStyles)(),C=y.button,S=Object(qe.a)(y,cn),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.invoice;return e.quote&&(t="".concat(e.quote,"?downloadType=quote")),t};return Object(Ee.jsxs)(Va.a,{open:i,TransitionComponent:on,keepMounted:!0,onClose:o,"aria-labelledby":"project-name","aria-describedby":"project-description",children:[Object(Ee.jsx)(Ha.a,{id:"project-name",children:"Project name: ".concat(b.name.toUpperCase())}),Object(Ee.jsx)($a.a,{children:Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsx)(an.a,{classes:S,overline:(null===(t=b.user)||void 0===t?void 0:t.firstName)&&"Created by: ".concat(b.user.firstName," ").concat(b.user.lastName)}),Object(Ee.jsx)(St.a,{primary:"Start: ".concat(wt()(b.startDate).format("YYYY-MM-DD"),", Due date: ").concat(wt()(b.dueDate).format("YYYY-MM-DD"))}),Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Project type:"}),Object(Ee.jsx)(Ct.a,{children:Object(Ee.jsx)(St.a,{primary:null===p||void 0===p?void 0:p.name,secondary:null===p||void 0===p?void 0:p.description})}),Object(Ee.jsxs)(Ce.a,{variant:"h4",children:["Number of items: ",b.nOfItems]}),Ga()(b.description),Object(Ee.jsxs)(pa.a,{className:C,children:["Budget: $",(null===(a=b.budget)||void 0===a?void 0:a.toLocaleString("en-US"))||0]}),f?Object(Ee.jsx)(Xe,{}):Object(Ee.jsx)(Ja.a,{children:v.map((function(e,t){return Object(Ee.jsxs)(Qa.a,{children:[Object(Ee.jsx)(Za.a,{expandIcon:Object(Ee.jsx)(rt.a,{}),"aria-controls":"panel".concat(t,"a-content"),id:"panel".concat(t,"a-header"),children:Object(Ee.jsxs)(Ct.a,{alignItems:"flex-start",children:[Object(Ee.jsx)(St.a,{primary:e.description,secondary:Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(Ce.a,{component:"span",variant:"body2",className:d.inline,color:"textPrimary",children:e.userRole})," \u2014 on ".concat(wt()(e.createdAt).format("MMM DD, YYYY @ HH:mm"))]})}),(e.invoice||e.quote)&&Object(Ee.jsx)(nt.a,{edge:"end",size:"small",component:"a","aria-label":"Print invoice",rel:"noreferrer",href:"".concat(Me,"/").concat(N(e)),target:"_blank",children:Object(Ee.jsx)(en.a,{})})]})}),Boolean(e.content)&&Object(Ee.jsx)(Ka.a,{children:Ga()(e.content)})]},t)}))})]})}),Object(Ee.jsx)(Xa.a,{children:Object(Ee.jsx)(pa.a,{onClick:o,color:"primary",children:"Close"})})]})},sn=a(760),dn=a(761),un=a(967),jn=a(968),bn=function(){ge.dispatch({type:W,payload:$e.get("/quote")})},mn=function(e,t){ge.dispatch({type:M,payload:$e.patch("/quote/".concat(t),e)})},hn=["project","user","updatedAt","createdAt","_id","__v"],On=["amount","customer"],pn={projectId:"",billingCycle:"Monthly",taxes:[],discount:"0",isFixed:!1,expiryDate:wt()().format("YYYY-MM-DD"),propasalText:"",customerNote:"",customer:""},gn={title:"",amount:""},xn=["Monthly","Yearly","OneTime"],fn=["Accepted","Declined"],vn=function(e){var t,a=e.action,c=void 0===a?"add":a,i=e.currentItem,o=void 0===i?null:i,l=fa(),s=Object(n.useState)(pn),d=Object(et.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(gn),m=Object(et.a)(b,2),h=m[0],O=m[1],x=Object(n.useState)(It.EditorState.createEmpty()),f=Object(et.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(It.EditorState.createEmpty()),S=Object(et.a)(C,2),N=S[0],w=S[1],I=Object(r.b)((function(e){return e})),k=I.quoteAdd,E=k.loading,D=k.loaded,T=I.quoteEdit,A=T.loading,P=T.loaded,R=I.projectsGet.projects,F=I.userList.users,L=I.login.userInfo.user;Object(n.useEffect)((function(){pt("Client")}),[]),Object(n.useEffect)((function(){u.customer&&Qe({clientId:u.customer})}),[u.customer]),Object(n.useEffect)((function(){(D||P)&&(j(pn),y(It.EditorState.createEmpty()),w(It.EditorState.createEmpty()))}),[D,P]),Object(n.useEffect)((function(){if(o){var e=o.project,t=o.user,a=(o.updatedAt,o.createdAt,o._id,o.__v,Object(qe.a)(o,hn)),n=e._id,c=t._id,i=wt()(o.expiryDate).format("YYYY-MM-DD");j(Object(p.a)(Object(p.a)({},a),{},{projectId:n,expiryDate:i,customer:c}));var r=Object(xa.a)(a.propasalText),l=Object(xa.a)(a.customerNote);y(It.EditorState.createWithContent(r)),w(It.EditorState.createWithContent(l))}}),[o]);var U=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;j((function(e){var t=Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n));return"customer"===a&&(t.projectId=""),t}))},M=function(e){var t=e.target,a=t.name,n=t.value;O((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n))}))};return Object(Ee.jsx)(ve.a,{component:"main",className:l.root,children:Object(Ee.jsxs)("div",{className:l.paper,children:[Object(Ee.jsx)(Se.a,{className:l.avatar,children:Object(Ee.jsx)(ga.a,{})}),Object(Ee.jsx)(Ce.a,{component:"h1",variant:"h4",children:o?'Update "'.concat(o.project.name.toUpperCase(),'" proposal'):"Add a new proposal"}),(E||A)&&Object(Ee.jsx)(Ke,{}),(o&&"items"!==c||"add"===c&&"Client"!==L.role)&&Object(Ee.jsxs)("form",{className:l.form,onSubmit:function(e){e.preventDefault(),u.propasalText=Tt(v),u.customerNote=Tt(N);u.amount,u.customer;var t,a=Object(qe.a)(u,On);"add"!==c&&o?mn(a,o._id):(t=a,ge.dispatch({type:_,payload:$e.post("/quote",t)}))},children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[("add"===c||"edit"===c)&&Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"customer-or-comp",children:"Customer or company"}),Object(Ee.jsxs)(Oa.a,{labelId:"customer-or-comp",value:u.customer,name:"customer",onChange:U,disabled:"Client"===L.role,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),F.map((function(e,t){return Object(Ee.jsxs)(mt.a,{value:e._id,children:[e.fullName,", ",e.companyName]},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"select-project",children:"Select project"}),Object(Ee.jsxs)(Oa.a,{labelId:"select-project",value:u.projectId,name:"projectId",onChange:U,disabled:!Boolean(u.customer),children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),R.map((function(e,t){var a=e._id,n=e.name,c=e.user;return Object(Ee.jsx)(mt.a,{value:a,children:"".concat(n," ---\x3e ").concat(null===c||void 0===c?void 0:c.fullName)},t)}))]})]})})]}),("add"===c||"edit"===c)&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"billing-cycle",children:"Billing cycle"}),Object(Ee.jsxs)(Oa.a,{labelId:"billing-cycle",value:u.billingCycle,name:"billingCycle",onChange:U,disabled:"change"===c,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),xn.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))]})]})}),("add"===c||"edit"===c)&&Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(da.a,{utils:sa.a,children:Object(Ee.jsx)(ua.a,{label:"Expiry Date",inputVariant:"outlined",fullWidth:!0,value:u.expiryDate,InputAdornmentProps:{position:"start"},format:"yyyy-MM-dd",views:["year","month","date"],onChange:function(e){return j((function(t){return Object(p.a)(Object(p.a)({},t),{},{expiryDate:e})}))},minDate:new Date})})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:8,lg:8,children:u.isFixed?Object(Ee.jsx)(ja.a,{className:l.input,value:u.discount,onValueChange:function(e){var t=e.floatValue;return j(Object(p.a)(Object(p.a)({},u),{},{discount:t}))},prefix:"$",thousandSeparator:!0,customInput:ba.a,fullWidth:!0,variant:"outlined",label:"Discount(in USD)"}):Object(Ee.jsx)(ba.a,{name:"discount",variant:"outlined",type:"number",fullWidth:!0,label:"Discount(in %)",onChange:U,value:u.discount})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:4,lg:4,children:Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(dn.a,{checked:u.isFixed,onChange:function(e){var t=e.target.checked;return j(Object(p.a)(Object(p.a)({},u),{},{isFixed:t}))}}),label:"Is fixed?",labelPlacement:"top"})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:5,lg:5,children:Object(Ee.jsx)(ba.a,{name:"title",variant:"outlined",fullWidth:!0,label:"Tax title",size:"small",onChange:M,value:h.title})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:5,lg:5,children:Object(Ee.jsx)(ba.a,{name:"amount",variant:"outlined",type:"number",fullWidth:!0,label:"Tax(in %)",size:"small",onChange:M,value:h.amount,disabled:!Boolean(h.title)})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:2,lg:2,children:Object(Ee.jsx)(pa.a,{variant:"contained",color:"primary",disabled:!Boolean(h.amount),onClick:function(){return function(){var e=Object(jt.a)(u.taxes),t=e.findIndex((function(e){return e.title===h.title}));t<0?e.push(h):(e[t].title=h.title,e[t].amount=h.amount),j((function(t){return Object(p.a)(Object(p.a)({},t),{},{taxes:e})})),O(gn)}()},children:"Add"})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)("ul",{children:u.taxes.map((function(e,t){return Object(Ee.jsxs)("li",{children:[Object(Ee.jsxs)("strong",{children:[e.title,": "]}),"".concat(e.amount,"%"),Object(Ee.jsx)(nt.a,{size:"small",onClick:function(){return O(e)},children:Object(Ee.jsx)(un.a,{})}),Object(Ee.jsx)(nt.a,{size:"small",onClick:function(){return function(e){var t=u.taxes.filter((function(t){return t.title!==e}));j((function(e){return Object(p.a)(Object(p.a)({},e),{},{taxes:t})}))}(e.title)},children:Object(Ee.jsx)(jn.a,{})})]},t)}))})}),Object(Ee.jsxs)(fe.a,{item:!0,xs:12,children:[Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Propasal text"}),Object(Ee.jsx)(Ca,{editorState:v,setEditorState:y})]}),Object(Ee.jsxs)(fe.a,{item:!0,xs:12,children:[Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Customer note"}),Object(Ee.jsx)(Ca,{editorState:N,setEditorState:w})]})]}),"change"===c&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"project-status",children:"Status"}),Object(Ee.jsxs)(Oa.a,{labelId:"project-status",value:u.status,name:"status",onChange:U,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),fn.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))]})]})}),u.status&&"change"===c&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{className:l.input,variant:"outlined",fullWidth:!0,name:"comment",label:"Add comment",value:u.comment,onChange:U})}),"edit"===c&&(null===(t=o.items)||void 0===t?void 0:t.length)>0&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(dn.a,{checked:"Draft"!==u.status,onChange:function(e){var t=e.target.checked;j(Object(p.a)(Object(p.a)({},u),{},{status:t?"Pending":"Draft"}))}}),disabled:"Draft"!==u.status&&"Pending"!==u.status,label:"Send proposal"})})]}),Object(Ee.jsx)(Zt.a,{children:"add"===c?Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:E,children:"Save"}):Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:A,children:"Update the proposal"})})]})]})})},yn=function(e){var t=new Date,a=new Date(e);return t.getTime()>a.getTime()},Cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[{content:function(e){var t,a;return Object(Ee.jsx)(Ct.a,{children:Object(Ee.jsx)(St.a,{primary:null===(t=e.project)||void 0===t?void 0:t.name,secondary:null===(a=e.project)||void 0===a?void 0:a.type})})},label:"Project"}].concat(Object(jt.a)(Pa(t)),[{path:"billingCycle",label:"Billing cycle"},{content:function(e){var t,a,n;return null!==(t=e.amounts)&&void 0!==t&&t.total?Object(Ee.jsxs)(Ce.a,{children:["$ ",null===(a=e.amounts)||void 0===a||null===(n=a.total)||void 0===n?void 0:n.toLocaleString("en-US")]}):"-"},label:"Amount"},{content:function(e){return Object(Ee.jsx)(Ce.a,{children:"Pending"===e.status&&yn(e.expiryDate)?"Dead":e.status})},label:"Status"},{content:function(a){return Object(Ee.jsxs)(ka.a,{variant:"outlined",size:"small",children:[Object(Ee.jsx)(Ea.a,{title:"Manage items",children:Object(Ee.jsx)(nt.a,{"aria-label":"manage-items",color:"secondary",onClick:function(){return e(a,"items")},size:"small",children:"View"})}),"Client"!==t.role&&("Pending"===a.status||"Draft"===a.status||yn(a.expiryDate))&&Object(Ee.jsx)(Ea.a,{title:"Edit",children:Object(Ee.jsxs)(nt.a,{"aria-label":"Edit",color:"secondary",onClick:function(){return e(a,"edit")},children:[Object(Ee.jsx)(Ta.a,{}),"Edit"]})})]})},label:"Actions"}])},Sn=a(762),Nn=a(115),wn=a(969),In=a(970),kn=a(971),En=a(972),Dn=["project","user","updatedAt","createdAt","_id","__v"],Tn={name:"",quantity:"",price:"",total:""},An={subtotal:0,tax:0,discount:0,total:0},Pn=function(e){var t=new Date,a=new Date(e);return t.getTime()<a.getTime()},Rn=function(e){var t,a,c,i,o,r=e.open,l=e.setOpen,s=e.quote,d=e.loading,u=void 0!==d&&d,j=e.user,b=void 0===j?{}:j,m=Object(n.useState)(Tn),h=Object(et.a)(m,2),O=h[0],x=h[1],f=Object(n.useState)(An),v=Object(et.a)(f,2),y=v[0],C=v[1],S=Object(n.useState)([]),N=Object(et.a)(S,2),w=N[0],I=N[1];Object(n.useEffect)((function(){s&&s.items&&(I((null===s||void 0===s?void 0:s.items)||[]),C((null===s||void 0===s?void 0:s.amounts)||{}))}),[s]);var k=function(e){var t=e.target,a=t.name,n=t.value;x((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n))}))},E=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.taxes,n=t.discount,c=t.isFixed,i=Number(e.reduce((function(e,t){return e+t.total}),0)),o=c?n:i*n/100,r=i-o,l=a.reduce((function(e,t){return e+t.amount}),0),s=r*l/100;return{subtotal:i.toFixed(2),tax:s.toFixed(2),discount:o.toFixed(2),total:(r+s).toFixed(2)}}(e,s);I(e),C(t),x(Tn),s.items=e,s.amounts=t},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draft",t=s.project,a=(s.user,s.updatedAt,s.createdAt,s._id),n=(s.__v,Object(qe.a)(s,Dn));n.projectId=t._id,n.status=e,mn(n,a)};return Object(Ee.jsxs)(Va.a,{open:r,keepMounted:!0,onClose:l,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"quote-items-title","aria-describedby":"quote-items-description",children:[Object(Ee.jsx)(Ha.a,{id:"quote-items-title",children:"Manage proposal items"}),Object(Ee.jsx)($a.a,{children:Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsxs)(fe.a,{item:!0,xs:12,sm:12,md:7,lg:7,children:[Object(Ee.jsxs)(fe.a,{item:!0,xs:12,children:[Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Propasal text"}),Object(Ee.jsx)("hr",{}),Ga()(null===s||void 0===s?void 0:s.propasalText)]}),Object(Ee.jsxs)(fe.a,{item:!0,xs:12,children:[Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Customer note"}),Object(Ee.jsx)("hr",{}),Ga()(null===s||void 0===s?void 0:s.customerNote)]})]}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:5,lg:5,children:Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:4,lg:4,children:Object(Ee.jsx)(ba.a,{name:"name",variant:"outlined",fullWidth:!0,label:"Name",onChange:k,value:O.name,size:"small",disabled:"Client"===b.role||"Draft"!==(null===s||void 0===s?void 0:s.status)&&"Pending"!==(null===s||void 0===s?void 0:s.status)})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:3,lg:3,children:Object(Ee.jsx)(ba.a,{name:"price",variant:"outlined",fullWidth:!0,label:"Price",type:"number",onChange:k,value:O.price,size:"small",disabled:""===O.name})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:3,lg:3,children:Object(Ee.jsx)(ba.a,{name:"quantity",variant:"outlined",fullWidth:!0,label:"Quantity",type:"number",onChange:k,value:O.quantity,size:"small",disabled:O.price<=0})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:2,lg:2,children:Object(Ee.jsx)(pa.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=Object(jt.a)(w),t=e.findIndex((function(e){return e.name===O.name}));O.total=O.price*O.quantity,t<0?e.push(O):(e[t].price=O.price,e[t].quantity=O.quantity,e[t].total=O.total),E(e)}()},disabled:O.quantity<=0,children:"Add"})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(Sn.a,{component:Nn.a,children:w.length>0?Object(Ee.jsxs)($t.a,{"aria-label":"item-table",size:"small",children:[Object(Ee.jsxs)(Jt.a,{children:[Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsx)(Yt.a,{align:"center",colSpan:3,children:"Item details"}),Object(Ee.jsx)(Yt.a,{align:"right",children:"Item price"})]}),Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsx)(Yt.a,{children:"Name"}),Object(Ee.jsx)(Yt.a,{align:"right",children:"Qty."}),Object(Ee.jsx)(Yt.a,{align:"right",children:"Price"}),Object(Ee.jsx)(Yt.a,{align:"right",children:"Total"})]})]}),Object(Ee.jsxs)(Qt.a,{children:[w.map((function(e,t){var a,n;return Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsxs)(Yt.a,{children:[e.name,"Client"!==b.role&&Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(nt.a,{size:"small",onClick:function(){return x((function(t){return Object(p.a)(Object(p.a)({},t),e)}))},children:Object(Ee.jsx)(Ta.a,{})}),Object(Ee.jsx)(nt.a,{size:"small",onClick:function(){return function(e){var t=w.filter((function(t){return t.name!==e}));E(t)}(e.name)},children:Object(Ee.jsx)(wn.a,{})})]})]}),Object(Ee.jsx)(Yt.a,{align:"right",children:e.quantity}),Object(Ee.jsxs)(Yt.a,{align:"right",children:["$",null===(a=e.price)||void 0===a?void 0:a.toLocaleString("en-US")]}),Object(Ee.jsxs)(Yt.a,{align:"right",children:["$",null===(n=e.total)||void 0===n?void 0:n.toLocaleString("en-US")]})]},t)})),Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsx)(Yt.a,{rowSpan:4}),Object(Ee.jsx)(Yt.a,{colSpan:2,children:"Subtotal"}),Object(Ee.jsxs)(Yt.a,{align:"right",children:["$",null===(t=y.subtotal)||void 0===t?void 0:t.toLocaleString("en-US")]})]}),Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsx)(Yt.a,{children:"Taxes"}),Object(Ee.jsx)(Yt.a,{align:"right",children:null===s||void 0===s||null===(a=s.taxes)||void 0===a?void 0:a.reduce((function(e,t){return e+"".concat(t.amount,"%, ")}),"")}),Object(Ee.jsxs)(Yt.a,{align:"right",children:["$",null===(c=y.tax)||void 0===c?void 0:c.toLocaleString("en-US")]})]}),Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsx)(Yt.a,{children:"Discount"}),Object(Ee.jsx)(Yt.a,{align:"right",children:null!==s&&void 0!==s&&s.isFixed?"".concat(null===s||void 0===s?void 0:s.discount.toLocaleString("en-US")):"".concat(null===s||void 0===s?void 0:s.discount,"%")}),Object(Ee.jsxs)(Yt.a,{align:"right",children:["$",null===(i=y.discount)||void 0===i?void 0:i.toLocaleString("en-US")]})]}),Object(Ee.jsxs)(Vt.a,{children:[Object(Ee.jsx)(Yt.a,{colSpan:2,children:"Total"}),Object(Ee.jsxs)(Yt.a,{align:"right",children:["$",null===(o=y.total)||void 0===o?void 0:o.toLocaleString("en-US")]})]})]})]}):Object(Ee.jsx)(ia,{message:"Not items added yet"})})}),"Client"===b.role&&Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"comment",label:"Add comment",value:null===s||void 0===s?void 0:s.comment,disabled:"Pending"!==(null===s||void 0===s?void 0:s.status),onChange:function(e){var t=e.target.value;s.comment=t}})})]})})]})}),Object(Ee.jsxs)(Xa.a,{children:[Object(Ee.jsx)(pa.a,{color:"default",variant:"contained",component:"a","aria-label":"Print invoice",rel:"noreferrer",href:"".concat(Me,"/").concat(null===s||void 0===s?void 0:s._id,"?downloadType=proposal"),target:"_blank",children:"Download PDF"}),("Pending"===(null===s||void 0===s?void 0:s.status)||"Draft"===(null===s||void 0===s?void 0:s.status)||Pn(null===s||void 0===s?void 0:s.expiryDate))&&Object(Ee.jsx)(ka.a,{variant:"outlined",color:"primary",children:"Client"!==b.role?Object(Ee.jsxs)(pa.a,{color:"primary",variant:"contained",onClick:function(){return D()},disabled:u,children:[Object(Ee.jsx)(In.a,{}),u?"Saving,...":"Save"]}):"Pending"===(null===s||void 0===s?void 0:s.status)&&Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(pa.a,{"aria-label":"Change status",color:"primary",disabled:u,onClick:function(){return D("Accepted")},children:[Object(Ee.jsx)(kn.a,{}),u?"Saving,...":"Accept"]}),Object(Ee.jsxs)(pa.a,{"aria-label":"Change status",color:"secondary",disabled:u,onClick:function(){return D("Declined")},children:[Object(Ee.jsx)(En.a,{}),u?"Saving,...":"Decline"]})]})}),Object(Ee.jsxs)(pa.a,{color:"default",variant:"contained",onClick:function(){return l()},children:[Object(Ee.jsx)(jn.a,{}),"Cancel"]})]})]})},Fn=["quoteId"],Ln=function(){ge.dispatch({type:B,payload:$e.get("/invoice")})},Un={amount:"",status:"pending"},_n=["pending","paid"],Mn=function(e){var t=e.action,a=void 0===t?"add":t,c=e.currentItem,i=void 0===c?null:c,o=fa(),l=Object(n.useState)(Un),s=Object(et.a)(l,2),d=s[0],u=s[1],j=Object(r.b)((function(e){return e})).invoiceEdit,b=j.loading,m=j.loaded;Object(n.useEffect)((function(){m&&u(Un)}),[m]),Object(n.useEffect)((function(){if(i){var e=i.status,t=i.amount;u({amount:t,status:e})}}),[i]);var h=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;u(Object(p.a)(Object(p.a)({},d),{},Object(g.a)({},a,n)))};return Object(Ee.jsx)(ve.a,{component:"main",className:o.root,children:Object(Ee.jsxs)("div",{className:o.paper,children:[Object(Ee.jsx)(Se.a,{className:o.avatar,children:Object(Ee.jsx)(ga.a,{})}),Object(Ee.jsx)(Ce.a,{component:"h1",variant:"h4",children:"Invoice"}),b&&Object(Ee.jsx)(Ke,{}),i?Object(Ee.jsxs)("form",{className:o.form,onSubmit:function(e){e.preventDefault(),"add"!==a&&i&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(e.quoteId,Object(qe.a)(e,Fn));ge.dispatch({type:z,payload:$e.patch("/invoice/".concat(t),a)})}(d,i._id)},children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{className:o.input,name:"amount",variant:"outlined",fullWidth:!0,label:"Invoice amount",onChange:h,value:d.amount,autoFocus:!0})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"invoice-status",children:"Status"}),Object(Ee.jsxs)(Oa.a,{labelId:"invoice-status",value:d.status,name:"status",onChange:h,disabled:"change"!==a,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),_n.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))]})]})})]}),Object(Ee.jsx)(Zt.a,{children:"add"===a?Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,children:"Save"}):Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,disabled:b,children:"Change invoice status"})})]}):Object(Ee.jsx)(Ce.a,{variant:"caption",children:"You can change a status of an invoice"})]})})},Wn=a(764),Bn=a(765),zn=a(766),qn=a(767),Gn=a(507),Yn=a.n(Gn),Vn=Object(st.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#8967fc",height:100,width:100},input:{fontSize:16},form:{width:"100%",marginTop:e.spacing(2),color:"black",fontSize:16},submit:{margin:e.spacing(3,0,2),backgroundColor:"#8967fc",borderRadius:5,float:"left",maxWidth:"100%",color:"white",fontSize:16},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},completed:{display:"inline-block"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},root:{},content:{display:"flex",alignItems:"center",flexDirection:"column",textAlgin:"center"},name:{marginTop:e.spacing(1)},removeBotton:{width:"100%"}}})),Hn=a(232),$n=a.n(Hn),Jn=["Client","Manager"],Qn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange;return Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{name:"firstName",variant:"outlined",fullWidth:!0,id:"firstName",label:"First Name",onChange:n,value:a.firstName,autoFocus:!0})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{name:"lastName",variant:"outlined",fullWidth:!0,id:"lastName",label:"Last Name",onChange:n,value:a.lastName})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"companyName",label:"Company Name",autoComplete:"Company Name",value:a.companyName,onChange:n})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"companyUrl",label:"Company URL",value:a.companyUrl,onChange:n})})]})},Zn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange,c=e.onPhoneChange;return Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:a.email,onChange:n})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)($n.a,{variant:"outlined",fullWidth:!0,autoComplete:"phone number",label:"Phone Number",defaultCountry:"rw",countryCodeEditable:!1,value:a.phoneNumber,onChange:c})})]})},Kn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange;return Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(fe.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"country",autoComplete:"country",value:a.country,disabled:!0,onChange:n})}),Object(Ee.jsx)(fe.a,{item:!0,lg:6,md:6,xl:6,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,label:"City",name:"city",autoComplete:"city",value:a.city,onChange:n})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,label:"State",name:"state",autoComplete:"state",value:a.state,onChange:n})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,label:"Postal code",name:"postalCode",value:a.postalCode,onChange:n})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"address",label:"Your Address",type:"address",id:"address",autoComplete:"address",value:a.address,onChange:n})})]})},Xn=function(e){var t=e.userInfo,a=void 0===t?{}:t,n=e.onHandleChange;return Object(Ee.jsx)(fe.a,{container:!0,spacing:1,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"user-role",children:"Role"}),Object(Ee.jsxs)(Oa.a,{labelId:"user-role",value:a.role,name:"role",onChange:n,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),Jn.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))]})]})})},ec={firstName:"",lastName:"",companyName:"",companyUrl:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",postalCode:"",role:"client"},tc=["User information","Contact","Location","Permission"],ac=function(e){var t=e.action,a=void 0===t?"add":t,c=e.currentItem,i=void 0===c?null:c,o=Vn(),l=Object(n.useState)(ec),s=Object(et.a)(l,2),d=s[0],u=s[1],j=Object(n.useState)(0),b=Object(et.a)(j,2),m=b[0],h=b[1],O=Object(n.useState)(new Set([0])),x=Object(et.a)(O,2),f=x[0],v=x[1],y=Object(r.b)((function(e){return e})),S=y.register,w=S.loading,I=S.loaded,k=y.userEdit,E=k.loading,D=k.loaded;Object(n.useEffect)((function(){(I||D)&&(pt(),u(ec),h(0),v(new Set([0])))}),[I,D]),Object(n.useEffect)((function(){i&&"edit"===a&&(u(i),h(0),v(new Set([0])))}),[i,a]);var T,A=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;u(Object(p.a)(Object(p.a)({},d),{},Object(g.a)({},a,n)))},P=function(e){e.preventDefault(),"add"===a&&function(e){ge.dispatch({type:C,payload:$e.post("/user/register",e)})}(d),"edit"===a&&function(e){var t=e._id,a=Object(qe.a)(e,Ot);ge.dispatch({type:N,payload:$e.patch("/auth/users/".concat(t),a)})}(d)},R=function(e,t){u(Object(p.a)(Object(p.a)({},d),{},{phoneNumber:e,country:t.name}))},F=function(){return tc.length},L=function(){return f.size===F()},U=function(e){return f.has(e)};return Object(Ee.jsxs)(xe.a,{component:"main",children:[Object(Ee.jsx)(Wn.a,{}),Object(Ee.jsxs)("div",{className:o.paper,children:[Object(Ee.jsx)(Se.a,{className:o.avatar,children:Object(Ee.jsx)(Yn.a,{})}),Object(Ee.jsx)(Ce.a,{component:"h1",variant:"h4",children:i?"Update ".concat(i.firstName):"REGISTER USER"}),Object(Ee.jsx)(Bn.a,{alternativeLabel:!0,nonLinear:!0,activeStep:m,children:tc.map((function(e,t){return Object(Ee.jsx)(zn.a,{children:Object(Ee.jsx)(qn.a,{onClick:(a=t,function(){h(a),v((function(e){var t=new Set(e);return t.add(a),t}))}),completed:U(t),children:e})},t);var a}))}),w&&Object(Ee.jsx)(Xe,{}),Object(Ee.jsx)("form",{className:o.form,children:Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)(fe.a,{className:o.instructions,children:(T=m,[{label:"Step 1: Fill customer information",component:Object(Ee.jsx)(Qn,{userInfo:d,onHandleChange:A})},{label:"Step 2: Customer contacts",component:Object(Ee.jsx)(Zn,{userInfo:d,onHandleChange:A,onPhoneChange:R})},{label:"Step 3: Location",component:Object(Ee.jsx)(Kn,{userInfo:d,onHandleChange:A})},{label:"Step 4: Customer role",component:Object(Ee.jsx)(Xn,{userInfo:d,onHandleChange:A})}][T]).component}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)(pa.a,{disabled:0===m,onClick:function(){h((function(e){return e-1}))},className:o.button,children:"Back"}),Object(Ee.jsx)(pa.a,{variant:"contained",color:"primary",onClick:function(){var e=m!==F()-1||L()?m+1:tc.findIndex((function(e,t){return!f.has(t)}));h(e)},className:o.button,children:"Next"}),"add"===a&&Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,disabled:w,onClick:P,children:"Save"}),"edit"===a&&Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:o.submit,disabled:E,onClick:P,children:i?"Update ".concat(i.firstName):"Update"})]})]})})]})]})},nc=Object(n.forwardRef)((function(e,t){return Object(Ee.jsx)(Ya.a,Object(p.a)({direction:"up",ref:t},e))})),cc=function(e){var t=e.open,a=void 0!==t&&t,c=e.setOpen,i=e.currentItem,o=void 0===i?null:i,r=Vn(),l=Object(n.useState)({}),s=Object(et.a)(l,2),d=s[0],u=s[1];return Object(n.useEffect)((function(){o&&u(o)}),[o]),Object(Ee.jsxs)(Va.a,{open:a,TransitionComponent:nc,keepMounted:!0,onClose:c,"aria-labelledby":"customer-name","aria-describedby":"customer-description",maxWidth:"lg",children:[Object(Ee.jsx)(Ha.a,{id:"customer-name",children:"Customer names: ".concat(d.firstName)}),Object(Ee.jsxs)($a.a,{children:[Object(Ee.jsx)(Se.a,{className:r.avatar,src:d.avatar}),Object(Ee.jsxs)(Ce.a,{className:r.name,gutterBottom:!0,variant:"h3",children:[d.firstName," ",d.lastName,"(",d.role,")"]}),Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsxs)(fe.a,{item:!0,xs:12,sm:6,md:8,lg:8,children:[Object(Ee.jsxs)(Ce.a,{color:"textSecondary",variant:"body1",children:[d.city,", ",d.state,", ",d.country]}),Object(Ee.jsx)(Ce.a,{color:"textSecondary",variant:"body1",children:d.phoneNumber}),Object(Ee.jsx)(Ce.a,{color:"textSecondary",variant:"body1",children:d.email}),Object(Ee.jsxs)(Ce.a,{color:"textSecondary",variant:"body2",children:["Postal code: ",d.postalCode]})]}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:6,md:4,lg:4,children:Object(Ee.jsxs)(Ce.a,{color:"textSecondary",variant:"body1",children:["Company: ",d.companyName,Object(Ee.jsx)("br",{}),"Company URL:",d.companyUrl,Object(Ee.jsx)("br",{})]})})]})]}),Object(Ee.jsx)(Xa.a,{children:Object(Ee.jsx)(pa.a,{onClick:c,color:"primary",children:"Close"})})]})},ic=a(768),oc=function(e){var t=e.open,a=e.setOpen,n=e.onConfirmYes,c=e.loading,i=void 0!==c&&c,o=e.message,r=void 0===o?"":o;return Object(Ee.jsxs)(Va.a,{"aria-labelledby":"dialog-title",onClose:a,open:t,children:[Object(Ee.jsx)(Ha.a,{id:"dialog-title",children:"Confirm action"}),Object(Ee.jsx)($a.a,{children:Object(Ee.jsx)(ic.a,{children:r})}),Object(Ee.jsxs)(Xa.a,{children:[Object(Ee.jsx)(pa.a,{color:"primary",onClick:a,children:"Cancel"}),Object(Ee.jsx)(pa.a,{color:"primary",disabled:i,onClick:n,children:i?"Loading,...":"Yes"})]})]})},rc=a(311),lc=a(769),sc=Object(rc.a)((function(e){return{root:{},details:{display:"flex"},avatar:{marginLeft:"auto",height:110,width:100,flexShrink:0,flexGrow:0},progress:{marginTop:e.spacing(2)},uploadButton:{marginRight:e.spacing(2)}}})),dc=function(e){var t=e.user,a=sc();return Object(Ee.jsxs)(ve.a,{className:a.root,children:[Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)("div",{className:a.details,children:[Object(Ee.jsxs)("div",{children:[Object(Ee.jsxs)(Ce.a,{gutterBottom:!0,variant:"h2",children:[t.firstName," ",t.lastName]}),Object(Ee.jsxs)(Ce.a,{className:a.locationText,color:"textSecondary",variant:"body1",children:[t.city,", ",t.country]}),Object(Ee.jsxs)(Ce.a,{className:a.dateText,color:"textSecondary",variant:"body1",children:[wt()().format("hh:mm A")," (",Intl.DateTimeFormat().resolvedOptions().timeZone,")"]})]}),Object(Ee.jsx)(Se.a,{className:a.avatar,src:t.avatar})]}),Object(Ee.jsxs)("div",{className:a.progress,children:[Object(Ee.jsx)(Ce.a,{variant:"body1",children:"My profile"}),Object(Ee.jsx)(lc.a,{value:100,variant:"determinate"})]})]}),Object(Ee.jsx)(ht.a,{}),Object(Ee.jsxs)(Zt.a,{children:[Object(Ee.jsx)(pa.a,{className:a.uploadButton,color:"primary",variant:"text",children:"Upload picture"}),Object(Ee.jsx)(pa.a,{variant:"text",children:"Remove picture"})]})]})},uc=function(e){var t=e.open,a=e.setOpen,n=e.userInfo,c=e.onChange,i=e.onConfirm;return Object(Ee.jsxs)(Va.a,{open:t,maxWidth:"md",onClose:a,"aria-labelledby":"confirm-dialog",children:[Object(Ee.jsx)(Ha.a,{id:"confirm-dialog",children:"Confirm update"}),Object(Ee.jsxs)($a.a,{children:[Object(Ee.jsx)(ic.a,{children:"To update your information to this website, please enter your password address here."}),Object(Ee.jsx)(Ce.a,{color:"error",children:"AFTER UPDATING YOUR INFORMATION THE SYSTEM WILL LOG YOU OUT"}),Object(Ee.jsx)(ba.a,{autoFocus:!0,margin:"dense",name:"password",value:n.password,label:"Enter your password",type:"password",fullWidth:!0,onChange:c})]}),Object(Ee.jsxs)(Xa.a,{children:[Object(Ee.jsx)(pa.a,{onClick:a,color:"primary",children:"Cancel"}),Object(Ee.jsx)(pa.a,{onClick:i,color:"primary",children:"Confirm update"})]})]})},jc=Object(rc.a)((function(){return{root:{}}})),bc={firstName:"",lastName:"",companyName:"",companyUrl:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",password:"",postalCode:"",role:"client"},mc=function(e){var t=e.user,a=e.loading,c=void 0!==a&&a,i=Object(n.useState)(bc),o=Object(et.a)(i,2),r=o[0],l=o[1],s=Object(n.useState)(!1),d=Object(et.a)(s,2),u=d[0],j=d[1],b=jc();Object(n.useEffect)((function(){t.role&&l(t)}),[t]);var m=function(e){var t=e.target,a=t.name,n=t.value;l(Object(p.a)(Object(p.a)({},r),{},Object(g.a)({},a,n)))};return Object(Ee.jsx)(ve.a,{className:b.root,children:Object(Ee.jsxs)("form",{autoComplete:"off",noValidate:!0,children:[Object(Ee.jsx)(uc,{open:u,setOpen:function(){return j(!1)},userInfo:r,onChange:m,onConfirm:function(){gt(r),j(!1)}}),Object(Ee.jsx)(Ht.a,{subheader:"The information can be edited",title:"Profile"}),Object(Ee.jsx)(ht.a,{}),Object(Ee.jsx)(ye.a,{children:Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(fe.a,{item:!0,md:6,xs:12,children:Object(Ee.jsx)(ba.a,{fullWidth:!0,helperText:"Please specify the first name",label:"First name",margin:"dense",name:"firstName",onChange:m,required:!0,value:r.firstName,variant:"outlined"})}),Object(Ee.jsx)(fe.a,{item:!0,md:6,xs:12,children:Object(Ee.jsx)(ba.a,{fullWidth:!0,label:"Last name",margin:"dense",name:"lastName",onChange:m,required:!0,value:r.lastName,variant:"outlined"})}),Object(Ee.jsx)(fe.a,{item:!0,md:6,xs:12,children:Object(Ee.jsx)(ba.a,{fullWidth:!0,label:"Company name",margin:"dense",name:"companyName",onChange:m,required:!0,value:r.companyName,variant:"outlined"})}),Object(Ee.jsx)(fe.a,{item:!0,md:6,xs:12,children:Object(Ee.jsx)(ba.a,{fullWidth:!0,label:"Company URL",margin:"dense",name:"companyUrl",onChange:m,required:!0,value:r.companyUrl,variant:"outlined"})}),Object(Ee.jsx)(fe.a,{item:!0,md:6,xs:12,children:Object(Ee.jsx)(ba.a,{fullWidth:!0,label:"Email Address",margin:"dense",name:"email",onChange:m,disabled:!0,value:r.email,variant:"outlined"})}),Object(Ee.jsx)(fe.a,{item:!0,md:6,xs:12,children:Object(Ee.jsx)($n.a,{variant:"outlined",fullWidth:!0,autoComplete:"phone number",label:"Phone Number",defaultCountry:"rw",margin:"dense",countryCodeEditable:!1,value:r.phoneNumber,onChange:function(e,t){l(Object(p.a)(Object(p.a)({},r),{},{phoneNumber:e,country:t.name}))}})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"address",label:"Your Address",margin:"dense",autoComplete:"address",value:r.address,onChange:m})}),Object(Ee.jsx)(fe.a,{item:!0,md:3,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,label:"City",name:"city",margin:"dense",autoComplete:"city",value:r.city,onChange:m})}),Object(Ee.jsx)(fe.a,{item:!0,md:3,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,label:"State",name:"state",margin:"dense",autoComplete:"state",value:r.state,onChange:m})}),Object(Ee.jsx)(fe.a,{item:!0,md:3,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,label:"Postal code",name:"postalCode",margin:"dense",value:r.postalCode,onChange:m})}),Object(Ee.jsx)(fe.a,{item:!0,md:3,xs:12,children:Object(Ee.jsx)(ba.a,{variant:"outlined",fullWidth:!0,name:"country",margin:"dense",autoComplete:"country",value:r.country,disabled:!0,onChange:m,onClick:function(){return gt(r)}})})]})}),Object(Ee.jsx)(ht.a,{}),Object(Ee.jsx)(Zt.a,{children:Object(Ee.jsx)(pa.a,{color:"primary",variant:"contained",disabled:c,onClick:function(){return gt(r)},children:c?"Updating":"Save information"})})]})})},hc=Object(rc.a)((function(e){return{root:{padding:e.spacing(4)}}})),Oc=a(770),pc=function(e){var t=e.open,a=e.setOpen,n=e.userInfo,c=e.onChange,i=e.onConfirm,o=e.loading,r=void 0!==o&&o;return Object(Ee.jsxs)(Va.a,{open:t,maxWidth:"md",onClose:a,"aria-labelledby":"confirm-dialog",children:[Object(Ee.jsx)(Ha.a,{id:"confirm-dialog",children:"Email Dialog"}),Object(Ee.jsxs)($a.a,{children:[Object(Ee.jsx)(ic.a,{children:"To reset your password, please enter your email address here."}),Object(Ee.jsx)(Ce.a,{color:"secondary",children:"WE WILL SEND YOU A LINK TO HELP YOU RESET YOUR PASSWORD"}),Object(Ee.jsx)(ba.a,{autoFocus:!0,margin:"dense",name:"email",value:n.email,label:"Enter your email",type:"email",fullWidth:!0,onChange:c})]}),Object(Ee.jsxs)(Xa.a,{children:[Object(Ee.jsx)(pa.a,{onClick:a,color:"primary",children:"Cancel"}),Object(Ee.jsx)(pa.a,{onClick:i,color:"primary",disabled:r,children:r?"Loading,...":"Send the link"})]})]})},gc={email:"",password:""},xc={name:"",customer:"",project:"",price:"",status:"",sku:"",bgColor:"#FAFAFA",description:"",website:"",image:""},fc=["QA","COMPLETED"],vc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cameraOrbit",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t[e],n=null===a||void 0===a?void 0:a.default;if(null===a||void 0===a||!a.useDefault){n="";var c=null===a||void 0===a?void 0:a.custom;n+="".concat(null===c||void 0===c?void 0:c.side,"deg"),n+=" ".concat(null===c||void 0===c?void 0:c.ud,"deg"),n+=" ".concat(null===c||void 0===c?void 0:c.side,"%")}return n},yc=function(e){var t=e.skyboxImage,a=e.environmentImage,n={};return e.disableZoom&&(n["disable-zoom"]="true"),e.autoRotate&&(n["auto-rotate"]="true"),null!==t&&void 0!==t&&t.active&&null!==t&&void 0!==t&&t.image&&(n["skybox-image"]=Be+(null===t||void 0===t?void 0:t.image)),null!==a&&void 0!==a&&a.active&&null!==a&&void 0!==a&&a.image&&(n["environment-image"]=Be+(null===a||void 0===a?void 0:a.image)),n},Cc=["_id","__v"],Sc="/products",Nc=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image3d",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new FormData,c=0,i=Object.keys(e);c<i.length;c++){var o=i[c];n.append("productFiles",e[o])}var r=a.productId,l=a.imgType,s={headers:{"Content-Type":"multipart/form-data"}},d="".concat(Sc,"/upload/").concat(t),u=H;r&&l&&(d+="?productId=".concat(r,"&imgType=").concat(l)),"attr-image"===t&&(u=ee),ge.dispatch({type:u,payload:$e.post(d,n,s)})},wc=function(e){var t=e.projectId,a="?";t&&(a+="project=".concat(t)),ge.dispatch({type:J,payload:$e.get(Sc+a)})},Ic=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},c=a?"?analyticType=visit":"",i=(null===(t=document.location)||void 0===t?void 0:t.ancestorOrigins)||[];i.length>0&&(n.headers={"ancestor-origin":i[0]}),ge.dispatch({type:X,payload:$e.get("".concat(Sc,"/").concat(e+c),n)})},kc={side:50,ud:50,io:50},Ec={disableZoom:!1,autoRotate:!0,autoRotateDelay:3e3,backgroundColor:"#ffffff",cameraOrbit:{default:"0deg 75deg 105%",custom:kc,useDefault:!0},minCameraOrbit:{default:"Infinity 22.5deg auto",custom:kc,useDefault:!0},maxCameraOrbit:{default:"Infinity 157.5deg auto",custom:kc,useDefault:!0},cameraTarget:{default:"auto auto auto",custom:"",useDefault:!0},fieldOfView:10,exposure:1,shadowIntensity:0,shadowSoftness:0,alt:"",scale:"auto",placement:"floor",metalness:0,roughness:0,arButtonImage:"",skyboxImage:{active:!1,image:""},environmentImage:{active:!1,image:""},imageFiles:[],hotspots:[]},Dc=["src"],Tc=function(e){var t,a,c,i=e.match,o=e.styles,l=void 0===o?{width:"100%",height:"100vh"}:o,s=e.addVisit,d=void 0===s||s,u=Object(n.useState)(Ec),j=Object(et.a)(u,2),b=j[0],m=j[1],h=Object(r.b)((function(e){return e})),O=i.params.productId,g=h.productGet,x=g.product,f=g.loaded,v=g.loading,y=h.analyticAdd.loading;return Object(n.useEffect)((function(){O&&Ic(O,d)}),[O,d]),Object(n.useEffect)((function(){if(f){var e=x.image,t=(e.src,Object(qe.a)(e,Dc));m(t)}}),[f,x]),Object(n.useEffect)((function(){var e=document.querySelector("model-viewer#image3d-viewer");f&&e&&e.addEventListener("load",(function(t){var a=e.model.materials[0];a.pbrMetallicRoughness.setMetallicFactor(b.metalness),a.pbrMetallicRoughness.setRoughnessFactor(b.roughness)}))}),[f,b.metalness,b.roughness]),v?Object(Ee.jsx)(Xe,{}):Boolean(x.imagesSrc)?Object(Ee.jsxs)("model-viewer",Object(p.a)(Object(p.a)({id:"image3d-viewer",src:"".concat(We,"/").concat(null===(t=x.imagesSrc)||void 0===t?void 0:t.glb),"ios-src":"".concat(We,"/").concat(null===(a=x.imagesSrc)||void 0===a?void 0:a.usdz),style:Object(p.a)(Object(p.a)({},l),{},{border:"none",backgroundColor:b.backgroundColor}),"auto-rotate-delay":b.autoRotateDelay,"background-color":b.backgroundColor,"camera-orbit":vc("cameraOrbit",b),"min-camera-orbit":vc("minCameraOrbit",b),"max-camera-orbit":vc("maxCameraOrbit",b),"camera-target":vc("cameraTarget",b),"field-of-view":b.fieldOfView,exposure:b.exposure,"shadow-intensity":b.shadowIntensity,"shadow-softness":b.shadowSoftness,alt:b.alt,"ar-scale":b.scale,placement:b.placement,ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0,autoplay:!0,"quick-look-browsers":"safari chrome firefox",loading:"eager"},yc(b)),{},{children:[Boolean(b.arButtonImage)&&Object(Ee.jsx)("input",{type:"image",src:Be+b.arButtonImage,id:"ar-button",className:"ar-button",slot:"ar-button",alt:b.alt,disabled:y,onClick:function(){return function(e){var t="?analyticType=".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"visit");ge.dispatch({type:ie,payload:$e.post("".concat(Sc,"/").concat(e,"/analytics").concat(t))})}(x._id,"click")}}),null===(c=b.hotspots)||void 0===c?void 0:c.map((function(e,t){return Object(Ee.jsx)("button",{slot:"hotspot-".concat(t),className:"hotspot",style:{backgroundColor:e.bgColor},"data-position":e.dataPosition,"data-normal":e.dataNormal,children:Object(Ee.jsx)("div",{className:"annotation",children:e.dataText})},t)}))]})):null},Ac=function(e){var t=e.productId,a=e.open,n=e.setOpen,c={params:{productId:t}};return Object(Ee.jsxs)(Va.a,{open:a,keepMounted:!0,onClose:n,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"view-product","aria-describedby":"project-description",children:[Object(Ee.jsx)(Ha.a,{id:"view-product",children:"Asset View"}),Object(Ee.jsx)($a.a,{children:Object(Ee.jsx)(fe.a,{container:!0,children:Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:12,lg:12,children:Object(Ee.jsx)(Tc,{match:c,styles:{width:"100%",height:"70vh"},addVisit:!1})})})}),Object(Ee.jsx)(Xa.a,{children:Object(Ee.jsx)(pa.a,{color:"secondary",onClick:function(){return n()},children:"Cancel"})})]})},Pc=["button"],Rc={title:"",description:""},Fc=a(235),Lc=["createdAt","updatedAt","image","project","customer"],Uc=function(e){var t=e.action,a=void 0===t?"add":t,c=e.currentItem,i=void 0===c?null:c,o=e.setAction,l=fa(),s=Object(n.useState)(xc),d=Object(et.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(!1),m=Object(et.a)(b,2),h=m[0],O=m[1],x=Object(r.b)((function(e){return e})),f=x.fileUpload,v=f.loaded,y=f.loading,C=f.filePath,S=x.productAdd,N=S.loading,w=S.loaded,I=x.productEdit,k=I.loading,E=I.loaded,D=x.userList.users,T=x.projectsGet.projects,A=x.login.userInfo.user;Object(n.useEffect)((function(){pt("Client")}),[]),Object(n.useEffect)((function(){u.customer&&Qe({clientId:u.customer})}),[u.customer]);var P=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;j((function(e){var t=Object(p.a)(Object(p.a)({},e),{},Object(g.a)({},a,n));return"customer"===a&&(t.project=""),t}))};Object(n.useEffect)((function(){v&&C&&(j(Object(p.a)(Object(p.a)({},u),{},{image:C})),O(!1),he("Images uploaded"))}),[v,C]),Object(n.useEffect)((function(){(w||E)&&(o("add"),j(xc),wc({}))}),[w,E]),Object(n.useEffect)((function(){if(i&&"edit"===a){i.createdAt,i.updatedAt,i.image;var e=i.project,t=i.customer,n=Object(qe.a)(i,Lc);j(Object(p.a)(Object(p.a)({},n),{},{project:null===e||void 0===e?void 0:e._id,customer:null===t||void 0===t?void 0:t._id}))}}),[a,i]);return Object(Ee.jsx)(ve.a,{component:"main",className:l.root,children:Object(Ee.jsxs)("div",{className:l.paper,children:[Object(Ee.jsx)(Se.a,{className:l.avatar,children:Object(Ee.jsx)(ga.a,{})}),Object(Ee.jsx)(Ce.a,{component:"h1",variant:"h4",children:"add"===a&&"Client"===A.role?"3D Assets":"edit"===a?"Update ".concat(null===i||void 0===i?void 0:i.name.toUpperCase()):"Add a new 3D asset"}),("add"===a&&"Client"!==A.role||"edit"===a)&&Object(Ee.jsxs)("form",{className:l.form,onSubmit:function(e){e.preventDefault();var t,n=D.find((function(e){return e._id===u.customer}));u.website=null===n||void 0===n?void 0:n.companyUrl,"add"===a&&(t=u,ge.dispatch({type:$,payload:$e.post(Sc,t)})),"edit"===a&&(delete u.itemNumber,function(e){var t=e._id,a=(e.__v,Object(qe.a)(e,Cc));ge.dispatch({type:Z,payload:$e.patch("".concat(Sc,"/").concat(t),a)})}(u))},children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{className:l.input,name:"name",variant:"outlined",fullWidth:!0,label:"3D Asset name",onChange:P,value:u.name})}),"Client"!==A.role&&Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"customer-or-comp",children:"Customer or company"}),Object(Ee.jsxs)(Oa.a,{labelId:"customer-or-comp",value:u.customer,name:"customer",onChange:P,disabled:"Client"===A.role,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),D.map((function(e,t){return Object(Ee.jsxs)(mt.a,{value:e._id,children:[e.fullName,", ",e.companyName]},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"select-project",children:"Select project"}),Object(Ee.jsxs)(Oa.a,{labelId:"select-project",value:u.project,name:"project",onChange:P,disabled:!Boolean(u.customer)||"Client"===A.role,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),T.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e._id,children:e.name},t)}))]})]})})]}),Object(Ee.jsx)(fe.a,{item:!0,lg:6,md:6,sm:6,xs:12,children:Object(Ee.jsx)(ba.a,{className:l.input,name:"sku",variant:"outlined",fullWidth:!0,label:"SKU",onChange:P,value:u.sku})}),Object(Ee.jsx)(fe.a,{item:!0,lg:6,md:6,sm:6,xs:12,children:Object(Ee.jsx)(ja.a,{className:l.input,value:u.price,onValueChange:function(e){var t=e.floatValue;return j(Object(p.a)(Object(p.a)({},u),{},{price:t}))},prefix:"$",thousandSeparator:!0,customInput:ba.a,fullWidth:!0,variant:"outlined",label:"Price(in USD)"})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"product-status",children:"Status"}),Object(Ee.jsxs)(Oa.a,{labelId:"product-status",value:u.status,name:"status",onChange:P,children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),fc.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ba.a,{className:l.input,variant:"outlined",fullWidth:!0,name:"description",label:"Description",rows:3,rowsMax:4,value:u.description,onChange:P})}),"add"===a&&"Client"!==A.role&&Object(Ee.jsxs)(fe.a,{item:!0,xs:12,children:[Object(Ee.jsx)(pa.a,{onClick:function(){return O(!0)},children:"Add the 3D asset files"}),Object(Ee.jsx)(Fc.a,{open:h,onSave:function(e){2===e.length?Nc(e):me("Sorry only two files are needed")},acceptedFiles:[".gltf",".glb",".usdz"],showPreviews:!0,maxFileSize:5e7,filesLimit:2,onClose:function(){return O(!1)},clearOnUnmount:v,submitButtonText:y?"Uploading files, please wait,...":"Save files"})]})]}),Object(Ee.jsxs)(Zt.a,{children:["add"===a&&"Client"!==A.role&&Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:N,children:"Save"}),"edit"===a&&Object(Ee.jsx)(pa.a,{type:"submit",fullWidth:!0,variant:"contained",className:l.submit,disabled:k,children:"Update the asset"})]})]})]})})},_c=function(e,t){return[{content:function(t){return Object(Ee.jsx)(pa.a,{onClick:function(){return e(t,"preview")},children:t.name})},label:"Asset name"},{content:function(e){return Object(Ee.jsxs)(Ce.a,{children:[e.customer.fullName,", ",e.customer.companyName]})},label:"Customer"},{content:function(e){var t;return Object(Ee.jsx)(Ce.a,{children:null===(t=e.project)||void 0===t?void 0:t.name})},label:"Project"},{path:"sku",label:"SKU"},{content:function(e){var t;return Object(Ee.jsx)(Ce.a,{children:e.price?"$ ".concat(null===(t=e.price)||void 0===t?void 0:t.toLocaleString("en-US")):""})},label:"Price"},{path:"status",label:"Status"},{content:function(t){return Object(Ee.jsxs)(ka.a,{variant:"outlined",size:"small",children:[Object(Ee.jsx)(Ea.a,{title:"View",children:Object(Ee.jsxs)(nt.a,{"aria-label":"View",color:"secondary",onClick:function(){return e(t,"preview")},children:[Object(Ee.jsx)(Da.a,{})," View"]})}),Object(Ee.jsx)(Ea.a,{title:"Edit",children:Object(Ee.jsxs)(nt.a,{"aria-label":"Edit",color:"secondary",onClick:function(){return e(t,"edit")},children:[Object(Ee.jsx)(Ta.a,{})," Edit"]})})]})},label:"Actions"}]},Mc=a(521),Wc=a(757),Bc=a(907),zc=a(233),qc=a.n(zc),Gc=a(903),Yc=a(973),Vc=a(974),Hc=function(e){var t=e.label,a=e.attribute,n=e.name,c=e.values,i=void 0===c?{}:c,o=e.onSetValue;return Object(Ee.jsxs)(fe.a,{container:!0,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:6,sm:6,md:6,children:Object(Ee.jsx)(Ce.a,{variant:"h6",children:t})}),Object(Ee.jsx)(fe.a,{item:!0,xs:6,sm:6,md:6,children:Object(Ee.jsxs)(ka.a,{size:"small",children:[Object(Ee.jsx)(pa.a,{"aria-label":"reduce",onClick:function(){return o(a,n,-1)},children:Object(Ee.jsx)(Yc.a,{fontSize:"small"})}),Object(Ee.jsx)(pa.a,{children:i[n]}),Object(Ee.jsx)(pa.a,{"aria-label":"increase",onClick:function(){return o(a,n,1)},children:Object(Ee.jsx)(Vc.a,{fontSize:"small"})})]})})]})},$c=function(e){var t=e.cardTitle,a=e.onSetCounterValue,n=e.onChangeCheckbox,c=e.counterValues,i=void 0===c?{}:c,o=e.attribute;return Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:t}),Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(Gc.a,{checked:i.useDefault,onChange:function(e){var t=e.target;return n(t,o)}}),label:"Default value"}),Object(Ee.jsxs)(Wc.a,{in:!i.useDefault,children:[Object(Ee.jsx)(Hc,{label:"Side to side",onSetValue:a,attribute:o,values:i.custom,name:"side"}),Object(Ee.jsx)(Hc,{label:"Up and down",onSetValue:a,attribute:o,values:i.custom,name:"ud"}),Object(Ee.jsx)(Hc,{label:"In and out",onSetValue:a,attribute:o,values:i.custom,name:"io"})]})]})]})},Jc=Object(st.a)((function(e){return{root:{height:450,overflowY:"auto"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},editor:{backgroundColor:e.palette.background.default,height:500}}})),Qc=function(e){var t=e.attributes,a=void 0===t?{}:t,n=e.attName,c=e.onInputChange,i=e.onSetCounterValue,o=e.onSliderChange,r=e.onChangeColor,l=e.onChangeSwitch,s=e.onChangeCheckbox,d=Jc();return Object(Ee.jsx)(Wc.a,{in:"scene"===n,children:Object(Ee.jsx)(ve.a,{className:d.root,children:Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(dn.a,{checked:a.disableZoom,onChange:l,name:"disableZoom",color:"primary"}),label:"Disable zoom"}),Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(dn.a,{checked:a.autoRotate,onChange:l,name:"autoRotate",color:"primary"}),label:"Auto rotate"}),Object(Ee.jsx)(ba.a,{label:"Auto rotate delay",type:"number",name:"autoRotateDelay",value:a.autoRotateDelay,fullWidth:!0,onChange:c}),Object(Ee.jsx)(qc.a,{defaultValue:"Color",name:"backgroundColor",floatingLabelText:"Background color",onChange:r,fullWidth:!0,value:a.backgroundColor}),Object(Ee.jsx)($c,{cardTitle:"Camera orbit",onSetCounterValue:i,counterValues:a.cameraOrbit,onChangeCheckbox:s,attribute:"cameraOrbit"}),Object(Ee.jsx)($c,{cardTitle:"Min Camera orbit",onSetCounterValue:i,counterValues:a.minCameraOrbit,onChangeCheckbox:s,attribute:"minCameraOrbit"}),Object(Ee.jsx)($c,{cardTitle:"Max Camera orbit",onSetCounterValue:i,counterValues:a.maxCameraOrbit,onChangeCheckbox:s,attribute:"maxCameraOrbit"}),Object(Ee.jsx)(Ce.a,{variant:"h4",id:"field-of-view",gutterBottom:!0,children:"Field of view"}),Object(Ee.jsx)(Bc.a,{"aria-labelledby":"field-of-view",min:0,step:5,max:50,valueLabelDisplay:"on",name:"fieldOfView",value:a.fieldOfView,onChange:function(e,t){return o("fieldOfView",t)}})]})})})},Zc=a(898),Kc=function(e){var t,a,n,c,i,o,r,l,s,d,u,j,b=e.attName,m=e.attributes,h=e.onSliderChange,O=e.onLightningCheck,p=e.onLighteningSelect;return Object(Ee.jsx)(Wc.a,{in:"lighting"===b,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Image lighting"}),Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsx)(Ce.a,{variant:"h4",id:"exposure",gutterBottom:!0,children:"Exposure"}),Object(Ee.jsx)(Bc.a,{"aria-labelledby":"exposure",min:0,step:.01,max:2,valueLabelDisplay:"on",name:"exposure",value:m.exposure,onChange:function(e,t){return h("exposure",t)}}),Object(Ee.jsx)(Ce.a,{variant:"h4",id:"shadow-intensity",gutterBottom:!0,children:"Shadow intensity"}),Object(Ee.jsx)(Bc.a,{"aria-labelledby":"shadow-intensity",min:0,step:.1,max:1,valueLabelDisplay:"on",name:"shadowIntensity",value:m.shadowIntensity,onChange:function(e,t){return h("shadowIntensity",t)}}),Object(Ee.jsx)(Ce.a,{variant:"h4",id:"shadow-softness",gutterBottom:!0,children:"Shadow softness"}),Object(Ee.jsx)(Bc.a,{"aria-labelledby":"shadow-softness",min:0,step:.1,max:1,valueLabelDisplay:"on",name:"shadowSoftness",value:m.shadowSoftness,onChange:function(e,t){return h("shadowSoftness",t)}}),Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(Gc.a,{checked:null===(t=m.skyboxImage)||void 0===t?void 0:t.active,onChange:function(e){var t=e.target;return O(t,"skyboxImage")}}),label:"Skybox image"}),(null===(a=m.skyboxImage)||void 0===a?void 0:a.active)&&Object(Ee.jsxs)(ma.a,{fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{shrink:!0,id:"select-skybox-image",children:"Images"}),Object(Ee.jsx)(Oa.a,{labelId:"select-skybox-image",name:"skyboxImage",value:null===(n=m.skyboxImage)||void 0===n?void 0:n.image,onChange:function(e){var t=e.target;return p(t,"skyboxImage")},children:null===(c=m.imageFiles)||void 0===c?void 0:c.filter((function(e){return"skybox"===e.imageType})).map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e.imageFileName,children:e.imageFileName},t)}))})]}),Boolean(null===(i=m.skyboxImage)||void 0===i?void 0:i.image)&&Object(Ee.jsx)(Zc.a,{image:Be+(null===(o=m.skyboxImage)||void 0===o?void 0:o.image),component:"img",height:"140"}),Object(Ee.jsx)(sn.a,{control:Object(Ee.jsx)(Gc.a,{checked:null===(r=m.environmentImage)||void 0===r?void 0:r.active,onChange:function(e){var t=e.target;return O(t,"environmentImage")}}),label:"Environment image"}),(null===(l=m.environmentImage)||void 0===l?void 0:l.active)&&Object(Ee.jsxs)(ma.a,{fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{shrink:!0,id:"select-environment-image",children:"Images"}),Object(Ee.jsx)(Oa.a,{labelId:"select-environment-image",name:"environmentImage",value:null===(s=m.environmentImage)||void 0===s?void 0:s.image,onChange:function(e){var t=e.target;return p(t,"environmentImage")},children:null===(d=m.imageFiles)||void 0===d?void 0:d.filter((function(e){return"skybox"===e.imageType})).map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e.imageFileName,children:e.imageFileName},t)}))})]}),Boolean(null===(u=m.environmentImage)||void 0===u?void 0:u.image)&&Object(Ee.jsx)(Zc.a,{image:Be+(null===(j=m.environmentImage)||void 0===j?void 0:j.image),component:"img",height:"140"})]})]})})},Xc=function(e){var t=e.attName,a=e.attributes,n=e.onSliderChange;return Object(Ee.jsx)(Wc.a,{in:"material"===t,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Image material"}),Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsx)(Ce.a,{variant:"h4",id:"metalness",gutterBottom:!0,children:"Matelness"}),Object(Ee.jsx)(Bc.a,{"aria-labelledby":"metalness",min:0,step:.01,max:1,valueLabelDisplay:"on",name:"metalness",value:a.metalness,onChange:function(e,t){return n("metalness",t)}}),Object(Ee.jsx)(Ce.a,{variant:"h4",id:"roughness",gutterBottom:!0,children:"Roughness"}),Object(Ee.jsx)(Bc.a,{"aria-labelledby":"roughness",min:0,step:.01,max:1,valueLabelDisplay:"on",name:"roughness",value:a.roughness,onChange:function(e,t){return n("roughness",t)}})]})]})})},ei=function(e){var t=e.attName,a=e.attributes,n=void 0===a?{}:a,c=e.setAttributes,i=e.onInputChange,o=e.modelViewRef,r=void 0===o?{}:o,l=e.currentHotspot,s=e.setCurrentHotspot,d=Jc(),u=r.current,j=function(){var e=Object(jt.a)(n.hotspots),t=1;e.length>0&&(t=e.pop().hotspotNum+1);return t},b=function e(t){var a=u.getBoundingClientRect(),i=t.clientX-a.left,o=t.clientY-a.top,r=u.positionAndNormalFromPoint(i,o);if(r){var l=r.position,d=r.normal,b=Object(p.a)({},n),m={dataPosition:l.toString(),dataNormal:d.toString(),dataText:"",bgColor:"black",hotspotNum:j(),selected:"selected"},h=b.hotspots.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{selected:""})}));h.push(m),c(Object(p.a)(Object(p.a)({},n),{},{hotspots:h})),s(m),u.removeEventListener("click",e)}};return Object(Ee.jsx)(Wc.a,{in:"annotation"===t,children:Object(Ee.jsxs)(ve.a,{className:d.root,children:[Object(Ee.jsx)(Ht.a,{title:"Modal annotation"}),Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsx)(ba.a,{label:"Model alt text",style:{margin:8},placeholder:"Type here",fullWidth:!0,margin:"normal",name:"alt",value:n.alt,onChange:i,InputLabelProps:{shrink:!0}}),Object(Ee.jsx)(pa.a,{color:"primary",onClick:function(){u.addEventListener("click",b)},children:"Add new hotspot"}),Object(Ee.jsx)(ba.a,{label:"Model alt text",style:{margin:8},placeholder:"Type annotation text",fullWidth:!0,margin:"normal",name:"dataText",value:null===l||void 0===l?void 0:l.dataText,disabled:!l,onChange:function(e){var t=e.target;if(l){var a=Object(p.a)({},n),i=a.hotspots.findIndex((function(e){return e.dataNormal===l.dataNormal})),o=Object(p.a)(Object(p.a)({},l),{},{dataText:t.value});s(o),a.hotspots[i].dataText=t.value,c(a)}},InputLabelProps:{shrink:!0}}),Object(Ee.jsx)(qc.a,{defaultValue:"Click to select color",name:"bgColor",floatingLabelText:"Hotspot background color",onChange:function(e){if(l){var t=Object(p.a)({},n),a=t.hotspots.findIndex((function(e){return e.dataNormal===l.dataNormal})),i=Object(p.a)(Object(p.a)({},l),{},{bgColor:e});s(i),t.hotspots[a].bgColor=e,c(t)}},disabled:!l,fullWidth:!0,value:null===l||void 0===l?void 0:l.bgColor}),Object(Ee.jsx)(pa.a,{color:"secondary",disabled:!l,onClick:function(){return function(){if(l){var e=Object(p.a)({},n).hotspots.filter((function(e){return e.hotspotNum!==l.hotspotNum}));c((function(t){return Object(p.a)(Object(p.a)({},t),{},{hotspots:e})})),s(null)}}()},children:"Remove hotspot"})]})]})})},ti=["auto","fixed"],ai=["floor","wall"],ni=function(e){var t,a,n=e.attName,c=e.attributes,i=void 0===c?{}:c,o=e.onInputChange;return Object(Ee.jsx)(Wc.a,{in:"ar"===n,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"AR Editor"}),Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(ma.a,{fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{shrink:!0,id:"select-scale",children:"AR scale"}),Object(Ee.jsx)(Oa.a,{labelId:"select-scale",name:"scale",value:i.scale,onChange:o,children:ti.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))})]}),Object(Ee.jsxs)(ma.a,{fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{shrink:!0,id:"select-placement",children:"AR placement"}),Object(Ee.jsx)(Oa.a,{labelId:"select-placement",name:"placement",value:i.placement,onChange:o,children:ai.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e,children:e.toUpperCase()},t)}))})]}),(null===(t=i.imageFiles)||void 0===t?void 0:t.filter((function(e){return"custom"===e.imageType})).length)>0&&Object(Ee.jsxs)(ma.a,{fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{shrink:!0,id:"select-ar-button-image",children:"AR button image"}),Object(Ee.jsxs)(Oa.a,{labelId:"select-ar-button-image",name:"arButtonImage",value:i.arButtonImage,onChange:o,children:[Object(Ee.jsx)(mt.a,{value:"",children:"Empty"}),null===(a=i.imageFiles)||void 0===a?void 0:a.filter((function(e){return"custom"===e.imageType})).map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e.imageFileName,children:e.imageFileName},t)}))]})]}),Boolean(i.arButtonImage)&&Object(Ee.jsx)(Zc.a,{image:Be+i.arButtonImage,component:"img",height:"40"})]})]})})},ci=a(899),ii=[{id:"skybox",name:"Skybox & environment"},{id:"custom",name:"Custom AR"}],oi=function(e){var t,a=e.attName,c=e.attributes,i=void 0===c?{}:c,o=e.setAttributes,l=e.productId,s=Object(n.useState)(ii[0].id),d=Object(et.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(!1),m=Object(et.a)(b,2),h=m[0],O=m[1],g=Object(r.b)((function(e){return e})),x=g.attrImg,f=x.loading,v=x.loaded,y=x.fileName,C=g.imgAttrDel,S=C.loaded,N=C.deletedFile;Object(n.useEffect)((function(){if(v){var e,t=Object(p.a)({},i);null===(e=t.imageFiles)||void 0===e||e.push({imageType:u,imageFileName:y}),o(t),O(!1),ge.dispatch({type:te})}}),[v,y]),Object(n.useEffect)((function(){if(S){var e,t,a=Object(p.a)({},i),n=null===(e=a.imageFiles)||void 0===e?void 0:e.findIndex((function(e){return e.imageFileName===N}));null===(t=a.imageFiles)||void 0===t||t.splice(n,1),o(a)}}),[S,N]);return Object(Ee.jsx)(Wc.a,{in:"manage_images"===a,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Manage images"}),Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(ma.a,{fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{shrink:!0,id:"select-image-type",children:"Image type"}),Object(Ee.jsx)(Oa.a,{labelId:"select-image-type",name:"imageType",value:u,onChange:function(e){var t=e.target;j(t.value)},children:ii.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e.id,children:e.name},t)}))})]}),Object(Ee.jsx)(pa.a,{onClick:function(){return O(!0)},children:"Upload ".concat(u," image")}),Object(Ee.jsx)(Fc.a,{acceptedFiles:["image/*"],cancelButtonText:"cancel",submitButtonText:f?"Uploading,...":"Submit",maxFileSize:5e6,clearOnUnmount:v,open:h,onClose:function(){return O(!1)},onSave:function(e){Nc(e,"attr-image",{productId:l,imgType:u})},dialogTitle:"Upload ".concat(u.toUpperCase()," image")}),Object(Ee.jsx)(Ja.a,{dense:!0,children:null===i||void 0===i||null===(t=i.imageFiles)||void 0===t?void 0:t.filter((function(e){return e.imageType===u})).map((function(e,t){return Object(Ee.jsxs)(Ct.a,{children:[Object(Ee.jsx)(St.a,{primary:e.imageFileName}),Object(Ee.jsx)(ci.a,{children:Object(Ee.jsx)(nt.a,{onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="".concat(Sc,"/").concat(e,"/image/").concat(t);ge.dispatch({type:ae,payload:$e.delete(a)})}(l,e.imageFileName)},edge:"end","aria-label":"delete",children:Object(Ee.jsx)(wn.a,{})})})]},t)}))})]})]})})},ri=a(20),li=a(12),si=a.n(li),di=function(e){var t=e.attName,a=e.modelViewRef,n=function(){var e=Object(ri.a)(si.a.mark((function e(){var t,n,c,i;return si.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.current,n="",t.fieldOfView="auto",t.jumpCameraToGoal(),e.next=6,new Promise((function(e){return requestAnimationFrame((function(){return e()}))}));case 6:return e.next=8,t.toBlob({mimeType:"image/png",idealAspect:!0});case 8:c=e.sent,n=URL.createObjectURL(c),(i=document.createElement("a")).href=n,i.download="poster.png",i.click();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ee.jsx)(Wc.a,{in:"poster"===t,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Poster"}),Object(Ee.jsx)(ye.a,{children:Object(Ee.jsx)(pa.a,{color:"primary",onClick:n,children:"Download poster"})})]})})},ui=function(e){var t=e.attName,a=e.productId,c=Object(r.b)((function(e){return e})).projectProdsGet,i=c.loading,o=c.projProds;return Object(n.useEffect)((function(){}),[a]),Object(Ee.jsx)(Wc.a,{in:"added_projects"===t,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Added projects"}),Object(Ee.jsx)(ye.a,{children:i&&!o.length?Object(Ee.jsx)(Xe,{}):o.length?Object(Ee.jsx)(Ja.a,{children:o.map((function(e,t){var a;return Object(Ee.jsx)(Ct.a,{divider:!0,children:Object(Ee.jsx)(St.a,{primary:null===(a=e.project)||void 0===a?void 0:a.name,secondary:e.website})},t)}))}):Object(Ee.jsx)(ia,{message:"No project added yet"})})]})})},ji=function(e){var t=e.attName,a=e.productId,c=Object(r.b)((function(e){return e})).qrGenerate,i=c.loading,o=c.loaded,l=c.qr;return Object(n.useEffect)((function(){a&&function(e){var t={data:"".concat(ze,"/products/").concat(e),size:"200x200",bgcolor:"FFFFFF",color:"9722FF"},a=Object.entries(t).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&");ge.dispatch({type:ne,payload:"".concat("https://api.qrserver.com/v1","/create-qr-code/?").concat(a)})}(a)}),[a]),Object(Ee.jsx)(Wc.a,{in:"qr-code"===t,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Scan the QR code to preview 3D asset in your space"}),Object(Ee.jsxs)(ye.a,{children:[i&&Object(Ee.jsx)(Xe,{}),o&&Object(Ee.jsx)("img",{src:l,alt:"QR code",loading:"lazy"})]})]})})},bi=function(e){var t=e.productId,a=e.attributes,c=e.setAttributes,i=e.modelViewRef,o=e.currentHotspot,l=e.setCurrentHotspot,s=Jc(),d=Object(n.useState)("scene"),u=Object(et.a)(d,2),j=u[0],b=u[1],m=Object(r.b)((function(e){return e})),h=m.attrUpdate.loading,O=m.login.userInfo.user,x=function(e){var t=e.target,n=t.name,i=t.value;c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},n,i)))},f=function(e,t){c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},e,t)))};return Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,className:s.editor,children:[Object(Ee.jsxs)(fe.a,{item:!0,sm:4,md:4,children:[Object(Ee.jsxs)(ka.a,{orientation:"vertical",color:"primary","aria-label":"vertical contained primary button group",variant:"text",children:[Object(Ee.jsx)(pa.a,{color:"scene"===j?"primary":"secondary",onClick:function(){return b("scene")},children:"Scene"}),Object(Ee.jsx)(pa.a,{color:"lighting"===j?"primary":"secondary",onClick:function(){return b("lighting")},children:"Lighting"}),Object(Ee.jsx)(pa.a,{color:"material"===j?"primary":"secondary",onClick:function(){return b("material")},children:"Material"}),Object(Ee.jsx)(pa.a,{color:"annotation"===j?"primary":"secondary",onClick:function(){return b("annotation")},children:"Annotations"}),Object(Ee.jsx)(pa.a,{color:"ar"===j?"primary":"secondary",onClick:function(){return b("ar")},children:"AR"}),Object(Ee.jsx)(pa.a,{color:"poster"===j?"primary":"secondary",onClick:function(){return b("poster")},children:"Poster"}),"Client"!==O.role&&Object(Ee.jsx)(pa.a,{color:"manage_images"===j?"primary":"secondary",onClick:function(){return b("manage_images")},children:"Manage images"}),Object(Ee.jsx)(pa.a,{color:"qr-code"===j?"primary":"secondary",onClick:function(){return b("qr-code")},children:"View QR code"})]}),Object(Ee.jsx)(pa.a,{color:"secondary",variant:"contained",disabled:h,onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ge.dispatch({type:K,payload:$e.patch("".concat(Sc,"/attributes/").concat(t),e)})}(a,t)},children:"Save Changes"})]}),Object(Ee.jsxs)(fe.a,{item:!0,sm:8,md:8,children:[Object(Ee.jsx)(Qc,{attName:j,attributes:a,onInputChange:x,onSetCounterValue:function(e,t,n){var i=Object(p.a)({},a[e].custom);i[t]+=n,a[e].custom=i,c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},e,a[e])))},onSliderChange:f,onChangeColor:function(e){c(Object(p.a)(Object(p.a)({},a),{},{backgroundColor:e}))},onChangeSwitch:function(e){var t=e.target,n=t.name,i=t.checked;c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},n,i)))},onChangeCheckbox:function(e,t){var n=e.checked,i=Object(p.a)({},a[t]);i.useDefault=n,n&&(i.custom=Ec[t].custom),c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},t,i)))}}),Object(Ee.jsx)(Kc,{attName:j,attributes:a,onSliderChange:f,onLightningCheck:function(e,t){var n=e.checked,i=Object(p.a)({},a[t]);i.active=n,n||(i.image=""),c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},t,i)))},onLighteningSelect:function(e,t){var n=e.value,i=Object(p.a)({},a[t]);i.image=n,c(Object(p.a)(Object(p.a)({},a),{},Object(g.a)({},t,i)))}}),Object(Ee.jsx)(Xc,{attName:j,attributes:a,onSliderChange:f}),Object(Ee.jsx)(ei,{attName:j,attributes:a,onInputChange:x,modelViewRef:i,setAttributes:c,currentHotspot:o,setCurrentHotspot:l}),Object(Ee.jsx)(ni,{attName:j,attributes:a,onInputChange:x}),Object(Ee.jsx)(di,{attName:j,modelViewRef:i}),"Client"!==O.role&&Object(Ee.jsx)(oi,{attName:j,attributes:a,setAttributes:c,productId:t}),Object(Ee.jsx)(ui,{attName:j,productId:t}),Object(Ee.jsx)(ji,{attName:j,productId:t})]})]})},mi=["src"],hi=function(e){var t,a,c=e.open,i=e.setOpen,o=e.productId,l=void 0===o?null:o,s=Object(n.useRef)(null),d=Object(n.useState)(Ec),u=Object(et.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(null),h=Object(et.a)(m,2),O=h[0],g=h[1],x=Object(n.useState)(!1),f=Object(et.a)(x,2),v=f[0],y=f[1],C=Object(r.b)((function(e){return e})).productGet,S=C.loading,N=C.product,w=C.loaded;Object(n.useEffect)((function(){l&&c&&Ic(l)}),[l,c]),Object(n.useEffect)((function(){if(w){var e=N.image,t=(e.src,Object(qe.a)(e,mi));b((function(e){return Object(p.a)({prevAttribs:e},t)})),y(!1),g(null)}}),[w,N]),Object(n.useEffect)((function(){var e=document.querySelector("model-viewer#image3d-viewer");document.querySelectorAll("button.hotspot").forEach((function(e){return e.remove()})),j.hotspots.length&&e&&j.hotspots.forEach((function(t){var a=document.createElement("button");a.slot="hotspot-".concat(t.hotspotNum),a.classList.add("hotspot"),a.style.backgroundColor=t.bgColor,a.dataset.position=t.dataPosition,a.dataset.normal=t.dataNormal,e.appendChild(a),a.addEventListener("click",(function(){I(t)}));var n=document.createElement("div");n.classList.add("annotation"),n.textContent=t.dataText,a.appendChild(n)}))}),[j.hotspots,O]),Object(n.useEffect)((function(){var e=document.querySelector("model-viewer#image3d-viewer");w&&e&&e.addEventListener("load",(function(t){var a=e.model.materials[0];a.pbrMetallicRoughness.setMetallicFactor(j.metalness),a.pbrMetallicRoughness.setRoughnessFactor(j.roughness)}))}),[w]),Object(n.useEffect)((function(){var e=s.current;if(e&&e.model){var t=e.model.materials[0];t.pbrMetallicRoughness.setMetallicFactor(j.metalness),t.pbrMetallicRoughness.setRoughnessFactor(j.roughness)}}),[j.metalness,j.roughness]);var I=function(e){g(e)};return Object(Ee.jsxs)(Va.a,{open:c,maxWidth:"lg",fullWidth:!0,onClose:i,"aria-labelledby":"product-dialog-title","aria-describedby":"product-dialog-description",children:[Object(Ee.jsx)(Ha.a,{id:"product-dialog-title",children:null===N||void 0===N?void 0:N.name}),Object(Ee.jsxs)(Xa.a,{children:[Object(Ee.jsx)(Mc.CopyToClipboard,{text:"".concat(ze,"/products/").concat(l),onCopy:function(){return y(!0)},children:Object(Ee.jsx)(pa.a,{color:v?"secondary":"",children:v?"Copied!":"Copy the embeded code"})}),Object(Ee.jsx)(pa.a,{onClick:i,color:"primary",autoFocus:!0,children:"Exit"})]}),Object(Ee.jsx)($a.a,{id:"product-dialog-description",children:S&&!Boolean(N.image)?Object(Ee.jsx)(Xe,{}):Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,style:{backgroundColor:j.backgroundColor},children:[Object(Ee.jsx)(fe.a,{item:!0,md:5,lg:5,children:Object(Ee.jsx)(bi,{productId:l,attributes:j,setAttributes:b,modelViewRef:s,currentHotspot:O,setCurrentHotspot:g})}),Object(Ee.jsx)(fe.a,{item:!0,md:7,lg:7,children:Object(Ee.jsx)("model-viewer",Object(p.a)(Object(p.a)({id:"image3d-viewer",ref:s,src:"".concat(We,"/").concat(null===(t=N.imagesSrc)||void 0===t?void 0:t.glb),"ios-src":"".concat(We,"/").concat(null===(a=N.imagesSrc)||void 0===a?void 0:a.usdz),style:{width:"100%",height:"70vh",border:"none"},"auto-rotate-delay":j.autoRotateDelay,"background-color":j.backgroundColor,"camera-orbit":vc("cameraOrbit",j),"min-camera-orbit":vc("minCameraOrbit",j),"max-camera-orbit":vc("maxCameraOrbit",j),"camera-target":vc("cameraTarget",j),"field-of-view":j.fieldOfView,exposure:j.exposure,"shadow-intensity":j.shadowIntensity,"shadow-softness":j.shadowSoftness,alt:j.alt,"ar-scale":j.scale,placement:j.placement,ar:!0,"camera-controls":!0,autoplay:!0,"ar-modes":"webxr scene-viewer quick-look","quick-look-browsers":"safari chrome firefox",loading:"eager","interaction-prompt":"none"},yc(j)),{},{children:Boolean(j.arButtonImage)&&Object(Ee.jsx)("input",{type:"image",src:Be+j.arButtonImage,className:"ar-button",style:{width:"50%"},slot:"ar-button",alt:j.alt})}))})]})}),Object(Ee.jsx)(Xa.a,{children:Object(Ee.jsx)(pa.a,{onClick:i,color:"primary",autoFocus:!0,children:"Close"})})]})},Oi={project:"",time:"allTime"},pi=[{id:"today",name:"Today"},{id:"7days",name:"Last 7 days"},{id:"30days",name:"Last 30 days"},{id:"allTime",name:"All time"}],gi=[{path:"/",exact:!0,component:function(e){var t=Object(n.useState)(gc),a=Object(et.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(et.a)(o,2),s=l[0],d=l[1],u=e.location.search?e.location.search.split("=")[1]:"dashboard/home",j=Object(r.b)((function(e){return e})),b=j.login,m=b.userInfo,h=b.loading,O=j.linkSend,x=O.loaded,v=O.loading;Object(n.useEffect)((function(){m.user.fullName&&(localStorage.setItem(_e,JSON.stringify(m)),window.location.href=u,i(gc))}),[e.history,u,m]),Object(n.useEffect)((function(){x&&(d(!1),he("Email was sent to your mail box"),i(gc))}),[x]);var y=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;i(Object(p.a)(Object(p.a)({},c),{},Object(g.a)({},a,n)))};return Object(Ee.jsxs)("div",{className:"login-page",children:[Object(Ee.jsx)(pc,{open:s,setOpen:function(){return d(!1)},userInfo:c,onChange:y,onConfirm:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ge.dispatch({type:k,payload:$e.post("/auth/send-reset-link",{email:e})})}(c.email)},loading:v}),Object(Ee.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),function(e){ge.dispatch({type:f,payload:$e.post("/auth/login",e)})}(c)},children:[Object(Ee.jsx)("div",{children:Object(Ee.jsx)("img",{src:Ut,alt:"#",className:"logo"})}),Object(Ee.jsx)("div",{children:Object(Ee.jsx)("h1",{children:"Sign In to ARI CUBE"})}),h&&Object(Ee.jsx)(Xe,{}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(Ee.jsx)("input",{type:"email",name:"email",placeholder:"Enter email",required:!0,onChange:y,value:c.email,className:"login-input"})]}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("label",{htmlFor:"password",children:"Password"}),Object(Ee.jsx)("input",{type:"password",name:"password",placeholder:"Enter password",required:!0,onChange:y,value:c.password,className:"login-input"})]}),Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("button",{className:"login-input btn-login primary",type:"submit",children:"Login"}),Object(Ee.jsx)(Oc.a,{component:"button",variant:"body2",onClick:function(){return d(!0)},children:"Forget password?"})]})]})]})}},{path:"/set-password/:token",exact:!0,component:Mt},{path:"/set-password/:token/:action",exact:!0,component:Mt},{path:"/products/:productId",exact:!0,component:Tc},{path:"/dashboard",component:function(e){var t=e.route,a=e.history,c=Object(r.b)((function(e){return e})),i=c.login.userInfo.user,o=c.dashboard,l=o.loading,s=o.counts;return Object(n.useEffect)((function(){i.fullName||(localStorage.removeItem(_e),a.replace("/"))}),[i,a]),Object(n.useEffect)((function(){ge.dispatch({type:G,payload:$e.get("/home/dashboard")})}),[]),Object(Ee.jsx)(Ft,{children:Object(Ee.jsxs)(xe.a,{maxWidth:!1,children:[l?Object(Ee.jsx)(Xe,{}):Object(Ee.jsxs)(fe.a,{container:!0,spacing:3,children:["Client"!==i.role&&Object(Ee.jsx)(fe.a,{item:!0,lg:Lt(i.role).lg,sm:Lt(i.role).sm,xl:Lt(i.role).xl,xs:Lt(i.role).xs,component:Ue.a,to:"/dashboard/customers",children:Object(Ee.jsx)(Re,{counts:s.users||0})}),Object(Ee.jsx)(fe.a,{item:!0,lg:Lt(i.role).lg,sm:Lt(i.role).sm,xl:Lt(i.role).xl,xs:Lt(i.role).xs,component:Ue.a,to:"/dashboard/projects",children:Object(Ee.jsx)(Fe,{counts:s.projects||0})}),Object(Ee.jsx)(fe.a,{item:!0,lg:Lt(i.role).lg,sm:Lt(i.role).sm,xl:Lt(i.role).xl,xs:Lt(i.role).xs,component:Ue.a,to:"/dashboard/quotes",children:Object(Ee.jsx)(Le,{sx:{height:"100%"},counts:s.quotes||0})}),Object(Ee.jsx)(fe.a,{item:!0,lg:Lt(i.role).lg,sm:Lt(i.role).sm,xl:Lt(i.role).xl,xs:Lt(i.role).xs,component:Ue.a,to:"/dashboard/subscriptions",children:Object(Ee.jsx)(De,{counts:s.subscriptions||0})})]}),Object(j.a)(t.routes)]})})},routes:[{path:"/dashboard/home",exact:!0,component:function(){var e="Client"!==ge.getState().login.userInfo.user.role?"customers":"projects";return Object(Ee.jsx)(l.a,{to:"/dashboard/".concat(e)})}},{path:"/dashboard/customers",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(et.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(za(10)),o=Object(et.a)(i,2),l=o[0],s=o[1],d=Object(n.useState)(null),u=Object(et.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)("add"),h=Object(et.a)(m,2),O=h[0],g=h[1],x=Object(n.useState)(!1),f=Object(et.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(et.a)(C,2),N=S[0],I=S[1],k=Object(r.b)((function(e){return e})),E=k.userList,D=E.loading,T=E.users,A=k.userRm,P=A.loading,R=A.loaded;Object(n.useEffect)((function(){pt()}),[]),Object(n.useEffect)((function(){R&&(pt(),I(!1))}),[R]),Object(n.useEffect)((function(){if(T.length>0){var e=l.pageNumber,t=l.pageSize,a=Ba(T,e,t);c(a)}}),[T,l]);return Object(Ee.jsx)(Ne.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(cc,{open:v,setOpen:function(){return y(!1)},currentItem:j}),Object(Ee.jsx)(oc,{loading:P,message:j&&"Are you sure you want to delete ".concat(j.firstName),onConfirmYes:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ge.dispatch({type:w,payload:$e.delete("/auth/users/".concat(e))})}(j._id)},open:N,setOpen:function(){return I(!1)}}),Object(Ee.jsx)(fe.a,{item:!0,lg:4,md:4,xl:6,xs:12,children:Object(Ee.jsx)(ac,{action:O,currentItem:j})}),Object(Ee.jsx)(fe.a,{item:!0,lg:8,md:8,xl:6,xs:12,children:Object(Ee.jsx)(la,{tableTitle:"All users",loading:D,columns:La((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;b(e),"delete"!==t?"view"!==t?g(t):y(!0):I(!0)})),dataCount:a.length,data:a,withPagination:!0,pageCount:Math.ceil(T.length/l.pageSize),handlePageChange:function(e){var t=e.selected;s(Object(p.a)(Object(p.a)({},l),{},{pageNumber:t+1}))},page:l.pageNumber})})]})})}},{path:"/dashboard/projects",exact:!0,component:function(){var e=Object(r.b)((function(e){return e})),t=Object(n.useState)([]),a=Object(et.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(za()),l=Object(et.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(null),j=Object(et.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)("add"),O=Object(et.a)(h,2),g=O[0],x=O[1],f=Object(n.useState)(!1),v=Object(et.a)(f,2),y=v[0],C=v[1],S=e.projectsGet,N=S.loading,w=S.projects,I=e.projectAdd.loaded,k=e.projectEdit.loaded,E=e.login.userInfo.user;Object(n.useEffect)((function(){if(w.length>0){var e=s.pageNumber,t=s.pageSize,a=Ba(w,e,t);i(a)}}),[w,s]),Object(n.useEffect)((function(){Qe({})}),[]),Object(n.useEffect)((function(){(I||k)&&(m(null),x("add"),Qe({}))}),[I,k]);return Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,sx:{py:3},children:[Object(Ee.jsx)(ln,{open:y,setOpen:function(){return C(!1)},currentItem:b}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(Ee.jsx)(Ia,{action:g,currentItem:b})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(Ee.jsx)(la,{tableTitle:"List of projects",columns:Ra((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;m(e),"view"!==t?x(t):C(!0)}),E),loading:N,data:c,withPagination:!0,dataCount:w.length,pageCount:Math.ceil(w.length/s.pageSize),handlePageChange:function(e){var t=e.selected;d(Object(p.a)(Object(p.a)({},s),{},{pageNumber:t+1}))},page:s.pageNumber})})]})}},{path:"/dashboard/products",exact:!0,component:function(){var e=Object(n.useState)(za()),t=Object(et.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),o=Object(et.a)(i,2),l=o[0],s=o[1],d=Object(n.useState)(!1),u=Object(et.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(null),h=Object(et.a)(m,2),O=h[0],g=h[1],x=Object(n.useState)("add"),f=Object(et.a)(x,2),v=f[0],y=f[1],C=Object(r.b)((function(e){return e})),S=C.productsGet,N=S.loading,w=S.products;C.login.userInfo.user;Object(n.useEffect)((function(){if(w.length>0){var e=a.pageNumber,t=a.pageSize,n=Ba(w,e,t);s(n)}}),[w,a]),Object(n.useEffect)((function(){wc({})}),[]);return Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,sx:{py:3},children:[Object(Ee.jsx)(hi,{open:j,setOpen:function(){return b(!1)},productId:null===O||void 0===O?void 0:O._id}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(Ee.jsx)(Uc,{action:v,currentItem:O,setAction:y})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(Ee.jsx)(la,{tableTitle:"List of 3D assets",columns:_c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;g(e),"preview"!==t?y(t):b(!0)})),loading:N,data:l,withPagination:!0,dataCount:w.length,pageCount:Math.ceil(w.length/a.pageSize),handlePageChange:function(e){var t=e.selected;c(Object(p.a)(Object(p.a)({},a),{},{pageNumber:t+1}))},page:a.pageNumber})})]})}},{path:"/dashboard/projects/:projectId",exact:!0,component:function(e){var t,a,c,i,o=e.match,l=fa(),s=Object(n.useState)({}),d=Object(et.a)(s,2),u=d[0],j=d[1],b=Object(n.useState)(Rc),m=Object(et.a)(b,2),h=m[0],O=m[1],x=Object(n.useState)({}),f=Object(et.a)(x,2),v=f[0],y=f[1],C=Object(n.useState)(!1),S=Object(et.a)(C,2),N=S[0],w=S[1],I=Object(n.useState)(It.EditorState.createEmpty()),k=Object(et.a)(I,2),E=k[0],D=k[1],T=o.params.projectId,A=Object(r.b)((function(e){return e})),P=A.historiesGet,L=P.loading,_=P.histories,M=A.projectGet,W=M.loading,B=M.loaded,z=M.project,q=A.logAdd,G=q.loading,Y=q.loaded,V=A.login.userInfo.user,H=A.projectProdsGet,$=H.loading,J=H.projProds;Object(n.useEffect)((function(){T&&(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ge.dispatch({type:R,payload:$e.get(Je+e)})}(T),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"project",a="".concat(Je+e,"/products");a+="?type=".concat(t),ge.dispatch({type:U,payload:$e.get(a)})}(T))}),[T]),Object(n.useEffect)((function(){if(T&&B){Ze(T);var e=wa.find((function(e){return e.name===z.type}));j(e)}}),[T,B,z.type]),Object(n.useEffect)((function(){Y&&(Ze(T),O(Rc),D(It.EditorState.createEmpty()))}),[Y,T]);var Q=Object(nn.useBlogTextInfoContentStyles)(),Z=Q.button,K=Object(qe.a)(Q,Pc),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.invoice;return e.quote&&(t="".concat(e.quote,"?downloadType=proposal")),t};return Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,sx:{py:3},children:[Object(Ee.jsx)(Ac,{open:N,setOpen:function(){y({}),w(!1)},productId:v._id}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(Ee.jsxs)(ve.a,{component:"main",className:l.root,children:[Object(Ee.jsxs)("div",{className:l.paper,children:[Object(Ee.jsx)(Se.a,{className:l.avatar,children:Object(Ee.jsx)(ga.a,{})}),Object(Ee.jsx)(Ce.a,{component:"h1",variant:"h4",children:z.name}),Object(Ee.jsx)(Ce.a,{variant:"caption",children:"Created by: ".concat(null===(t=z.user)||void 0===t?void 0:t.fullName)})]}),Object(Ee.jsx)(Ht.a,{title:"3D assets added"}),Object(Ee.jsx)(ht.a,{}),Object(Ee.jsx)(ye.a,{children:$&&!J.length?Object(Ee.jsx)(Xe,{}):J.length?Object(Ee.jsx)(Ja.a,{children:J.map((function(e,t){var a;return Object(Ee.jsx)(Ct.a,{divider:!0,component:pa.a,children:Object(Ee.jsx)(St.a,{primary:null===(a=e.product)||void 0===a?void 0:a.name,secondary:"added ".concat(wt()(e.createdAt).fromNow()),onClick:function(){w(!0),y(e.product)}})},t)}))}):Object(Ee.jsx)(ia,{message:"No asset added yet"})})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(Ee.jsxs)(ve.a,{"aria-labelledby":"project-name","aria-describedby":"project-description",children:[Object(Ee.jsx)(Ht.a,{title:"Project name: ".concat(null===(a=z.name)||void 0===a?void 0:a.toUpperCase())}),Object(Ee.jsx)(ye.a,{children:W?Object(Ee.jsx)(Xe,{}):Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(an.a,{classes:K,overline:(null===(c=z.user)||void 0===c?void 0:c.fullName)&&"Created by: ".concat(z.user.fullName)}),Object(Ee.jsx)(St.a,{primary:"Start: ".concat(wt()(z.startDate).format("YYYY-MM-DD"),", Due date: ").concat(wt()(z.dueDate).format("YYYY-MM-DD"))}),Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Project type:"}),Object(Ee.jsx)(Ct.a,{children:Object(Ee.jsx)(St.a,{primary:null===u||void 0===u?void 0:u.name,secondary:null===u||void 0===u?void 0:u.description})}),Object(Ee.jsxs)(Ce.a,{variant:"h4",children:["Number of items: ",z.nOfItems]}),Ga()(z.description),Object(Ee.jsxs)(pa.a,{className:Z,children:["Budget: $",(null===(i=z.budget)||void 0===i?void 0:i.toLocaleString("en-US"))||0]}),L&&!_.length?Object(Ee.jsx)(Xe,{}):Object(Ee.jsxs)(ye.a,{children:[Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Add custom log"}),Object(Ee.jsx)(ye.a,{children:Object(Ee.jsxs)(fe.a,{item:!0,xs:12,sm:12,md:8,lg:8,children:[Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(ba.a,{label:"Log title",placeholder:"Type here",name:"title",fullWidth:!0,value:h.title,onChange:function(e){var t=e.target,a=t.name,n=t.value;O(Object(p.a)(Object(p.a)({},h),{},Object(g.a)({},a,n)))}}),Object(Ee.jsx)(Ca,{editorState:E,setEditorState:D})]}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:12,md:2,lg:2}),Object(Ee.jsx)(pa.a,{variant:"contained",color:"primary",disabled:G,onClick:function(){h.description=Tt(E),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ge.dispatch({type:F,payload:$e.post("".concat(Je+e,"/histories"),t)})}(T,h)},children:"Send"})]})})]}),Object(Ee.jsx)(Ja.a,{children:_.map((function(e,t){return Object(Ee.jsxs)(Qa.a,{children:[Object(Ee.jsx)(Za.a,{expandIcon:Object(Ee.jsx)(rt.a,{}),"aria-controls":"panel".concat(t,"a-content"),id:"panel".concat(t,"a-header"),children:Object(Ee.jsxs)(Ct.a,{alignItems:"flex-start",children:[Object(Ee.jsx)(St.a,{primary:e.description,secondary:Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(Ce.a,{component:"span",variant:"body2",className:l.inline,color:"textPrimary",children:Dt(V,e)})," \u2014 on ".concat(wt()(e.createdAt).format("MMM DD, YYYY @ HH:mm"))]})}),(e.invoice||e.quote)&&Object(Ee.jsx)(nt.a,{edge:"end",size:"small",component:"a","aria-label":"Print invoice",rel:"noreferrer",href:"".concat(Me,"/").concat(X(e)),target:"_blank",children:Object(Ee.jsx)(en.a,{})})]})}),Boolean(e.content)&&Object(Ee.jsx)(Ka.a,{children:Object(Ee.jsx)(Ne.a,{children:Ga()(e.content)})})]},t)}))})]})]})}),Object(Ee.jsx)(Zt.a,{children:Object(Ee.jsx)(pa.a,{onClick:function(){},color:"primary",children:"Close"})})]})})]})}},{path:"/dashboard/quotes",exact:!0,component:function(){var e=Object(r.b)((function(e){return e})),t=Object(n.useState)([]),a=Object(et.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(za()),l=Object(et.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(null),j=Object(et.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)("add"),O=Object(et.a)(h,2),g=O[0],x=O[1],f=e.quotesGet,v=f.loading,y=f.quotes,C=e.quoteAdd.loaded,S=e.quoteEdit,N=S.loaded,w=S.loading,I=e.login.userInfo;Object(n.useEffect)((function(){if(y.length>0){var e=s.pageNumber,t=s.pageSize,a=Ba(y,e,t);i(a)}}),[y,s]),Object(n.useEffect)((function(){bn()}),[]),Object(n.useEffect)((function(){(C||N)&&(k(),bn())}),[C,N]);var k=function(){m(null),x("add")};return Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,sx:{py:3},children:[Object(Ee.jsxs)(fe.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:[Object(Ee.jsx)(vn,{action:g,currentItem:b}),Object(Ee.jsx)(Rn,{open:"items"===g,setOpen:function(){return k()},quote:b,loading:w,user:I.user})]}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(Ee.jsx)(la,{tableTitle:"All proposals",columns:Cn((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;m(e),x(t)}),I.user),loading:v,data:c,withPagination:!0,dataCount:y.length,pageCount:Math.ceil(y.length/s.pageSize),handlePageChange:function(e){var t=e.selected;d(Object(p.a)(Object(p.a)({},s),{},{pageNumber:t+1}))},page:s.pageNumber})})]})}},{path:"/dashboard/invoices",exact:!0,component:function(){var e=Object(r.b)((function(e){return e})),t=Object(n.useState)([]),a=Object(et.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(za()),l=Object(et.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(null),j=Object(et.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)("add"),O=Object(et.a)(h,2),g=O[0],x=O[1],f=e.invoicesGet,v=f.loading,y=f.invoices,C=e.invoiceEdit.loaded,S=e.login.userInfo;Object(n.useEffect)((function(){if(y.length>0){var e=s.pageNumber,t=s.pageSize,a=Ba(y,e,t);i(a)}}),[y,s]),Object(n.useEffect)((function(){Ln()}),[]),Object(n.useEffect)((function(){C&&(m(null),x("add"),Ln())}),[C]);return Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,sx:{py:3},children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:4,md:4,lg:4,children:Object(Ee.jsx)(Mn,{action:g,currentItem:b})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(Ee.jsx)(la,{tableTitle:"List of invoices",columns:_a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;m(e),x(t)}),S.user),loading:v,data:c,withPagination:!0,dataCount:y.length,pageCount:Math.ceil(y.length/s.pageSize),handlePageChange:function(e){var t=e.selected;d(Object(p.a)(Object(p.a)({},s),{},{pageNumber:t+1}))},page:s.pageNumber})})]})}},{path:"/dashboard/subscriptions",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(et.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(za()),o=Object(et.a)(i,2),l=o[0],s=o[1],d=Object(r.b)((function(e){return e})),u=d.subscriptionsGet,j=u.loading,b=u.subscriptions,m=d.login.userInfo;Object(n.useEffect)((function(){if(b.length>0){var e=l.pageNumber,t=l.pageSize,a=Ba(b,e,t);c(a)}}),[b,l]),Object(n.useEffect)((function(){ge.dispatch({type:q,payload:$e.get("/subscription")})}),[]);return Object(Ee.jsx)(fe.a,{container:!0,spacing:2,sx:{py:3},children:Object(Ee.jsx)(fe.a,{item:!0,xs:12,sm:8,md:8,lg:8,children:Object(Ee.jsx)(la,{tableTitle:"List of subscriptions",columns:Ma(m.user),loading:j,data:a,withPagination:!0,dataCount:b.length,pageCount:Math.ceil(b.length/l.pageSize),handlePageChange:function(e){var t=e.selected;s(Object(p.a)(Object(p.a)({},l),{},{pageNumber:t+1}))},page:l.pageNumber})})})}},{path:"/dashboard/profile",exact:!0,component:function(){var e=hc(),t=Object(r.b)((function(e){return e})),a=t.login.userInfo,c=t.profileEdit,i=c.loading,o=c.loaded,l=c.userInfo;return Object(n.useEffect)((function(){o&&(he("Your account has been successfully updated."),localStorage.setItem(_e,JSON.stringify(l)),setTimeout((function(){window.location.reload()}),3e3))}),[o,l]),Object(Ee.jsx)("div",{className:e.root,children:Object(Ee.jsxs)(fe.a,{container:!0,spacing:4,children:[Object(Ee.jsx)(fe.a,{item:!0,lg:4,md:6,xl:4,xs:12,children:Object(Ee.jsx)(dc,{user:a.user})}),Object(Ee.jsx)(fe.a,{item:!0,lg:8,md:6,xl:8,xs:12,children:Object(Ee.jsx)(mc,{user:a.user,loading:i})})]})})}},{path:"/dashboard/analytics",exact:!0,component:function(){var e,t=Object(n.useState)(Oi),a=Object(et.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)("All"),l=Object(et.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(za()),j=Object(et.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)([]),O=Object(et.a)(h,2),g=O[0],x=O[1],f=Object(n.useState)(null),v=Object(et.a)(f,2),y=v[0],C=v[1],S=Object(r.b)((function(e){return e})),N=S.projectsGet.projects,w=S.analyticsGet,I=w.analytics,k=w.loading;Object(n.useEffect)((function(){Qe({})}),[]),Object(n.useEffect)((function(){var e="";Boolean(c.project)&&(e="PROJECT: ".concat(N.find((function(e){return e._id===c.project})).name,". ")),d(e+"TIME: "+pi.find((function(e){return e.id===c.time})).name),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="?time=".concat(e.time||"allTime");e.project&&(t+="&project=".concat(e.project)),ge.dispatch({type:ce,payload:$e.get("".concat(Sc,"/get/analytics").concat(t))})}(c)}),[c]),Object(n.useEffect)((function(){var e=b.pageNumber,t=b.pageSize,a=Ba(I,e,t);x(a)}),[I,b]);var E;return Object(Ee.jsxs)(Ne.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:[Object(Ee.jsx)(Ac,{open:Boolean(y),setOpen:function(){C(null)},productId:null===y||void 0===y||null===(e=y.product)||void 0===e?void 0:e._id}),Object(Ee.jsxs)(fe.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(fe.a,{item:!0,lg:4,md:4,xl:6,xs:12,children:Object(Ee.jsxs)(ve.a,{children:[Object(Ee.jsx)(Ht.a,{title:"Add filters"}),Object(Ee.jsx)(ye.a,{children:Object(Ee.jsxs)(fe.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsxs)(ma.a,{variant:"outlined",fullWidth:!0,children:[Object(Ee.jsx)(ha.a,{id:"select-project",children:"Select project"}),Object(Ee.jsxs)(Oa.a,{labelId:"select-project",name:"project",value:c.project,onChange:function(e){var t=e.target;return i((function(e){return Object(p.a)(Object(p.a)({},e),{},{project:t.value})}))},children:[Object(Ee.jsx)(mt.a,{value:"",children:"---"}),N.map((function(e,t){return Object(Ee.jsx)(mt.a,{value:e._id,children:e.name},t)}))]})]})}),Object(Ee.jsx)(fe.a,{item:!0,xs:12,children:Object(Ee.jsx)(ka.a,{variant:"contained","aria-label":"outlined primary button group",children:pi.map((function(e,t){var a=e.id,n=e.name;return Object(Ee.jsx)(pa.a,{color:c.time===a?"primary":"",onClick:function(){return i((function(e){return Object(p.a)(Object(p.a)({},e),{},{time:a})}))},children:n},t)}))})})]})})]})}),Object(Ee.jsxs)(fe.a,{item:!0,lg:8,md:8,xl:6,xs:12,children:[Object(Ee.jsx)(Ce.a,{variant:"h4",children:"Analytics page"}),Object(Ee.jsx)(la,{tableTitle:"Filters: ".concat(s),columns:(E=function(e){C(e)},[{content:function(e){var t;return Object(Ee.jsx)(pa.a,{onClick:function(){return E(e,"preview")},children:null===(t=e.product)||void 0===t?void 0:t.name})},label:"3D Assets"},{path:"users",label:"Users"},{path:"clicks",label:"AR Users"},{content:function(e){return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(Wa.a,{variant:"outlined",color:"primary",size:"small",label:"iOs",avatar:Object(Ee.jsx)(Se.a,{children:e.iOs})}),Object(Ee.jsx)(Wa.a,{variant:"outlined",color:"secondary",size:"small",label:"Android",avatar:Object(Ee.jsx)(Se.a,{children:e.androids})}),Object(Ee.jsx)(Wa.a,{variant:"outlined",size:"small",label:"Desktop",avatar:Object(Ee.jsx)(Se.a,{children:e.desktops})})]})},label:"Device by Users"},{content:function(e){return e.countries.map((function(e,t){return Object(Ee.jsx)(Wa.a,{variant:"outlined",size:"small",label:e.name,avatar:Object(Ee.jsx)(Se.a,{children:e.count})},t)}))},label:"Country by Users"}]),loading:k,data:g,withPagination:!0,dataCount:I.length,pageCount:Math.ceil(I.length/b.pageSize),handlePageChange:function(e){var t=e.selected;m(Object(p.a)(Object(p.a)({},b),{},{pageNumber:t+1}))},page:b.pageNumber})]})]})]})}}]},{component:function(){return Object(Ee.jsx)(l.a,{to:"/dashboard/home"})}}],xi=gi,fi=a(110),vi="#FFFFFF",yi={black:"#000000",white:vi,primary:{contrastText:vi,dark:Xt.a.indigo[900],main:Xt.a.indigo[500],light:Xt.a.indigo[100]},secondary:{contrastText:vi,dark:Xt.a.blue[900],main:Xt.a.blue.A400,light:Xt.a.blue.A400},success:{contrastText:vi,dark:Xt.a.green[900],main:Xt.a.green[600],light:Xt.a.green[400]},info:{contrastText:vi,dark:Xt.a.blue[900],main:Xt.a.blue[600],light:Xt.a.blue[400]},warning:{contrastText:vi,dark:Xt.a.orange[900],main:Xt.a.orange[600],light:Xt.a.orange[400]},purple:{contrastText:vi,dark:"#8967fc",main:"#8967fc",light:"#8967fc"},error:{contrastText:vi,dark:Xt.a.red[900],main:Xt.a.red[600],light:Xt.a.red[400]},text:{primary:Xt.a.blueGrey[900],secondary:Xt.a.blueGrey[600],link:Xt.a.blue[600]},background:{default:"#DFD9DF",paper:vi},icon:Xt.a.blueGrey[600],divider:Xt.a.grey[200]},Ci={h1:{color:yi.text.primary,fontWeight:500,fontSize:"35px",letterSpacing:"-0.24px",lineHeight:"40px"},h2:{color:yi.text.primary,fontWeight:500,fontSize:"29px",letterSpacing:"-0.24px",lineHeight:"32px"},h3:{color:yi.text.primary,fontWeight:500,fontSize:"24px",letterSpacing:"-0.06px",lineHeight:"28px"},h4:{color:yi.text.primary,fontWeight:500,fontSize:"20px",letterSpacing:"-0.06px",lineHeight:"24px"},h5:{color:yi.text.primary,fontWeight:500,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"20px"},h6:{color:yi.text.primary,fontWeight:500,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"20px"},subtitle1:{color:yi.text.primary,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"25px"},subtitle2:{color:yi.text.secondary,fontWeight:400,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body1:{color:yi.text.primary,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body2:{color:yi.text.secondary,fontSize:"12px",letterSpacing:"-0.04px",lineHeight:"18px"},button:{color:yi.text.primary,fontSize:"14px"},caption:{color:yi.text.secondary,fontSize:"11px",letterSpacing:"0.33px",lineHeight:"13px"},overline:{color:yi.text.secondary,fontSize:"11px",fontWeight:500,letterSpacing:"0.33px",lineHeight:"13px",textTransform:"uppercase"}},Si={MuiButton:{contained:{boxShadow:"0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12), 0 1px 3px 0 rgba(0,0,0,0.20)",backgroundColor:"#FFFFFF"}},MuiIconButton:{root:{color:yi.icon,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}}},MuiPaper:{elevation1:{boxShadow:"0 0 0 1px rgba(63,63,68,0.05), 0 1px 3px 0 rgba(63,63,68,0.15)"}},MuiTableCell:{root:Object(p.a)(Object(p.a)({},Ci.body1),{},{borderBottom:"1px solid ".concat(yi.divider)})},MuiTableHead:{root:{backgroundColor:Xt.a.grey[50]}},MuiTypography:{gutterBottom:{marginBottom:8}}},Ni=Object(fi.b)({palette:yi,typography:Ci,overrides:Si,zIndex:{appBar:1200,drawer:1100}});var wi=function(){var e=Object(s.a)();return Object(Ee.jsx)(u.a,{theme:Ni,children:Object(Ee.jsxs)(r.a,{store:ge,children:[Object(Ee.jsx)(d.a,{}),Object(Ee.jsx)(l.c,{history:e,children:Object(j.a)(xi)})]})})},Ii=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,977)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))};o.a.render(Object(Ee.jsx)(c.a.StrictMode,{children:Object(Ee.jsx)(wi,{})}),document.getElementById("root")),Ii()}},[[901,1,2]]]);
//# sourceMappingURL=main.efbd4dd9.chunk.js.map